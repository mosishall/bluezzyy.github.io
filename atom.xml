<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>BlueLzy&#39;s Blog</title>
  
  <subtitle>Genius only means hard-working all one&#39;s life</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.bluelzy.com/"/>
  <updated>2018-12-04T14:38:40.251Z</updated>
  <id>https://www.bluelzy.com/</id>
  
  <author>
    <name>BlueLzy</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ubuntu使用魅族手机进行Debug</title>
    <link href="https://www.bluelzy.com/articles/ubuntu_use_meizu_mobile_debug.html"/>
    <id>https://www.bluelzy.com/articles/ubuntu_use_meizu_mobile_debug.html</id>
    <published>2018-11-25T11:22:12.000Z</published>
    <updated>2018-12-04T14:38:40.251Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>最近在使用Ubuntu系统进行Android开发</p><p>结果发现连接真机Debug的时候居然无法识别</p><p>一番折腾以后解决了问题，同时把过程记录下来。</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于公司的项目过大，用15年款13寸的乞丐版Macbook Pro 已经跑不动了，于是只好把项目导入到自己的PC上。</p><p>而自己又用习惯了Macbook Pro的开发环境，对于Windows的命令行实在是无法忍受了，于是给PC装了个Ubuntu 16.04. </p><p>诶，没想到Ubuntu还挺好用的。具体可以看 <a href="https://www.bluelzy.com/use_ubuntu_to_develop_android.html">从Mac转投Ubuntu进行Android开发</a></p><p>但是，常在河边走，哪有不湿鞋。Android Studio + 模拟器 这个组合我觉得还是有点慢，想着要不试试真机，可能编译速度会快些呢，于是便接上了 <strong>魅蓝Note 6</strong> ，开始了日常踩坑~</p><h2 id="无法识别手机"><a href="#无法识别手机" class="headerlink" title="无法识别手机"></a>无法识别手机</h2><p>连接手机后点击 <strong>Run</strong> 按钮，会发现手机那一项的版本是<strong>Null</strong>，运行项目的话也会失败。</p><p>在终端输入：</p><blockquote><p> adb devices </p></blockquote><p>会看到手机是无法被识别的。这个时候就需要祭出谷歌大法了： <a href="https://developer.android.com/studio/run/device?hl=zh-cn" target="_blank" rel="noopener">在硬件设备上运行应用</a></p><p>但是由于魅族不在谷歌的USB供应商ID列表里面，我们只能自己找办法了。</p><p>其他HTC ，Sony，ZTE，LG，Huawei，Samsung 都是有的~</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ol><li>连接电脑后在手机上选择 <strong>usb计算机连接 </strong>  -&gt;  <strong>内置光盘</strong></li><li>在弹出来的文件夹中选择 <strong>USB Reference Manual</strong> -&gt; <strong>简体</strong> </li><li>打开 <strong>ADB_参考说明</strong> 一步步进行操作就可以了</li></ol><blockquote><p>注意：修改完之后不需要重启电脑，只要重启服务，然后把手机连接选项改回来就可以了</p></blockquote><p>成功后的截图：</p><p><img src="http://www.wailian.work/images/2018/11/25/Success.png" alt="Success.png"></p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;最近在使用Ubuntu系统进行Android开发&lt;/p&gt;
&lt;p&gt;结果发现连接真机Debug的时候居然无法识别&lt;/p&gt;
&lt;p&gt;一番折腾以后解决了问题，同时把过程记录下来。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android" scheme="https://www.bluelzy.com/categories/Android/"/>
    
    
      <category term="Android" scheme="https://www.bluelzy.com/tags/Android/"/>
    
      <category term="Ubuntu" scheme="https://www.bluelzy.com/tags/Ubuntu/"/>
    
      <category term="Debug" scheme="https://www.bluelzy.com/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>从Mac转投Ubuntu进行Android开发</title>
    <link href="https://www.bluelzy.com/articles/use_ubuntu_to_develop_android.html"/>
    <id>https://www.bluelzy.com/articles/use_ubuntu_to_develop_android.html</id>
    <published>2018-11-24T11:49:54.000Z</published>
    <updated>2018-11-25T12:52:21.599Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Macbook Pro 13寸 乞丐版：开始撤退</p><p>I7 7700 Win 10： 猥琐发育，别浪</p><p>I5 4570 Ubuntu ：进攻敌方水晶</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于公司的Android项目过大，15年款13寸的乞丐版Macbook Pro 已经跑不动了，于是只好把项目导入到自己的PC上。</p><p>而自己又用习惯了Macbook Pro的开发环境，对于Windows的命令行实在是无法忍受，于是给PC装了Ubuntu 16.04. </p><p>诶，没想到Ubuntu还挺好用的，不仅速度快，开发起来还很顺手（就是有点想念渣渣辉，古天乐了），于是就把其他的开发环境都一并配上，开始用Ubuntu作为主要开发环境。</p><h3 id="首先对三个机器对同一个项目的编译速度做个比较吧"><a href="#首先对三个机器对同一个项目的编译速度做个比较吧" class="headerlink" title="首先对三个机器对同一个项目的编译速度做个比较吧"></a>首先对三个机器对同一个项目的编译速度做个比较吧</h3><h4 id="Macbook-Pro-2015-Early-13"><a href="#Macbook-Pro-2015-Early-13" class="headerlink" title="Macbook Pro 2015 Early 13"></a>Macbook Pro 2015 Early 13</h4><p><img src="http://www.wailian.work/images/2018/11/25/Snip20181125_3.png" alt="Snip20181125_3.png"></p><h4 id="公司PC"><a href="#公司PC" class="headerlink" title="公司PC"></a>公司PC</h4><p>CPU：I7 7700</p><p>内存：16G DDR4</p><p>系统：Win 10</p><p>因为这篇文章是周末在家写的，就不放图片了</p><h4 id="个人PC-Ubuntu"><a href="#个人PC-Ubuntu" class="headerlink" title="个人PC - Ubuntu"></a>个人PC - Ubuntu</h4><p><img src="http://www.wailian.work/images/2018/11/25/ubuntu_pc.png" alt="ubuntu_pc.png"></p><h4 id="项目大小（Build后）"><a href="#项目大小（Build后）" class="headerlink" title="项目大小（Build后）"></a>项目大小（Build后）</h4><p><img src="http://www.wailian.work/images/2018/11/25/_002.png" alt="_002.png"></p><h4 id="编译速度"><a href="#编译速度" class="headerlink" title="编译速度"></a>编译速度</h4><h5 id="第一次编译-（包括切换分支后的第一次编译时间）"><a href="#第一次编译-（包括切换分支后的第一次编译时间）" class="headerlink" title="第一次编译 （包括切换分支后的第一次编译时间）"></a>第一次编译 （包括切换分支后的第一次编译时间）</h5><p>Macbook Pro ： 12 min + 风扇的怒吼</p><p>公司PC：4min 30s - 6min 10s</p><p>Ubuntu：1min 39s - 2min 16s</p><h5 id="Instant-Run"><a href="#Instant-Run" class="headerlink" title="Instant Run"></a>Instant Run</h5><p>Macbook Pro ： 12 min + 风扇的怒吼</p><p>公司PC：2min 8s - 4min</p><p>Ubuntu：3s</p><p>虽然公司的PC是 I7 7700 的CPU + 16G 内存，但是每次编译的时间都够我去泡个咖啡了，哪怕是Instant Run 都需要2分钟左右。再加上Macbook Pro的阵亡，我一开始对家里用了4年的PC老年机真的没抱任何希望。刚开始在Win 10 环境下的编译时间和Mac差不多，没想到换成Ubuntu后会有这么 <strong>Perfect</strong> 的表现，<strong>Perfect！ Perfect！ Perfect！</strong> </p><p>最后上个图吧</p><p><strong>Ubuntu下第一次编译时间：</strong></p><p><img src="http://www.wailian.work/images/2018/11/25/ubuntu_time.png" alt="ubuntu_time.png"></p><p><strong>Instant Run的编译时间：</strong></p><p><img src="http://www.wailian.work/images/2018/11/25/ubuntu_least.png" alt="ubuntu_least.png"></p><h2 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h2><p>Macbook Pro 2015款比不过是很正常的，但是为什么I7 7700 的 win10 PC 还会比不过i5 4570 的 Ubuntu呢…</p><p>而且这个差距不像游戏的FPS 差 5 -10 帧， 用编译时间来算的话这个差别已经是200 % - 4000%( 2min / 3s)了。</p><p>仿佛在Win10上是不存在Instant Run的，哪怕我一句代码都没有改，点击Build 和 Instant Run 的时间都需要2min以上…</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过这一个多月的Ubuntu使用来看，作为程序员的生产环境真是一点问题都没有，对我而言是这样的。如果需要玩游戏的话还是选择Windows吧。</p><p>而且美化过后的Ubuntu其实还是挺好看的~</p><p><img src="http://www.wailian.work/images/2018/11/25/_003.png" alt="_003.png"></p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Macbook Pro 13寸 乞丐版：开始撤退&lt;/p&gt;
&lt;p&gt;I7 7700 Win 10： 猥琐发育，别浪&lt;/p&gt;
&lt;p&gt;I5 4570 Ubuntu ：进攻敌方水晶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="技术向" scheme="https://www.bluelzy.com/categories/%E6%8A%80%E6%9C%AF%E5%90%91/"/>
    
    
      <category term="Android" scheme="https://www.bluelzy.com/tags/Android/"/>
    
      <category term="Ubuntu" scheme="https://www.bluelzy.com/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D14)-学习资料汇总</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day14.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day14.html</id>
    <published>2018-10-24T12:51:05.000Z</published>
    <updated>2018-10-24T14:15:22.734Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>首先祝所有程序员1024节日快乐</p><p>我们也来到了Kotlin学习之旅的最后一天</p><p>今天的主题是：学习资料汇总</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day7.html">Kotlin学习之旅(D7)-Kotlin Idioms part 2</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day8.html">Kotlin学习之旅(D8)-From Java to Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day9.html">Kotlin学习之旅(D9)-Android Extensions</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day10.html">Kotlin学习之旅(D10)- Unit Test with Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day11.html">Kotlin学习之旅(D11)-第一个App之项目介绍</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day12.html">Kotlin学习之旅(D12)-第一个App之功能实现</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day13.html">Kotlin学习之旅(D13)-第一个App之功能完善</a></p><h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p>俗话说得好，官方文档就是最好的入门教程，对于有其他语言基础的开发者来说，通过官方文档来学习是最好的了，因为结构清晰，解释准确，而且保证最新的（相对书籍和视频来说）。</p><p>因此建议大家可以通过官网来学习Kotlin，除了看理论基础，Kotlin还提供了在线编辑器和代码示例</p><h3 id="文档类"><a href="#文档类" class="headerlink" title="文档类"></a>文档类</h3><ul><li><a href="https://link.juejin.im/?target=https%3A%2F%2Fkotlinlang.org%2F" target="_blank" rel="noopener">Kotlin官网</a></li><li><a href="http://www.kotlincn.net/docs/reference/" target="_blank" rel="noopener">Kotlin中文站</a></li><li><a href="https://www.kotlincn.net/docs/reference/android-overview.html" target="_blank" rel="noopener">Kotlin中文文档</a></li><li><a href="https://github.com/JetBrains/kotlin" target="_blank" rel="noopener">Github地址</a></li></ul><h3 id="在线编程"><a href="#在线编程" class="headerlink" title="在线编程"></a>在线编程</h3><ul><li><a href="https://play.kotlinlang.org/" target="_blank" rel="noopener">Playground</a></li><li><a href="https://play.kotlinlang.org/byExample" target="_blank" rel="noopener">Kotlin Examples</a></li><li><a href="https://play.kotlinlang.org/koans" target="_blank" rel="noopener">Koans</a></li></ul><blockquote><p>PS: Koans 还提供了Android Studio的插件，直接在Plugins里面搜索<a href="https://blog.jetbrains.com/kotlin/2016/03/kotlin-educational-plugin/" target="_blank" rel="noopener">Kotlin Educational Plugin</a>安装就可以了</p></blockquote><h2 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h2><p>如果是没有编程基础，或者觉得官方文档看完了还是不太懂的童鞋，我推荐你们去看看以下的书籍，因为书籍往往是作者的经验的总结，并且是通过一定的结构和顺序来组织的，不像官网文档是一个个零散的知识点，很多书籍在学习完理论以后，都会通过一个综合的Demo来运行书中学习到的知识点，这种方式更适合初学者。</p><h3 id="《Kotlin-in-Action》"><a href="#《Kotlin-in-Action》" class="headerlink" title="《Kotlin in Action》"></a>《Kotlin in Action》</h3><p>这本书就不多介绍了，豆瓣评分<strong>9.1分 </strong>，每个学习Kotlin的人都应该看一遍。建议看英文，中文版的名字是《Kotlin实战》</p><ul><li><a href="https://item.jd.com/12224904.html" target="_blank" rel="noopener">Kotlin实战 - 京东</a></li><li><a href="https://www.amazon.cn/dp/B074BNVCG9/ref=sr_1_1?ie=UTF8&amp;qid=1540386742&amp;sr=8-1&amp;keywords=kotlin%E5%AE%9E%E6%88%98" target="_blank" rel="noopener">Kotlin实战 - 亚马逊</a></li><li><a href="http://product.dangdang.com/25124461.html?_ddclickunion=P-306226-0-s27093660|ad_type=0|sys_id=1#dd_refer=https%3A%2F%2Fbook.douban.com%2Flink2%2F%3Flowest%3D5790%26pre%3D0%26vendor%3Ddangdang%26srcpage%3Dsubject%26price%3D7030%26pos%3D1%26url%3Dhttp%253a%252f%252funion.dangdang.com%252ftransfer.php%253ffrom%253dp-306226-0-s27093660%2526backurl%253dhttp%253a%252f%252fproduct.dangdang.com%252fproduct.aspx%253fproduct_id%253d25124461%26cntvendor%3D3%26srcsubj%3D27093660%26type%3Dbkbuy%26subject%3D27093660" target="_blank" rel="noopener">Kotlin实战 - 当当</a></li><li><a href="http://www.bookschina.com/7556161.htm" target="_blank" rel="noopener">Kotlin实战 - 中国图书网</a></li></ul><p>有需要英文版的童鞋请自行百度，我就不放电子版的链接了</p><h3 id="《Kotlin-for-Android-Developers》"><a href="#《Kotlin-for-Android-Developers》" class="headerlink" title="《Kotlin for Android Developers》"></a>《Kotlin for Android Developers》</h3><p>这本书的作者是Antonio Leiva，一名Android开发者，因此从书名就可以知道，这本书就是教大家用Kotlin来开发一款Android App。由于章节讲解比较详细，因此很适合初学者。一步步从零开始，最后实现自己的第一个App，这个过程还是很有成就感的，推荐给Android开发者</p><p>因为这本书国内没有出版，而京东上原版的售价是366RMB，而且还要经常没货，所以还是自行百度吧。。</p><h3 id="《Programming-Kotlin》"><a href="#《Programming-Kotlin》" class="headerlink" title="《Programming Kotlin》"></a>《Programming Kotlin》</h3><p>这本书的作者是Stephen Samuel 和 Stefan Bocutiu。两名来自英国的小哥哥。本书主要的内容包括Kotlin语言的特性，例如lambda和higher-order functions，空安全和泛型等，如果想对Kotlin这门语言有更深入的了解，可以通过这本书来学习。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>按照我的情况来说，光靠看官网文档是不够的，最好买1-2本书一起看。我自己选择的是《Kotlin in Action》，有些官方文档写的比较简洁的知识点，可以在书中找到对应的章节，然后跟着作者的思路完成一些小例子，在实践中学习效果更好，效率也更高。</p><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><h3 id="Youtube-Kotlin-Tutorial"><a href="#Youtube-Kotlin-Tutorial" class="headerlink" title="Youtube - Kotlin Tutorial"></a>Youtube - Kotlin Tutorial</h3><p>Youtube上的这个视频，我就是看着它入门的。。<a href="https://www.youtube.com/watch?v=Org0vh-VSgA&amp;list=PLsyeobzWxl7rooJFZhc3qPLwVROovGCfh" target="_blank" rel="noopener">Kotlin Tutorial</a></p><p>虽然英语不够好没有全听懂，但是up主一边讲解一边敲代码，在看完官方文档之后再来看这些例子就很容易理解了。每一个视频大概就是5-10分钟，讲解一个语法/特性，零碎时间也可以跟着学~</p><h3 id="B站-黑马Kotlin教程"><a href="#B站-黑马Kotlin教程" class="headerlink" title="B站- 黑马Kotlin教程"></a>B站- 黑马Kotlin教程</h3><p>B站地址：<a href="https://www.bilibili.com/video/av17644218/" target="_blank" rel="noopener">https://www.bilibili.com/video/av17644218/</a></p><p>如果是在校生，时间比较充裕的话可以看这个，但是还是推荐看Youtube的，因为通过比较国内（慕课网，网易云课堂）和国外（Pluralsight , Youtube）的教学特点，发现国外的废话比较少。。整节课讲的基本上都是干货，国内的在线课程很喜欢讲理论，而且比较空洞，一个知识点照着PPT念，一下子5分钟就过去了。</p><h3 id="其他视频"><a href="#其他视频" class="headerlink" title="其他视频"></a>其他视频</h3><h4 id="Introduction-to-Kotlin"><a href="#Introduction-to-Kotlin" class="headerlink" title="Introduction to Kotlin"></a><a href="https://www.youtube.com/watch?v=X1RVYt2QKQE" target="_blank" rel="noopener">Introduction to Kotlin</a></h4><p>Google I/O 2017演讲致力于首次向人们介绍Kotlin，并提出如何改进他们的工作流程，他涵盖了许多的基础知识，并展示了一些很酷的Kotlin用法。</p><h4 id="Life-is-Great-and-Everything-Will-Be-Ok-Kotlin-is-Here"><a href="#Life-is-Great-and-Everything-Will-Be-Ok-Kotlin-is-Here" class="headerlink" title="Life is Great and Everything Will Be Ok, Kotlin is Here"></a><a href="https://www.youtube.com/watch?v=fPzxfeDJDzY" target="_blank" rel="noopener">Life is Great and Everything Will Be Ok, Kotlin is Here</a></h4><p>第二个Kotlin演讲也是来自于Google I/O,涵盖了更多高级话题，如涉及模式，最佳实践和其他常用原则，这也揭示了使用Kotlin在生产中的意义以及作为新的语言的挑战。</p><h4 id="使用Kotlin和Gradle更好的开发Android应用"><a href="#使用Kotlin和Gradle更好的开发Android应用" class="headerlink" title="使用Kotlin和Gradle更好的开发Android应用"></a><a href="https://www.youtube.com/watch?v=_DaZQ374Chc" target="_blank" rel="noopener">使用Kotlin和Gradle更好的开发Android应用</a></h4><p>介绍了Kotlin如何适应典型的Android工作流程中现有的工具</p><h4 id="Better-Android-Development-with-Kotlin-amp-Gradle"><a href="#Better-Android-Development-with-Kotlin-amp-Gradle" class="headerlink" title="Better Android Development with Kotlin &amp; Gradle"></a><a href="https://www.youtube.com/watch?v=ZlQhmkp_jyk" target="_blank" rel="noopener">Better Android Development with Kotlin &amp; Gradle</a></h4><p>一个非常好的8分钟教程，可以快速了解最重要的Kotlin功能，例如缩短的变量声明，lambdas和扩展功能等。</p><h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><h3 id="Anko"><a href="#Anko" class="headerlink" title="Anko"></a><a href="https://github.com/Kotlin/anko" target="_blank" rel="noopener">Anko</a></h3><p>Anko是Jetbrains官方提供的一个让Kotlin开发更快速简单的类库，旨在使代码书写更加清晰易懂，形式上为DSL编程。</p><h3 id="KBinding"><a href="#KBinding" class="headerlink" title="KBinding"></a><a href="https://github.com/EndSmile/KBinding/blob/develop/README_CN.md" target="_blank" rel="noopener">KBinding</a></h3><p>MVVM模板框架</p><h3 id="android-topeka"><a href="#android-topeka" class="headerlink" title="android-topeka"></a><a href="https://github.com/googlesamples/android-topeka" target="_blank" rel="noopener">android-topeka</a></h3><p>google 官方 material design 示例应用</p><h3 id="GankClient-Kotlin"><a href="#GankClient-Kotlin" class="headerlink" title="GankClient-Kotlin"></a><a href="https://github.com/githubwing/GankClient-Kotlin" target="_blank" rel="noopener">GankClient-Kotlin</a></h3><p>用 Kotlin 实现的干货集中营客户端</p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>如果是<strong>初学者</strong>，建议学习顺序为 官方文档（遇到不懂的） -&gt; Kotlin in Action  -&gt; 看视频/项目加深理解 -&gt; 自己做项目</p><p>如果是<strong>老司机</strong>，建议直接看官方文档，了解基本语法和特性后就可以开始做项目了，因为很多语言特性都是想通的，只是语法上有所区别，直接上手敲代码，加深理解和巩固语法就OK了。</p><p>最最重要的一条建议： Practice make Prefect.</p><p>从10月7日国庆的最后一天，到10月24日程序员日，写下了14篇博客，记录下了自己的成长轨迹。</p><p>完成了整个Kotlin学习之旅，接下来也要继续加油~</p><p>如果这一系列文章对大家有帮助的话，那真的是我的荣幸~</p><p>Day  14 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;首先祝所有程序员1024节日快乐&lt;/p&gt;
&lt;p&gt;我们也来到了Kotlin学习之旅的最后一天&lt;/p&gt;
&lt;p&gt;今天的主题是：学习资料汇总&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="kotlin" scheme="https://www.bluelzy.com/tags/kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D13)-第一个App之功能完善</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day13.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day13.html</id>
    <published>2018-10-22T00:41:48.000Z</published>
    <updated>2018-10-22T13:25:56.360Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第十三天</p><p>今天主要是编写代码，继续实现其他的功能</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day7.html">Kotlin学习之旅(D7)-Kotlin Idioms part 2</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day8.html">Kotlin学习之旅(D8)-From Java to Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day9.html">Kotlin学习之旅(D9)-Android Extensions</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day10.html">Kotlin学习之旅(D10)- Unit Test with Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day11.html">Kotlin学习之旅(D11)-第一个App之项目介绍</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day12.html">Kotlin学习之旅(D12)-第一个App之功能实现</a></p><h2 id="今日目标"><a href="#今日目标" class="headerlink" title="今日目标"></a>今日目标</h2><p>首先要说的就是，昨天我们已经完成了App基本的添加，编辑功能了，但是有一个很不方便的地方，就是App来查看笔记的时候没有办法直接查看下一条，因此今天我们要做的就是，在ActionBar加入一个Next按钮，点击按钮之后能显示下一条笔记的信息。</p><p><img src="http://www.wailian.work/images/2018/10/21/Oct-21-201810-31-50.gif" alt="Oct-21-201810-31-50.md.gif"></p><p>点击笔记 -&gt; 显示笔记内容 -&gt; 点击右上角的 ‘’&gt;’’  -&gt; 显示下一条笔记</p><p>这种交互方式对用户来说更为友好，顺便我们也能学习一下ActionBar的用法~走你</p><h2 id="修改MenuItem"><a href="#修改MenuItem" class="headerlink" title="修改MenuItem"></a>修改MenuItem</h2><p> 首先我们来看一下res -&gt; menu 文件夹下的 <code>menu_main.xml</code>文件：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">menu</span> xmln<span class="variable">s:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmln<span class="variable">s:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmln<span class="variable">s:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    tool<span class="variable">s:context</span>=<span class="string">"com.blue.notekeeper.MainActivity"</span>&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=<span class="string">"@+id/action_settings"</span></span><br><span class="line">        android:orderInCategory=<span class="string">"100"</span></span><br><span class="line">        android:title=<span class="string">"@string/action_settings"</span></span><br><span class="line">        app:showAsAction=<span class="string">"never"</span> /&gt;</span><br><span class="line">&lt;/<span class="keyword">menu</span>&gt;</span><br></pre></td></tr></table></figure><p>这个时候只有一个item,我们加入Next Item</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;item</span><br><span class="line">    android:<span class="attribute">id</span>=<span class="string">"@+id/action_next"</span></span><br><span class="line">    android:<span class="attribute">checkable</span>=<span class="string">"true"</span></span><br><span class="line">    android:<span class="attribute">enabled</span>=<span class="string">"true"</span></span><br><span class="line">    android:<span class="attribute">icon</span>=<span class="string">"@drawable/ic_forward_white_24dp"</span></span><br><span class="line">    android:<span class="attribute">title</span>=<span class="string">"Next"</span></span><br><span class="line">    android:<span class="attribute">visible</span>=<span class="string">"true"</span></span><br><span class="line">    app:<span class="attribute">showAsAction</span>=<span class="string">"ifRoom|withText"</span> /&gt;</span><br></pre></td></tr></table></figure><p>创建<code>icon</code>的方式和前面创建其他图标是一样的</p><ol><li>drawable文件夹右键 -&gt; new  -&gt;  Vector Asset</li><li>在<code>Clip Art</code> 选项中选择 <code>forward</code> </li><li>把颜色设置为白色</li></ol><p>也可以看图片：</p><p><img src="http://www.wailian.work/images/2018/10/22/Snip20181022_18.png" alt="Snip20181022_18.png"></p><p><strong>注意：app:showAsAction=”ifRoom|withText”</strong> 的意思就是 <strong>当屏幕空间足够的时候，这个item会显示到ActionBar</strong> 具体效果大家可以运行项目，然后 <strong>切换屏幕方向</strong> 就懂了</p><ul><li>横屏的时候Next的图标和文字都会显示出来</li><li>竖屏的时候Next只有图标显示出来，文字由于空间不足就隐藏起来了</li></ul><h2 id="修改MainActivity"><a href="#修改MainActivity" class="headerlink" title="修改MainActivity"></a>修改MainActivity</h2><p>xml文件搞定以后，我们就要开始在代码中处理逻辑了</p><p>Menu提供了两个方法给我们处理menu item的相关逻辑</p><ul><li>onPrepareOptionsMenu() - 这个方法很常见，在item被点击的时候会触发，因此我们在这里做对应的点击事件的处理</li><li>onPrepareOptionsMenu() - 这个方法可能用的比较少，在item还未初始化之前会被调用，因此我们可以在这里做一些准备工作，例如对item图标的更换，点击事件的控制等，接下来大家就知道为什么要重新这个方法了</li></ul><h4 id="重写onPrepareOptionsMenu"><a href="#重写onPrepareOptionsMenu" class="headerlink" title="重写onPrepareOptionsMenu()"></a>重写onPrepareOptionsMenu()</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onOptionsItemSelected</span><span class="params">(item: <span class="type">MenuItem</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="comment">// Handle action bar item clicks here. The action bar will</span></span><br><span class="line">    <span class="comment">// automatically handle clicks on the Home/Up button, so long</span></span><br><span class="line">    <span class="comment">// as you specify a parent activity in AndroidManifest.xml.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">when</span> (item.itemId) &#123;</span><br><span class="line">        R.id.action_settings -&gt; <span class="literal">true</span></span><br><span class="line">        R.id.action_next -&gt; &#123;</span><br><span class="line">            moveNext()</span><br><span class="line">            <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> -&gt; <span class="keyword">super</span>.onOptionsItemSelected(item)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>知识点：when 表达式</p></blockquote><h5 id="moveNext"><a href="#moveNext" class="headerlink" title="moveNext()"></a>moveNext()</h5><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">moveNext</span></span>() &#123;</span><br><span class="line">    ++notePosition</span><br><span class="line">    displayNote()</span><br><span class="line">    invalidateOptionsMenu()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>每一次点击 <code>next</code> 按钮，我们先让记录当前笔记位置的变量<code>notePosition</code> +1，然后再显示下一条笔记，这个方法已经在昨天的文章里实现了，最后就是调用<code>invalidateOptionsMenu()</code> 方法。</p><h4 id="重写onPrepareOptionsMenu-1"><a href="#重写onPrepareOptionsMenu-1" class="headerlink" title="重写onPrepareOptionsMenu()"></a>重写onPrepareOptionsMenu()</h4><p>在没有重写这个方法之前，如果我们不停的点击next,到了最后一条笔记的时候，再点击next，app会crash，原因就是数组下标越界了。这个问题很容易解决，就是当我们已经显示了最后一条笔记时，next按钮变成一个不可点击的状态，如图：</p><p><img src="http://www.wailian.work/images/2018/10/22/Snip20181022_19.png" alt="Snip20181022_19.png"></p><p>在onPrepareOptionsMenu()方法里面，我们通过当前的位置来进行判断是否需要变更图标</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPrepareOptionsMenu</span><span class="params">(menu: <span class="type">Menu</span>?)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">       <span class="keyword">if</span> (notePosition&gt;= DataManager.notes.lastIndex)&#123;</span><br><span class="line">           <span class="keyword">val</span> menuItem = menu?.findItem(R.id.action_next)</span><br><span class="line">           <span class="keyword">if</span> (menuItem != <span class="literal">null</span>)&#123;</span><br><span class="line">               menuItem.icon = getDrawable(R.drawable.ic_block_white_24dp)</span><br><span class="line">               menuItem.isEnabled = <span class="literal">false</span></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">super</span>.onPrepareOptionsMenu(menu)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>如果还没到最后一条笔记，那么就显示next，否则的话就显示<code>block</code>，并且设置为不可点击。</p><blockquote><p>关于如何生成 block icon，这里就不重复了，步骤和上面生成Next图标是一样的</p></blockquote><p>最后再运行一遍App，看一下效果，应该就和Day11那篇文章开头的动图是一样的了。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在这个笔记App中，我们实现了以下功能：</p><ul><li>新增笔记</li><li>查看和编辑笔记</li><li>通过Next查看下一条笔记</li><li>横竖屏切换时保存笔记状态</li></ul><p>但是其实还有许多可以改进的地方，例如：</p><ul><li>删除笔记（List 左滑 / 长按 / 进入编辑页面删除 等等）</li><li>优化控件（RecyclerView 替换 ListView）</li><li>优化界面（让笔记通过卡片形式展示，加入点击和过场动画，使用不同颜色的字体 等等）</li><li>优化笔记功能（可以插入图片，url，等额外的信息）</li></ul><p>有兴趣的童鞋可以在此基础上继续开发~通过实战提高自己的技术！！</p><p>不过我们Kotlin学习之旅的目的还是达到了，虽然只是一个简单的半成品App，通过前期学习Kotlin的语法和特性，然后到一步步写出这个App，这个过程中的成就感还是非常大的，同时也让自己对Android和Kotlin得以一直保持热度和兴趣。</p><p>明天就是Kotlin学习之旅的最后一天了，我会做一个Kotlin学习资料的总结，包括文档，博客，视频，Github的开源项目等</p><p>Day  13 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第十三天&lt;/p&gt;
&lt;p&gt;今天主要是编写代码，继续实现其他的功能&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="kotlin" scheme="https://www.bluelzy.com/tags/kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D12)-第一个App之功能实现</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day12.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day12.html</id>
    <published>2018-10-21T03:19:01.000Z</published>
    <updated>2018-10-22T00:42:51.874Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第十二天</p><p>今天主要是Koltin编写代码，进行功能实现</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day7.html">Kotlin学习之旅(D7)-Kotlin Idioms part 2</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day8.html">Kotlin学习之旅(D8)-From Java to Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day9.html">Kotlin学习之旅(D9)-Android Extensions</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day10.html">Kotlin学习之旅(D10)- Unit Test with Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day11.html">Kotlin学习之旅(D11)-第一个App之项目介绍</a></p><h2 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h2><h4 id="开发环境："><a href="#开发环境：" class="headerlink" title="开发环境："></a>开发环境：</h4><ul><li>MacOS  Mojave  Version 10.14 </li><li>Android Studio 3.2</li></ul><h4 id="创建NoteKeeper"><a href="#创建NoteKeeper" class="headerlink" title="创建NoteKeeper"></a>创建NoteKeeper</h4><ol><li>打开Android Studio -&gt; New Project -&gt; 输入项目名称NoteKeeper </li><li>到Add an Activity to Mobile 的时候，选择 <code>Basic Activity</code></li></ol><p><img src="http://www.wailian.work/images/2018/10/21/Snip20181021_13.png" alt="Snip20181021_13.png"></p><ol><li>别忘了勾上 <code>include kotlin support</code></li><li>完成项目创建</li></ol><h2 id="管理实体类"><a href="#管理实体类" class="headerlink" title="管理实体类"></a>管理实体类</h2><p>我们要记录笔记，那么首先就需要有一个实体类用于记录课程，还有一个实体类用于记录笔记信息，这个时候我们可以创建一个 <strong>数据管理类</strong> 来统一管理这些实体类</p><h3 id="创建NoteKeeperData"><a href="#创建NoteKeeperData" class="headerlink" title="创建NoteKeeperData"></a>创建NoteKeeperData</h3><p>在Java文件夹下的com.blue.notekeeper文件夹(你们的应该是各自的项目名称) 右键，new -&gt; kotlin file</p><p><img src="http://www.wailian.work/images/2018/10/21/Snip20181021_14.png" alt="Snip20181021_14.png"></p><p>创建一个名为<code>NoteKeeperData</code> 的Kotlin File</p><p><strong>注意：在新建文件的时候，下面有个kind选项，我们选择的是File 而不是Class</strong></p><p><img src="http://www.wailian.work/images/2018/10/21/Snip20181021_15.png" alt="Snip20181021_15.png"></p><p>此时我们的需求是：</p><ol><li>课程有id，有title</li><li>笔记有title，text，还需要课程的信息</li></ol><p>所以在NoteKeeperData里面编写代码：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   author : BlueLzy</span></span><br><span class="line"><span class="comment"> *   e-mail : bluehobert<span class="doctag">@gmail</span>.com</span></span><br><span class="line"><span class="comment"> *   date   : 2018/10/20 09:58</span></span><br><span class="line"><span class="comment"> *   desc   :</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseInfo</span> </span>(<span class="keyword">val</span> courseId: String, <span class="keyword">val</span> title: String) &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">NoteInfo</span></span>(<span class="keyword">var</span> course: CourseInfo? = <span class="literal">null</span>, <span class="keyword">var</span> title: String? = <span class="literal">null</span>, <span class="keyword">var</span> text: String? = <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"课程： <span class="variable">$course</span> \n课题： <span class="variable">$title</span> \n笔记： <span class="variable">$text</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>CourseInfo</code> 和 <code>NoteInfo</code> 都是Data Class，然后重写toString()方法，返回我们需要的信息和指定的格式</p><blockquote><p>知识点：Data Class , 字符串模板，构造函数，默认参数，空安全</p></blockquote><h2 id="数据管理类"><a href="#数据管理类" class="headerlink" title="数据管理类"></a>数据管理类</h2><p>有个实体管理类，我们就可以开始加入模拟数据了</p><p>首先创建一个Kotlin Class   -&gt;  <code>DataManager</code></p><h4 id="定义存储数据类型"><a href="#定义存储数据类型" class="headerlink" title="定义存储数据类型"></a>定义存储数据类型</h4><p>我们使用HashMap来存储课程(CourseInfo)，使用ArrayList来存储笔记(NoteInfo)，因此定义两个val</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val courses = HashMap<span class="params">&lt;String, CourseInfo&gt;</span>()   <span class="comment">// use courseId to find CourseInfo class</span></span><br><span class="line">val notes = ArrayList<span class="params">&lt;NoteInfo&gt;</span>()   <span class="comment">// Arraylist for NoteInfo</span></span><br></pre></td></tr></table></figure><h4 id="加入模拟的课程数据"><a href="#加入模拟的课程数据" class="headerlink" title="加入模拟的课程数据"></a>加入模拟的课程数据</h4><p>我们通过courses.set() 方法加入数据</p><p>这里有好几种方式，还记得我们的CourseInfo类吗</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">CourseInfo</span> (<span class="title">val</span> <span class="title">courseId</span>: <span class="type">String</span>, <span class="title">val</span> <span class="title">title</span>: <span class="type">String</span>)</span></span><br></pre></td></tr></table></figure><p>我们实例化一个CourseInfo对象的时候，需要传入<code>courseId</code> 和 <code>title</code> 两个参数，但是传参也有好几种方式</p><p><strong>不指定参数名，指定参数名，指定参数名但是不按顺序</strong> 都是没问题的，可以看代码注释</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">      <span class="selector-tag">var</span> course = CourseInfo(<span class="string">"android_intent"</span>, <span class="string">"使用Intent进行Activity跳转"</span>)</span><br><span class="line">      courses.set(course<span class="selector-class">.courseId</span>,course)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 指定参数名</span></span><br><span class="line">      course = CourseInfo(courseId = <span class="string">"android_async"</span>, title = <span class="string">"Android中的异步编程"</span>)</span><br><span class="line">      courses.set(course<span class="selector-class">.courseId</span>, course)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// title 作为第一个参数</span></span><br><span class="line">      course = CourseInfo(title = <span class="string">"Java 基础"</span>, courseId = <span class="string">"java_lang"</span>)</span><br><span class="line">      courses.set(course<span class="selector-class">.courseId</span>, course)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不指定参数名</span></span><br><span class="line">      course = CourseInfo(<span class="string">"java_core"</span>, <span class="string">"Java 核心编程"</span>)</span><br><span class="line">      courses.set(course<span class="selector-class">.courseId</span>, course)</span><br></pre></td></tr></table></figure><h4 id="加入模拟的笔记数据"><a href="#加入模拟的笔记数据" class="headerlink" title="加入模拟的笔记数据"></a>加入模拟的笔记数据</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">var course = courses[<span class="string">"android_intent"</span>]!!</span><br><span class="line">    var<span class="built_in"> note </span>= NoteInfo(course, <span class="string">"我是Intent笔记"</span>,</span><br><span class="line">            <span class="string">"Intent里面可以传值，通过这种方式和其他页面交互"</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br><span class="line">   <span class="built_in"> note </span>= NoteInfo(course, <span class="string">"Intent 的方式"</span>,</span><br><span class="line">            <span class="string">"除了普通的Intent，还有PendingIntents"</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br><span class="line"></span><br><span class="line">    course = courses[<span class="string">"android_async"</span>]!!</span><br><span class="line">   <span class="built_in"> note </span>= NoteInfo(course, <span class="string">"Service 的使用"</span>,</span><br><span class="line">            <span class="string">"Service 主要是运行在哪个线程？"</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br><span class="line">   <span class="built_in"> note </span>= NoteInfo(course, <span class="string">"Service 的类型"</span>,</span><br><span class="line">            <span class="string">"前台Service和后台Service"</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br><span class="line"></span><br><span class="line">    course = courses[<span class="string">"java_lang"</span>]!!</span><br><span class="line">   <span class="built_in"> note </span>= NoteInfo(course, <span class="string">"集合"</span>,</span><br><span class="line">            <span class="string">"List，Array，Map等"</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br><span class="line">   <span class="built_in"> note </span>= NoteInfo(course, <span class="string">"面向对象"</span>,</span><br><span class="line">            <span class="string">"是不是这样我们就不怕找不到对象了？"</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br><span class="line"></span><br><span class="line">    course = courses[<span class="string">"java_core"</span>]!!</span><br><span class="line">   <span class="built_in"> note </span>= NoteInfo(course, <span class="string">"编译选项"</span>,</span><br><span class="line">            <span class="string">"-jar 不兼容 -cp 命令"</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br><span class="line">   <span class="built_in"> note </span>= NoteInfo(course, <span class="string">"序列化"</span>,</span><br><span class="line">            <span class="string">"记得包含 SerialVersionUID "</span>)</span><br><span class="line">    notes.<span class="builtin-name">add</span>(note)</span><br></pre></td></tr></table></figure><h4 id="DataManager完整代码"><a href="#DataManager完整代码" class="headerlink" title="DataManager完整代码"></a>DataManager完整代码</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">package com.blue.notekeeper</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   author : BlueLzy</span></span><br><span class="line"><span class="comment"> *   e-mail : bluehobert@gmail.com</span></span><br><span class="line"><span class="comment"> *   date   : 2018/10/20 10:00</span></span><br><span class="line"><span class="comment"> *   desc   : Manage the data</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">object DataManager &#123;</span><br><span class="line">    val courses = HashMap&lt;String, CourseInfo&gt;()   <span class="comment">// use courseId to find CourseInfo class</span></span><br><span class="line">    val <span class="keyword">notes</span> = ArrayList&lt;NoteInfo&gt;()   <span class="comment">// Arraylist for NoteInfo</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数，进行私有属性的初始化，通常是代码块</span></span><br><span class="line">    init &#123;</span><br><span class="line">        initializeCourses()</span><br><span class="line">        initializeNotes()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 私有的初始化方法</span></span><br><span class="line">    private fun initializeCourses() &#123;</span><br><span class="line">        <span class="keyword">var</span> course = CourseInfo(<span class="string">"android_intent"</span>, <span class="string">"使用Intent进行Activity跳转"</span>)</span><br><span class="line">        courses.<span class="keyword">set</span>(course.courseId,course)</span><br><span class="line"></span><br><span class="line">         <span class="comment">// 指定参数名</span></span><br><span class="line">        course = CourseInfo(courseId = <span class="string">"android_async"</span>, title = <span class="string">"Android中的异步编程"</span>)</span><br><span class="line">        courses.<span class="keyword">set</span>(course.courseId, course)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// title 作为第一个参数</span></span><br><span class="line">        course = CourseInfo(title = <span class="string">"Java 基础"</span>, courseId = <span class="string">"java_lang"</span>)</span><br><span class="line">        courses.<span class="keyword">set</span>(course.courseId, course)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不指定参数名</span></span><br><span class="line">        course = CourseInfo(<span class="string">"java_core"</span>, <span class="string">"Java 核心编程"</span>)</span><br><span class="line">        courses.<span class="keyword">set</span>(course.courseId, course)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化Notes数据</span></span><br><span class="line">    private fun initializeNotes()&#123;</span><br><span class="line">        <span class="keyword">var</span> course = courses[<span class="string">"android_intent"</span>]!!</span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">note</span> = NoteInfo(course, <span class="string">"我是Intent笔记"</span>,</span><br><span class="line">                <span class="string">"Intent里面可以传值，通过这种方式和其他页面交互"</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line">        <span class="keyword">note</span> = NoteInfo(course, <span class="string">"Intent 的方式"</span>,</span><br><span class="line">                <span class="string">"除了普通的Intent，还有PendingIntents"</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line"></span><br><span class="line">        course = courses[<span class="string">"android_async"</span>]!!</span><br><span class="line">        <span class="keyword">note</span> = NoteInfo(course, <span class="string">"Service 的使用"</span>,</span><br><span class="line">                <span class="string">"Service 主要是运行在哪个线程？"</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line">        <span class="keyword">note</span> = NoteInfo(course, <span class="string">"Service 的类型"</span>,</span><br><span class="line">                <span class="string">"前台Service和后台Service"</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line"></span><br><span class="line">        course = courses[<span class="string">"java_lang"</span>]!!</span><br><span class="line">        <span class="keyword">note</span> = NoteInfo(course, <span class="string">"集合"</span>,</span><br><span class="line">                <span class="string">"List，Array，Map等"</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line">        <span class="keyword">note</span> = NoteInfo(course, <span class="string">"面向对象"</span>,</span><br><span class="line">                <span class="string">"是不是这样我们就不怕找不到对象了？"</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line"></span><br><span class="line">        course = courses[<span class="string">"java_core"</span>]!!</span><br><span class="line">        <span class="keyword">note</span> = NoteInfo(course, <span class="string">"编译选项"</span>,</span><br><span class="line">                <span class="string">"-jar 不兼容 -cp 命令"</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line">        <span class="keyword">note</span> = NoteInfo(course, <span class="string">"序列化"</span>,</span><br><span class="line">                <span class="string">"记得包含 SerialVersionUID "</span>)</span><br><span class="line">        <span class="keyword">notes</span>.add(<span class="keyword">note</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数据展示页-NoteListActivity"><a href="#数据展示页-NoteListActivity" class="headerlink" title="数据展示页-NoteListActivity"></a>数据展示页-NoteListActivity</h2><p>在完成了所需要的实体类和模拟数据之后，我们终于可以进入到界面的编写阶段了，首先创建<code>NoteListActivity</code></p><p>我们通过这种方式来创建：</p><p><img src="http://www.wailian.work/images/2018/10/21/Snip20181021_16.png" alt="Snip20181021_16.png"></p><p>然后选择 <code>Empty Activity</code> 就可以了，Android Studio会自动帮我们生成</p><ul><li>继承自CompatActivity的NoteListActivity文件</li><li>activity_note_list.xml文件</li></ul><p>OK，让我们进入activity_note_list.xml，把代码改成：</p><blockquote><p>activity_note_list.xml</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".NoteListActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme.AppBarOverlay"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:popupTheme</span>=<span class="string">"@style/AppTheme.PopupOverlay"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">layout</span>=<span class="string">"@layout/content_note_list"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/fab"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"bottom|end"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">"@dimen/fab_margin"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:srcCompat</span>=<span class="string">"@drawable/ic_add_white_24dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后再创建一个名为: <code>content_note_list</code>的xml文件，代码为：</p><blockquote><p>content_note_list.xml</p></blockquote><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml <span class="keyword">version</span>=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;android.support.<span class="keyword">constraint</span>.ConstraintLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:<span class="keyword">app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="keyword">app</span>:layout_behavior=<span class="string">"@string/appbar_scrolling_view_behavior"</span></span><br><span class="line">    tools:context=<span class="string">".MainActivity"</span></span><br><span class="line">    tools:showIn=<span class="string">"@layout/activity_main"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Spinner</span><br><span class="line">        android:id=<span class="string">"@+id/spinner"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_marginStart=<span class="string">"32dp"</span></span><br><span class="line">        android:layout_marginTop=<span class="string">"16dp"</span></span><br><span class="line">        android:layout_marginEnd=<span class="string">"32dp"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toTopOf=<span class="string">"parent"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/textNoteTitle"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_marginTop=<span class="string">"8dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/note_title_hint"</span></span><br><span class="line">        android:inputType=<span class="string">"textMultiLine"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintEnd_toEndOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">"@+id/spinner"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/textNoteText"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_marginTop=<span class="string">"8dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/note_text_hint"</span></span><br><span class="line">        android:inputType=<span class="string">"textMultiLine"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintEnd_toEndOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintHorizontal_bias=<span class="string">"0.0"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">"@+id/textNoteTitle"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/android.support.<span class="keyword">constraint</span>.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure><p>然后，编写<code>NoteListActivity</code>的代码</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoteListActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_note_list)</span><br><span class="line">        setSupportActionBar(toolbar)</span><br><span class="line"></span><br><span class="line">        listNotes.adapter = ArrayAdapter(<span class="keyword">this</span>, android.R.layout.simple_list_item_1,</span><br><span class="line">                DataManager.notes)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后，修改我们的AndroidMainfest.xml文件，让NoteListActivity成为启动项</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:name</span>=<span class="string">".MainActivity"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:label</span>=<span class="string">"@string/edit_note"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme.NoActionBar"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:name</span>=<span class="string">".NoteListActivity"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme.NoActionBar"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><p>一切就绪，此时运行App，看到的效果应该是这样的：</p><p><img src="http://www.wailian.work/images/2018/10/21/Snip20181021_17.png" alt="Snip20181021_17.png"></p><p>只有一个ListView用于展示模拟数据，FAB和Item都没有点击效果，接下来我们要往里面加入其它功能了。</p><h2 id="新建笔记"><a href="#新建笔记" class="headerlink" title="新建笔记"></a>新建笔记</h2><h4 id="修改NoteListActivity"><a href="#修改NoteListActivity" class="headerlink" title="修改NoteListActivity"></a>修改NoteListActivity</h4><p>在<code>NoteListActivity</code>加入FAB和Item的点击事件，跳转到<code>MainActivity</code>  在<code>onCreate</code>方法加上：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fab.setOnClickListener &#123; view -&gt;</span><br><span class="line">         <span class="keyword">val</span> activityIntent = Intent(<span class="keyword">this</span>, MainActivity::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line">          startActivity(activityIntent)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">      listNotes.setOnItemClickListener&#123; parent, view, position, id -&gt;</span><br><span class="line">          <span class="keyword">val</span> activityIntent = Intent(<span class="keyword">this</span>, MainActivity::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line">          activityIntent.putExtra(NOTE_POSITIONI, position)</span><br><span class="line">          startActivity(activityIntent)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h4 id="创建名为Constants的Kotlin-File"><a href="#创建名为Constants的Kotlin-File" class="headerlink" title="创建名为Constants的Kotlin File"></a>创建名为<code>Constants</code>的Kotlin File</h4><p><code>NOTE_POSITIONI</code> 和 <code>POSITION_NOT_SET</code> 是无关界面的常量，因此我们需要创建一个文件来保存，这样可以方便管理，代码的结构也会比较清晰。</p><p>加入以下代码：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> val NOTE_POSITIONI = <span class="string">"NOTE_POSITIONI"</span></span><br><span class="line"><span class="keyword">const</span> val POSITION_NOT_SET = <span class="number">-1</span></span><br></pre></td></tr></table></figure><p>到目前为止，数据列表页的工作就完成了，接下来就是跳转后的编辑页面的工作</p><h4 id="修改MainActivity"><a href="#修改MainActivity" class="headerlink" title="修改MainActivity"></a>修改MainActivity</h4><p>我们现在回到MainActivity，把MainActivity当成是新建和编辑笔记的页面。首先修改布局文件<code>activity_main.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme.AppBarOverlay"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:popupTheme</span>=<span class="string">"@style/AppTheme.PopupOverlay"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">layout</span>=<span class="string">"@layout/content_main"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后修改<code>content_main</code></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml <span class="keyword">version</span>=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;android.support.<span class="keyword">constraint</span>.ConstraintLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:<span class="keyword">app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="keyword">app</span>:layout_behavior=<span class="string">"@string/appbar_scrolling_view_behavior"</span></span><br><span class="line">    tools:context=<span class="string">".MainActivity"</span></span><br><span class="line">    tools:showIn=<span class="string">"@layout/activity_main"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Spinner</span><br><span class="line">        android:id=<span class="string">"@+id/spinner"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_marginStart=<span class="string">"32dp"</span></span><br><span class="line">        android:layout_marginTop=<span class="string">"16dp"</span></span><br><span class="line">        android:layout_marginEnd=<span class="string">"32dp"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toTopOf=<span class="string">"parent"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/textNoteTitle"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_marginTop=<span class="string">"8dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/note_title_hint"</span></span><br><span class="line">        android:inputType=<span class="string">"textMultiLine"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintEnd_toEndOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">"@+id/spinner"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/textNoteText"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_marginTop=<span class="string">"8dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/note_text_hint"</span></span><br><span class="line">        android:inputType=<span class="string">"textMultiLine"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintEnd_toEndOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintHorizontal_bias=<span class="string">"0.0"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">"@+id/spinner"</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">"@+id/textNoteTitle"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/android.support.<span class="keyword">constraint</span>.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure><p>由于布局不是我们的重点，所以在这里编写和调整的过程就先忽略，大家只要能看懂大概是什么意思就可以了</p><p>OK，回到<code>MainActivity</code></p><p>我们需要处理几个事情：</p><ol><li>判断进来的是新笔记还是旧笔记</li><li>新笔记不用处理</li><li>旧笔记需要把数据放到对应的位置</li></ol><p>代码如下：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> notePosition = POSITION_NOT_SET  <span class="comment">// 定义变量记录当前位置</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line">        setSupportActionBar(toolbar)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> coursesAdapter = ArrayAdapter&lt;CourseInfo&gt;(<span class="keyword">this</span>,</span><br><span class="line">                android.R.layout.simple_spinner_item,</span><br><span class="line">                DataManager.courses.values.toList())</span><br><span class="line">        coursesAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)</span><br><span class="line"></span><br><span class="line">        spinner.adapter = coursesAdapter</span><br><span class="line"></span><br><span class="line">        notePosition = savedInstanceState?.getInt(NOTE_POSITIONI, POSITION_NOT_SET) ?:</span><br><span class="line">                intent.getIntExtra(NOTE_POSITIONI, POSITION_NOT_SET)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断是否点击进来的Item，是的话填充数据</span></span><br><span class="line">        <span class="keyword">if</span> (notePosition != POSITION_NOT_SET)</span><br><span class="line">            displayNote()</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            DataManager.notes.add(NoteInfo())</span><br><span class="line">            notePosition = DataManager.notes.lastIndex</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSaveInstanceState</span><span class="params">(outState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onSaveInstanceState(outState)</span><br><span class="line">        outState?.putInt(NOTE_POSITIONI, notePosition)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">displayNote</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// 设置 textView 填充内容</span></span><br><span class="line">        <span class="keyword">val</span> note = DataManager.notes[notePosition]</span><br><span class="line">        textNoteTitle.setText(note.title)</span><br><span class="line">        textNoteText.setText(note.text)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置 spinner</span></span><br><span class="line">        <span class="keyword">val</span> coursePosition = DataManager.courses.values.indexOf(note.course)</span><br><span class="line">        spinner.setSelection(coursePosition)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPause</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onPause()</span><br><span class="line">        saveNote()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">saveNote</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> note = DataManager.notes[notePosition]</span><br><span class="line">        note.title = textNoteTitle.text.toString()</span><br><span class="line">        note.text = textNoteText.text.toString()</span><br><span class="line">        note.course = spinner.selectedItem <span class="keyword">as</span> CourseInfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们除了处理新建/编辑笔记两种情况，还做了一点特殊处理</p><ul><li>通过onPause()保存数据</li><li>通过onSaveInstanceState()保存状态</li></ul><p>OK，这个时候再运行一下App，效果应该是：</p><ul><li>进入App通过列表形式展示模拟数据</li><li>点击FAB进入一个新的页面，填入数据后返回，在列表页可以看到新增笔记</li><li>点击列表中的任意一项，进入编辑页面，笔记数据在对应位置展示出来</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>其实到这里我们就已经完成了大部分的功能了，明天我们主要的任务就是在ActionBar上加入一个Next按钮，可以查看下一条笔记，这个功能有利于提高用户体验，这种交互也是Android官方所提倡的，通过按钮或者手势来进行交互。</p><p>Day  12 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第十二天&lt;/p&gt;
&lt;p&gt;今天主要是Koltin编写代码，进行功能实现&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="kotlin" scheme="https://www.bluelzy.com/tags/kotlin/"/>
    
      <category term="App开发" scheme="https://www.bluelzy.com/tags/App%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D11)-第一个App之项目介绍</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day11.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day11.html</id>
    <published>2018-10-20T01:37:11.000Z</published>
    <updated>2018-10-21T08:56:04.842Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第十一天</p><p>接下来这三天，我们会用Kotlin编写一个记事本App</p><p>今天主要是项目介绍</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day7.html">Kotlin学习之旅(D7)-Kotlin Idioms part 2</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day8.html">Kotlin学习之旅(D8)-From Java to Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day9.html">Kotlin学习之旅(D9)-Android Extensions</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day10.html">Kotlin学习之旅(D10)- Unit Test with Kotlin</a></p><h2 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h2><p>我们接下来要做的App是一个简单的笔记类app</p><p>老规矩，先上图：</p><p><img src="http://www.wailian.work/images/2018/10/21/Oct-21-201810-31-50.gif" alt="Oct-21-201810-31-50.md.gif"></p><p>主要的功能：</p><ul><li>查看已有的笔记</li><li>添加新的笔记</li><li>编辑已有的笔记</li><li>能够通过Action Bar查看下一条笔记</li></ul><p>暂时没有完成的功能点：</p><ul><li>缓存添加的笔记（目前退出App后数据会被清空，由于需要使用ORM，而且和Kotlin无关，所以这里暂时舍弃了）</li><li>删除已有的笔记（理由同上）</li></ul><p>通过这个App学习到的技能包括：</p><ul><li><p>通过Intent进行Activity跳转</p></li><li><p>Intent中传递参数</p></li><li><p>Action Bar 和 Menu的使用</p></li><li><p>CoordinatorLayout</p></li><li><p>onSaveInstanceState保存状态</p></li></ul><ul><li>Kotlin 基础语法和特性</li></ul><h2 id="分解需求"><a href="#分解需求" class="headerlink" title="分解需求"></a>分解需求</h2><h3 id="查看已有的笔记"><a href="#查看已有的笔记" class="headerlink" title="查看已有的笔记"></a>查看已有的笔记</h3><p>首先我们在App里面加入一些假数据，然后通过ListView进行展示，这里选择ListView的原因很简单，就是因为简单。我们不需要额外的元素，也不需要复杂的布局，有兴趣的童鞋可以改成用RecyclerView来进行展示。</p><p>那么这个功能我们就需要用到：</p><ul><li>ListView  </li></ul><h3 id="编辑已有的笔记"><a href="#编辑已有的笔记" class="headerlink" title="编辑已有的笔记"></a>编辑已有的笔记</h3><p>首先通过ListView进行展示，点击每一条笔记的时候，我们跳转到详情页，也就是编辑页面，把对应的课题，笔记都显示到EditText中，然后可以进行编辑和保存</p><p>那么这个功能需要用到：</p><ul><li>setOnItemClickListener   -&gt; 监听点击的item</li><li>startActivity   -&gt; 跳转到编辑页面</li><li>intent.putIntExtra()   -&gt; 把点击的位置传给编辑页面，从而获取对应的笔记内容</li></ul><h3 id="添加新的笔记"><a href="#添加新的笔记" class="headerlink" title="添加新的笔记"></a>添加新的笔记</h3><p>如果大家有留意上面的Gif图，可以看到在主界面的右下角，有一个FAB，也就是FloatingActionButton ，我们新建笔记的功能可以通过这个按钮来完成</p><p>这个功能需要用到：</p><ul><li>startActivity -&gt; 复用编辑页面</li><li>vector drawable -&gt; 修改FAB的icon</li></ul><h3 id="通过Action-Bar查看下一条笔记"><a href="#通过Action-Bar查看下一条笔记" class="headerlink" title="通过Action Bar查看下一条笔记"></a>通过Action Bar查看下一条笔记</h3><p>从主界面跳转到编辑页面以后，如果我们想要看其他的笔记，只能返回然后再点击对应的，这样的交互对用户来说不太友好，因此我在Action Bar加了一个Next的按钮，用于查看下一条笔记</p><p>这个功能需要用到：</p><ul><li>ActionBar 的Menu </li><li>vector drawable</li></ul><h3 id="未完成的功能"><a href="#未完成的功能" class="headerlink" title="未完成的功能"></a>未完成的功能</h3><h4 id="缓存笔记-amp-删除笔记"><a href="#缓存笔记-amp-删除笔记" class="headerlink" title="缓存笔记 &amp; 删除笔记"></a>缓存笔记 &amp; 删除笔记</h4><p>大家可以使用Android官方推荐的Room作为ORM，我在之前的项目中使用过，觉得还是挺方便的</p><ul><li><a href="https://developer.android.com/training/data-storage/room/" target="_blank" rel="noopener">Android Developers For Room</a></li><li><a href="https://www.bluelzy.com/articles/android_room_overview.html">Android Room概述</a></li></ul><p>当然使用其他ORM也是可以滴~</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这个App比较简单，但是由于我的个人时间也不是很多，每天下班回到家，吃完晚饭都是8点以后了，除了完成代码编写还要写成文章进行总结，所以只能分开3天来完成。希望大家谅解~</p><p>接下来的两天就是代码编写的时间了~加油</p><p>Day  11 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第十一天&lt;/p&gt;
&lt;p&gt;接下来这三天，我们会用Kotlin编写一个记事本App&lt;/p&gt;
&lt;p&gt;今天主要是项目介绍&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="kotlin" scheme="https://www.bluelzy.com/tags/kotlin/"/>
    
      <category term="App开发" scheme="https://www.bluelzy.com/tags/App%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D10)- Unit Test with Kotlin</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day10.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day10.html</id>
    <published>2018-10-18T12:33:12.000Z</published>
    <updated>2018-10-18T15:54:44.700Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第十天</p><p>今天的主题是 - - Unit Test with Kotlin</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day7.html">Kotlin学习之旅(D7)-Kotlin Idioms part 2</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day8.html">Kotlin学习之旅(D8)-From Java to Kotlin</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day9.html">Kotlin学习之旅(D9)-Android Extensions</a></p><h2 id="添加JUnit依赖"><a href="#添加JUnit依赖" class="headerlink" title="添加JUnit依赖"></a>添加JUnit依赖</h2><p>Kotlin里面的Unit Test 和 java里面大同小异，因此我们直接上手写一个测试就能掌握了。</p><p>说到Unit Test，就不得不提一下<code>JUnit</code>了，这是一个第三方库，用途就是跑测试用例。因此天才第一步，我们需要在build.gradle里面添加依赖</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    ...</span><br><span class="line">     testImplementation <span class="string">"junit:junit:4.12"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>记得依赖方式是testImplementation，这样在打正式包的时候这个依赖被不会编译，可以减少APK的体积</p><p>实际上，在我们新建一个Android项目的时候，Android Studio会自动帮我们生成三个文件夹，分别是</p><ul><li>code</li><li>test</li><li>androidTest</li></ul><p>test 和 androidTest 文件夹就是我们编写Unit Test的地方</p><p><img src="http://www.wailian.work/images/2018/10/18/Snip20181018_3.png" alt="Snip20181018_3.png"></p><h3 id="Unit-Test-例子"><a href="#Unit-Test-例子" class="headerlink" title="Unit Test 例子"></a>Unit Test 例子</h3><p>让我们在 test 文件夹下创建一个名为MyTest的文件：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">proof_of_concept</span><span class="params">()</span></span> &#123;</span><br><span class="line">        assertEquals(<span class="number">4</span> , <span class="number">2</span> + <span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个时候看到左边有个绿色的箭头，点一下就能运行Unit Test</p><p>运行结果如下：</p><p><img src="" alt=""><img src="http://www.wailian.work/images/2018/10/18/Snip20181018_4.png" alt="Snip20181018_3.png"></p><p>可以看到我们写的这个Unit Test通过了，这就是一个最简单的例子，那么代码里面写的每一句是什么意思呢？</p><ul><li>@Test - 这个注解表示接下来的方法是一个Unit Test 方法，通过上面的import信息也能看出来，这个注解是属于JUnit的</li><li>assertEquals(4, 2+2) - 这行代码表示 判断 4 是否等于 2+2，assertEquals方法同样也是JUnit里面的方法</li></ul><p>所以这段代码的执行结果很明显是相等的，因此测试通过。</p><p>除了assertEquals，JUnit还提供了其他许多的判断方法</p><p><img src="http://www.wailian.work/images/2018/10/18/Snip20181018_5.png" alt="Snip20181018_3.png"></p><p>关于JUnit的一切详情都可以从这里找到：<a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions" target="_blank" rel="noopener">JUnit 5 User Guide</a></p><p>另外推荐一个学习JUnit的网站：<a href="http://wiki.jikexueyuan.com/project/junit/test-framework.html" target="_blank" rel="noopener">极客学院JUnit测试框架</a></p><h2 id="Unit-Test-in-Android"><a href="#Unit-Test-in-Android" class="headerlink" title="Unit Test in Android"></a>Unit Test in Android</h2><p>经过简单的介绍，我们已经知道了什么是Unit Test，如果还不太清楚的话，可以看一下以下几篇文章：</p><p>首先是关于TDD （Test-driven development）- 测试驱动开发</p><p>简单介绍就是：先写测试程序，然后编码实现功能，使得测试程序能够顺利运行的一种开发方法。</p><ol><li><a href="https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91" target="_blank" rel="noopener">测试驱动开发-维基百科</a></li><li><a href="https://www.ibm.com/developerworks/cn/linux/l-tdd/index.html" target="_blank" rel="noopener">浅谈测试驱动开发（TDD）</a></li><li><a href="https://news.codecademy.com/test-driven-development/" target="_blank" rel="noopener">Why Use Test-Driven Development?</a></li></ol><p>然后是关于Unit Testing的：</p><ol><li><a href="https://en.wikipedia.org/wiki/Unit_testing" target="_blank" rel="noopener">Unit testing - Wikipedia</a></li><li><a href="http://softwaretestingfundamentals.com/unit-testing/" target="_blank" rel="noopener">Unit Testing - Fundamentals</a></li></ol><p>虽然在实际开发过程中，我们很少会使用TDD的方式进行项目开发，但是编写Unit Test还是有它的好处的，因此在Android开发里面，我们也需要掌握这项技能。 Let’s do it.</p><p>在Android里面进行测试，经常需要用到另外一个依赖库，叫做Mockito，那么下面我们就使用这个库来做个最简单的Unit Test</p><h3 id="为什么要用Mockito"><a href="#为什么要用Mockito" class="headerlink" title="为什么要用Mockito"></a>为什么要用Mockito</h3><p>在JUnit中，我们可以验证有返回值方法是否正确，但是如果一个方法的返回值为void，也就是没有返回值，特别是这个方法是为了调用另外一个方法，那么这个时候就需要验证这个方法有没有被调用。我们就可以通过Mockito这个框架来验证。</p><h3 id="怎么使用Mockito"><a href="#怎么使用Mockito" class="headerlink" title="怎么使用Mockito"></a>怎么使用Mockito</h3><p>在build.gradle文件中加入：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">testImplementation</span> "<span class="selector-tag">org</span><span class="selector-class">.mockito</span><span class="selector-pseudo">:mockito-core</span><span class="selector-pseudo">:2.18.3"</span></span><br></pre></td></tr></table></figure><p>在我们在MyTest文件中加入以下代码：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">mockito_test</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> mockedList = mock(mutableListOf&lt;String&gt;().javaClass)</span><br><span class="line">    <span class="comment">//using mock object</span></span><br><span class="line">    mockedList.add(<span class="string">"one"</span>)</span><br><span class="line">    mockedList.clear()</span><br><span class="line">    <span class="comment">//verification</span></span><br><span class="line">    verify(mockedList).add(<span class="string">"one"</span>)</span><br><span class="line">    verify(mockedList).clear()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果如下：</p><p><img src="http://www.wailian.work/images/2018/10/18/Snip20181018_6.png" alt="Snip20181018_6.png"></p><p>这个例子是不是特别简单，它来自Mockito的官方，其实学习这些第三方框架，最好的教程就是他们的官方文档，因此这里我把几个不错的学习Mockito的资源列一下：</p><ol><li><a href="https://site.mockito.org/" target="_blank" rel="noopener">Mockito 官网</a></li><li><a href="https://github.com/mockito/mockito" target="_blank" rel="noopener">Mockito Github 地址</a></li><li><a href="https://github.com/nhaarman/mockito-kotlin/wiki/Mocking-and-verifying" target="_blank" rel="noopener">Mocking-and-verifying</a></li><li><a href="http://www.vogella.com/tutorials/Mockito/article.html" target="_blank" rel="noopener">Unit tests with Mockito - Tutorial</a></li></ol><p>上面这个例子首先通过mock()创建List类，然后在mockedList中添加元素one，最后通过verify来验证mockedList有没有成功调用List里面的对应方法。我们一个个来看：</p><h4 id="验证方法调用"><a href="#验证方法调用" class="headerlink" title="验证方法调用"></a>验证方法调用</h4><p>通过<code>verify</code> 来验证方法是否被调用，例如：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">mockedList</span><span class="selector-class">.add</span>(<span class="string">"once"</span>)</span><br><span class="line"><span class="selector-tag">mockedList</span><span class="selector-class">.add</span>(<span class="string">"twice"</span>)</span><br><span class="line"><span class="selector-tag">mockedList</span><span class="selector-class">.add</span>(<span class="string">"twice"</span>)</span><br><span class="line"><span class="selector-tag">mockedList</span><span class="selector-class">.add</span>(<span class="string">"three times"</span>)</span><br><span class="line"><span class="selector-tag">mockedList</span><span class="selector-class">.add</span>(<span class="string">"three times"</span>)</span><br><span class="line"><span class="selector-tag">mockedList</span><span class="selector-class">.add</span>(<span class="string">"three times"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//following two verifications work exactly the same - times(1) is used by default</span></span><br><span class="line"><span class="selector-tag">verify</span>(mockedList)<span class="selector-class">.add</span>(<span class="string">"once"</span>);</span><br><span class="line"><span class="selector-tag">verify</span>(mockedList, times(<span class="number">1</span>))<span class="selector-class">.add</span>(<span class="string">"once"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//exact number of invocations verification</span></span><br><span class="line"><span class="selector-tag">verify</span>(mockedList, times(<span class="number">2</span>))<span class="selector-class">.add</span>(<span class="string">"twice"</span>)</span><br><span class="line"><span class="selector-tag">verify</span>(mockedList, times(<span class="number">3</span>))<span class="selector-class">.add</span>(<span class="string">"three times"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//verification using never(). never() is an alias to times(0)</span></span><br><span class="line"><span class="selector-tag">verify</span>(mockedList, never())<span class="selector-class">.add</span>(<span class="string">"never happened"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//verification using atLeast()/atMost()</span></span><br><span class="line"><span class="selector-tag">verify</span>(mockedList, atLeastOnce())<span class="selector-class">.add</span>(<span class="string">"three times"</span>)</span><br><span class="line"><span class="selector-tag">verify</span>(mockedList, atLeast(<span class="number">2</span>))<span class="selector-class">.add</span>(<span class="string">"three times"</span>)</span><br><span class="line"><span class="selector-tag">verify</span>(mockedList, atMost(<span class="number">5</span>))<span class="selector-class">.add</span>(<span class="string">"three times"</span>)</span><br></pre></td></tr></table></figure><p>在<code>verify</code> 方法中，我们可以指定方法调用的次数，通过<code>times(1)</code> 的形式，大家有兴趣的话可以跑一下上面的代码，看一下测试能不能通过。</p><h4 id="stubbing指定方法的实现"><a href="#stubbing指定方法的实现" class="headerlink" title="stubbing指定方法的实现"></a>stubbing指定方法的实现</h4><p>除了空方法，我们有时候还需要检验方法的返回值或者实现。这个时候就需要用到<code>when</code>方法</p><p>看一个例子：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//You can mock concrete classes, not just interfaces</span></span><br><span class="line">     <span class="keyword">val</span> mockedList = mock(LinkedList::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//stubbing</span></span><br><span class="line">     `<span class="keyword">when</span>`(mockedList.<span class="keyword">get</span>(<span class="number">0</span>)).thenReturn(<span class="string">"first"</span>)</span><br><span class="line">     `<span class="keyword">when</span>`(mockedList.<span class="keyword">get</span>(<span class="number">1</span>)).thenThrow(RuntimeException())</span><br><span class="line"></span><br><span class="line">     <span class="comment">//following prints "first"</span></span><br><span class="line">     System.<span class="keyword">out</span>.println(mockedList.<span class="keyword">get</span>(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">     <span class="comment">//following throws runtime exception</span></span><br><span class="line">     System.<span class="keyword">out</span>.println(mockedList.<span class="keyword">get</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">     <span class="comment">//following prints "null" because get(999) was not stubbed</span></span><br><span class="line">     System.<span class="keyword">out</span>.println(mockedList.<span class="keyword">get</span>(<span class="number">999</span>))</span><br><span class="line"></span><br><span class="line">     <span class="comment">//Although it is possible to verify a stubbed invocation, usually it's just redundant</span></span><br><span class="line">     <span class="comment">//If your code cares what get(0) returns, then something else breaks (often even before verify() gets executed).</span></span><br><span class="line">     <span class="comment">//If your code doesn't care what get(0) returns, then it should not be stubbed. Not convinced? See here.</span></span><br><span class="line">     verify(mockedList).<span class="keyword">get</span>(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>这个例子的运行结果是：</p><p><img src="http://www.wailian.work/images/2018/10/18/Snip20181018_7.png" alt="Snip20181018_7.png"></p><p>为什么会失败呢？ 因为有这么一行代码</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`when`(mockedList.get(<span class="number">1</span>)).thenThrow(RuntimeException())</span><br></pre></td></tr></table></figure><p>当mockedList.get(1)的时候，我们让他抛出异常，因此运行的结果就是我们写的RuntimeException。</p><p>所以<code>when</code> 方法是不是很有用呢，有点像if..else 和 switch…case 的体系，可以通过不同的参数来控制测试方法对应的结果。</p><p>除了方法的运行结果可以控制以外，我们还可以测试方法的参数</p><h4 id="参数匹配"><a href="#参数匹配" class="headerlink" title="参数匹配"></a>参数匹配</h4><p>例子：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">val mockedList = mock(LinkedList::class.java)</span><br><span class="line"><span class="comment">//stubbing using built-in anyInt() argument matcher</span></span><br><span class="line">`when`(mockedList[anyInt()]).thenReturn(<span class="string">"element"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//following prints "element"</span></span><br><span class="line">System<span class="selector-class">.out</span><span class="selector-class">.println</span>(mockedList[<span class="number">999</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">//you can also verify using an argument matcher</span></span><br><span class="line"><span class="function"><span class="title">verify</span><span class="params">(mockedList)</span></span>[anyInt()]</span><br></pre></td></tr></table></figure><p>这个例子的运行结果是pass，因为我们需要的参数是anyInt()，<code>verify</code>的时候参数也是anyInt()。</p><p>注意：当你使用参数匹配的时候，所有的参数都必须是可匹配的，什么意思呢？看例子：</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">verify(mock).someMethod(anyInt(), anyString(), e<span class="string">q("third argument")</span>);</span><br><span class="line">//above is correct - e<span class="string">q()</span> is also an argument matcher</span><br><span class="line"></span><br><span class="line">verify(mock).someMethod(anyInt(), anyString(), <span class="string">"third argument"</span>);</span><br><span class="line">//above is incorrect - exception will be thrown because third argument is <span class="keyword">given</span> without an argument matcher.</span><br></pre></td></tr></table></figure><p>第一行代码是正确的，因为eq()也是一种匹配模式，但是第二行代码直接传入一个String就不是匹配模式，在这里会抛出异常。</p><p>最后，由于Mockito的功能十分强大，因此在这里我也只是简单介绍一些常见的用法，对Mockito有一个初步的认识，其他的在需要的时候再去官方文档学习就可以了。</p><p>Mockito官方文档：<a href="http://static.javadoc.io/org.mockito/mockito-core/2.9.0/org/mockito/Mockito.html" target="_blank" rel="noopener">Mockito Docs</a></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>除了这篇文章里面说到的JUnit，Mockito这两个框架，我们还有可能需要用到一个叫做<code>Robolectric</code> 的框架，这个框架是用来测试运行在JVM上的Android代码的，不过由于暂时我们还接触不到，所以这里就不讲了，在后面进行项目实战的时候如果有需要，我们再去学习~</p><p>到目前为止，使用Kotlin开发Android项目所需要的基本知识都已经学完了，那么接下来就是实战阶段！加油！</p><p>Day  10 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第十天&lt;/p&gt;
&lt;p&gt;今天的主题是 - - Unit Test with Kotlin&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D9)-Android Extensions</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day9.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day9.html</id>
    <published>2018-10-17T14:29:42.000Z</published>
    <updated>2018-10-17T15:27:50.898Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第九天</p><p>今天的主题是 - -Android Extensions</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day7.html">Kotlin学习之旅(D7)-Kotlin Idioms part 2</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day8.html">Kotlin学习之旅(D8)-From Java to Kotlin</a></p><h2 id="Android-Extensions-是什么"><a href="#Android-Extensions-是什么" class="headerlink" title="Android Extensions 是什么"></a>Android Extensions 是什么</h2><p>Kotlin Android Extensions 是 Kotlin 团队开发的一个插件，目的是让我们在开发过程中可以减少代码的编写量。主要的功能就是：视图绑定</p><p>在Java中，我们经常要写的一句代码就是 <code>findViewById()</code>，但是在一个Layou有许多View存在的情况下，重复写这句代码不仅工作量大，而且可读性差，因此各路大神发挥智慧，推出了许多的第三方库，其中最著名的就是<code>ButterKnife</code>了 ，但是使用ButterKnife有个不好的地方，就是需要定义成员变量，代码量和原生的方式差不多。</p><p>现在 Kotlin Android Extensions 能够提供与这些开源库功能相同的体验，并且不需要添加任何额外代码。</p><h2 id="Android-Extensions-怎么用"><a href="#Android-Extensions-怎么用" class="headerlink" title="Android Extensions 怎么用"></a>Android Extensions 怎么用</h2><h4 id="1-在Moudle中的build-gradle文件添加插件配置"><a href="#1-在Moudle中的build-gradle文件添加插件配置" class="headerlink" title="1.在Moudle中的build.gradle文件添加插件配置"></a>1.在Moudle中的build.gradle文件添加插件配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;kotlin-android-extensions&apos;</span><br></pre></td></tr></table></figure><h4 id="2-在View中引入资源文件"><a href="#2-在View中引入资源文件" class="headerlink" title="2. 在View中引入资源文件"></a>2. 在View中引入资源文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import kotlinx.android.synthetic.main.activity_main.*</span><br></pre></td></tr></table></figure><h4 id="3-访问id"><a href="#3-访问id" class="headerlink" title="3.访问id"></a>3.访问id</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">kotlinx</span><span class="selector-class">.android</span><span class="selector-class">.synthetic</span><span class="selector-class">.main</span><span class="selector-class">.activity_main</span>.*</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">class</span> <span class="selector-tag">MainActivity</span> : <span class="selector-tag">AppCompatActivity</span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">override</span> <span class="selector-tag">fun</span> <span class="selector-tag">onCreate</span>(<span class="attribute">savedInstanceState</span>: Bundle?) &#123;</span><br><span class="line">        <span class="selector-tag">super</span><span class="selector-class">.onCreate</span>(savedInstanceState)</span><br><span class="line">        <span class="selector-tag">setContentView</span>(R.layout.activity_main)</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">        <span class="selector-tag">btn_login</span><span class="selector-class">.setOnClickListener</span> &#123;</span><br><span class="line">            <span class="selector-tag">Toast</span><span class="selector-class">.makeText</span>(this<span class="variable">@MainActivity</span>,<span class="string">"Android Extensions test"</span>,Toast.LENGTH_SHORT)<span class="selector-class">.show</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>通过btn_login.setXXX 的方式来访问view，并且调用view相关方法，不需要写<code>findViewById()</code></li></ol><h4 id="import格式"><a href="#import格式" class="headerlink" title="import格式"></a>import格式</h4><p><code>import</code>格式是这样的：<code>kotlinx.android.synthetic.main.布局名称.*</code>。需要注意的是<code>include</code>进来的布局，也是需要通过<code>import</code>导入相应布局，这样才能正常使用。</p><h2 id="ViewHolder-使用Extensions"><a href="#ViewHolder-使用Extensions" class="headerlink" title="ViewHolder 使用Extensions"></a>ViewHolder 使用Extensions</h2><p>刚开始的时候Extensions是不支持在ViewHolder中使用视图绑定的，因此还是需要些findViewById，但是从Kotlin 1.1.4起，Extensions加入了增强功能，由于这项功能还未正式发布，因此需要开启实验标志</p><p>####1.开启experimental </p><p>在Module的build.gradle文件中设置：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">androidExtensions</span> &#123;</span><br><span class="line">    <span class="attribute">experimental</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-编写ViewHolder"><a href="#2-编写ViewHolder" class="headerlink" title="2.编写ViewHolder"></a>2.编写ViewHolder</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView</span><br><span class="line"><span class="keyword">import</span> android.view.View</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.extensions.LayoutContainer</span><br><span class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_main.*</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">constructor</span></span>(<span class="keyword">override</span> <span class="keyword">val</span> containerView: View?)</span><br><span class="line">    : RecyclerView.ViewHolder(containerView),</span><br><span class="line">      LayoutContainer &#123;   <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">setContent</span><span class="params">(str: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">        helloTv.text = str   <span class="comment">// 2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>实现LayoutContainer</li><li>使用helloTv.text</li></ol><h4 id="3-什么是LayoutContainer"><a href="#3-什么是LayoutContainer" class="headerlink" title="3. 什么是LayoutContainer"></a>3. 什么是LayoutContainer</h4><p>在Activity，Fragment，View中我们知道import对应的layout就可以了，但是像ViewHolder这些特殊的，我们就需要通过实现LayoutContainer接口，接口返回一个containerView，按照字面意思理解就是内容视图，这个containerView就包含了ViewHolder里面的所有子View，因此可以直接使用view.setxxx / view.property 的写法</p><h2 id="Android多渠道版本"><a href="#Android多渠道版本" class="headerlink" title="Android多渠道版本"></a>Android多渠道版本</h2><p>Android Extensions 插件支持Android 多渠道版本，假如在你的build.gradle中有一个名为free的版本</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">android</span> &#123;</span><br><span class="line">    <span class="section">productFlavors</span> &#123;</span><br><span class="line">        <span class="section">free</span> &#123;</span><br><span class="line">            <span class="attribute">versionName</span> <span class="string">"1.0-free"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后你就可以通过如下方式导入针对<strong>free/res/layout/activity_free.xml</strong>的所有生成的属性。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import kotlinx<span class="selector-class">.android</span><span class="selector-class">.synthetic</span><span class="selector-class">.free</span><span class="selector-class">.activity_free</span>.*</span><br></pre></td></tr></table></figure><h2 id="内部原理"><a href="#内部原理" class="headerlink" title="内部原理"></a>内部原理</h2><p>Kotlin Android Extensions 是一个Kotlin编译器插件。它执行下面两个操作：</p><ol><li>为每一个Kotlin Activity添加一个隐藏的缓存方法和一个域。这个方法相当之小，基本不会增加APK 的大小。</li><li>用方法调用替换每一个属性调用。</li></ol><p>例如：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span>: <span class="type">Activity</span></span>()</span><br><span class="line"><span class="function"><span class="keyword">fun</span> MyActivity.<span class="title">a</span><span class="params">()</span></span> &#123; </span><br><span class="line">        <span class="keyword">this</span>.textView.setText(“”) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Kotlin Android Extensions 的主要功能其实就是视图绑定，但是这一个功能也可以减少许多重复代码的编写，因此有机会还是把这个插件用上吧~</p><p>Day  9 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第九天&lt;/p&gt;
&lt;p&gt;今天的主题是 - -Android Extensions&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D8)-From Java to Kotlin</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day8.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day8.html</id>
    <published>2018-10-15T12:58:24.000Z</published>
    <updated>2018-10-15T13:28:59.187Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第八天</p><p>今天的主题是：From Java to Kotlin</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day7.html">Kotlin学习之旅(D7)-Kotlin Idioms part 2</a></p><h2 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h2><p>Kotlin官网在线学习课程（需要翻墙）：<a href="https://try.kotlinlang.org/#/Kotlin%20Koans/Introduction/Java%20to%20Kotlin%20conversion/Task.kt" target="_blank" rel="noopener">Kotlin Koans</a></p><p>kotlin中文(不需要翻墙)：<a href="https://www.kotlincn.net/" target="_blank" rel="noopener">Kotlin语言中文站</a></p><p>Github学习资源 : <a href="https://fabiomsr.github.io/from-java-to-kotlin/" target="_blank" rel="noopener">From Java To Kotlin</a></p><p>kotlin必备知识：</p><ul><li><a href="https://blog.mindorks.com/learn-kotlin-lateinit-vs-lazy" target="_blank" rel="noopener">Learn Kotlin - lateinit vs lazy</a></li><li><a href="https://blog.mindorks.com/learn-kotlin-apply-vs-with" target="_blank" rel="noopener">Learn Kotlin - apply vs with</a></li><li><a href="https://blog.mindorks.com/learn-kotlin-data-class" target="_blank" rel="noopener">Learn Kotlin - Data Class</a></li><li><a href="https://blog.mindorks.com/learn-kotlin-destructuring-declarations" target="_blank" rel="noopener">Learn Kotlin - Destructuring Declarations</a></li><li><a href="https://blog.mindorks.com/learn-kotlin-extension-functions" target="_blank" rel="noopener">Learn Kotlin - Extension Functions</a></li><li><a href="https://blog.mindorks.com/learn-kotlin-sealed-classes" target="_blank" rel="noopener">Learn Kotlin - Sealed Classes</a></li></ul><p>首先如果是有Java基础的童鞋，推荐直接从官网文档上手，可以快速学习Kotlin这门语言的特性和用法。</p><p>如果是零基础的童鞋，那么推荐看视频+看书，一般都是直接在youtube上搜索kotlin就可以找到很有有用的视频了，书籍的话推荐《Kotlin in Action》</p><p>这两天的任务比较轻松，因为From Java to Kotlin 其实在前面我们讲语法和习惯用法的时候，基本上都已经见过了，这里其实只是相当于再复习一遍，而且上面的 <a href="https://fabiomsr.github.io/from-java-to-kotlin/" target="_blank" rel="noopener">From Java To Kotlin</a>已经很全了，我就把自己不太熟练的摘录下来。</p><h2 id="常见区别"><a href="#常见区别" class="headerlink" title="常见区别"></a>常见区别</h2><h3 id="Null"><a href="#Null" class="headerlink" title="Null"></a>Null</h3><p>Java</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">text</span> != null)&#123;</span><br><span class="line">  int <span class="built_in">length</span> = <span class="built_in">text</span>.<span class="built_in">length</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Kotlin</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">val <span class="built_in">length</span> = <span class="keyword">text</span>?.<span class="built_in">length</span></span><br><span class="line"></span><br><span class="line">val <span class="built_in">length</span> = <span class="keyword">text</span>!!.<span class="built_in">length</span><span class="comment"> // NullPointerException if text == null</span></span><br></pre></td></tr></table></figure><p>？：可以为空，但是如果没做非空判断，在编译的时候会报错</p><p>!!.：可以为空，编译的时候也不会报错，但是运行的时候有可能会NPE</p><h3 id="Strings-II"><a href="#Strings-II" class="headerlink" title="Strings II"></a>Strings II</h3><p>Java</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span> <span class="built_in">text</span> = <span class="string">"First Line\n"</span> +</span><br><span class="line">              <span class="string">"Second Line\n"</span> +</span><br><span class="line">              <span class="string">"Third Line"</span>;</span><br></pre></td></tr></table></figure><p>Kotlin</p><figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">val</span> text = <span class="string">"""</span></span><br><span class="line"><span class="string">        |First Line</span></span><br><span class="line"><span class="string">        |Second Line</span></span><br><span class="line"><span class="string">        |Third Line</span></span><br><span class="line"><span class="string">"""</span>.trimMargin()</span><br></pre></td></tr></table></figure><p>Kotlin里面通过 <code>&#39;&#39;&#39;</code> 来表示多行字符串，通过 <code>|</code> 来表示换行 </p><h3 id="Bits-Operations"><a href="#Bits-Operations" class="headerlink" title="Bits Operations"></a>Bits Operations</h3><p>Java</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> andResult  = a &amp; b;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> orResult   = a | b;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> xorResult  = a ^ b;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> rightShift = a &gt;&gt; <span class="number">2</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> <span class="keyword">leftShift</span>  = a &lt;&lt; <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>Kotlin</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val andResult  = <span class="selector-tag">a</span> and b</span><br><span class="line">val orResult   = <span class="selector-tag">a</span> or b</span><br><span class="line">val xorResult  = <span class="selector-tag">a</span> xor b</span><br><span class="line">val rightShift = <span class="selector-tag">a</span> shr <span class="number">2</span></span><br><span class="line">val leftShift  = <span class="selector-tag">a</span> shl <span class="number">2</span></span><br></pre></td></tr></table></figure><p>Java 和 Kotlin 的位操作符</p><h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><p>Java</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> <span class="built_in">number</span> : numbers) &#123;</span><br><span class="line">  System.out.println(<span class="built_in">number</span>)<span class="comment">;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> <span class="built_in">number</span> : numbers) &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">number</span> &gt; <span class="number">5</span>) &#123;</span><br><span class="line">    System.out.println(<span class="built_in">number</span>)<span class="comment">;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Kotlin</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">numbers<span class="selector-class">.forEach</span> &#123;</span><br><span class="line">    println(it)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">numbers<span class="selector-class">.filter</span>  &#123; it &gt; <span class="number">5</span> &#125;</span><br><span class="line">       <span class="selector-class">.forEach</span> &#123; println(it) &#125;</span><br></pre></td></tr></table></figure><p>Kotlin通过 <code>filter{x &gt; 5}</code> 来表示 Java里面的 <code>if(x &gt; 5)</code>   这个条件语句的区别需要注意</p><h3 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h3><blockquote><p>Java</p></blockquote><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Utils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Utils</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// This utility class is not publicly instantiable</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getScore</span>(<span class="params"><span class="keyword">int</span> <span class="keyword">value</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Kotlin</p></blockquote><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Utils</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>() &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">getScore</span><span class="params">(value: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// another way</span></span><br><span class="line"><span class="keyword">object</span> Utils &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getScore</span><span class="params">(value: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Java：通过 静态方法 来实现工具类</p><p>Kotlin：一切皆是对象，通过 companion object / ojbect utils 来实现工具类</p><h3 id="Class-methods"><a href="#Class-methods" class="headerlink" title="Class methods"></a>Class methods</h3><blockquote><p>Java</p></blockquote><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Utils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Utils</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// This utility class is not publicly instantiable</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">triple</span>(<span class="params"><span class="keyword">int</span> <span class="keyword">value</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span> * <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> result = Utils.triple(<span class="number">3</span>);</span><br></pre></td></tr></table></figure><blockquote><p>Kotlin</p></blockquote><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="built_in">Int</span>.<span class="title">triple</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span> * <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="number">3.</span>triple()</span><br></pre></td></tr></table></figure><p>Java：通过static实现类方法</p><p>Kotlin：通过扩展函数实现类方法</p><h3 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h3><blockquote><p>Java</p></blockquote><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">enum</span> <span class="title">Direction</span> &#123;</span></span><br><span class="line">        NORTH(<span class="number">1</span>),</span><br><span class="line">        SOUTH(<span class="number">2</span>),</span><br><span class="line">        WEST(<span class="number">3</span>),</span><br><span class="line">        EAST(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        int direction;</span><br><span class="line"></span><br><span class="line">        Direction(int direction) &#123;</span><br><span class="line">            this.direction = direction;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public int getDirection() &#123;</span><br><span class="line">            <span class="keyword">return</span> direction;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>Kotlin</p></blockquote><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="keyword">class</span> Direction <span class="function"><span class="keyword">constructor</span><span class="params">(direction: Int)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">    NORTH(1),</span></span></span><br><span class="line"><span class="function"><span class="comment">    SOUTH(2),</span></span></span><br><span class="line"><span class="function"><span class="comment">    WEST(3),</span></span></span><br><span class="line"><span class="function"><span class="comment">    EAST(4);</span></span></span><br><span class="line"><span class="function"><span class="comment"></span></span></span><br><span class="line"><span class="function"><span class="comment">    var direction: Int = 0</span></span></span><br><span class="line"><span class="function"><span class="comment">        private set</span></span></span><br><span class="line"><span class="function"><span class="comment"></span></span></span><br><span class="line"><span class="function"><span class="comment">    init &#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">        this.direction = direction</span></span></span><br><span class="line"><span class="function"><span class="comment">    &#125;</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>一开始以为From Java to Kotlin 要讲两天的，因为我是先大致浏览了一遍官方文档，然后做的学习计划，结果发现经过前面的学习，对Kotlin的语法掌握了的情况下，其实很多Java和kotlin之间的区别都已经很熟悉了，强烈推荐大家去看看 <a href="https://fabiomsr.github.io/from-java-to-kotlin/" target="_blank" rel="noopener">From Java To Kotlin</a>，就当是一个复习/总结，加深对Kotlin语法的熟悉。</p><p>明天开始正式进入Kotlin in Android 的学习，这个才是我们Kotlin学习之旅的重点。</p><p>Day  8 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第八天&lt;/p&gt;
&lt;p&gt;今天的主题是：From Java to Kotlin&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D7)-Kotlin Idioms part 2</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day7.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day7.html</id>
    <published>2018-10-13T14:41:09.000Z</published>
    <updated>2018-10-15T00:31:03.885Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第七天</p><p>今天的主题是：Kotlin中的习惯用法-第二部分</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a></p><h2 id="今日目标"><a href="#今日目标" class="headerlink" title="今日目标"></a>今日目标</h2><ul><li>使用表达式</li><li>静态方法</li><li>使用命名参数替代setter</li><li>使用apply()</li><li>处理可空对象</li><li>使用as替代is</li><li>快速创建JSON</li></ul><h2 id="使用表达式"><a href="#使用表达式" class="headerlink" title="使用表达式"></a>使用表达式</h2><p>通过使用Lambda表达式，我们可以减少很多的代码量，同时也会牺牲可读性，但是我们还是鼓励使用表达式</p><p>举个栗子：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getDefaultLocale</span><span class="params">(deliveryArea: <span class="type">String</span>)</span></span>: Locale &#123;</span><br><span class="line">    <span class="keyword">val</span> deliverAreaLower = deliveryArea.toLowerCase()</span><br><span class="line">    <span class="keyword">if</span> (deliverAreaLower == <span class="string">"germany"</span> || deliverAreaLower == <span class="string">"austria"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Locale.GERMAN</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (deliverAreaLower == <span class="string">"usa"</span> || deliverAreaLower == <span class="string">"great britain"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Locale.ENGLISH</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (deliverAreaLower == <span class="string">"france"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Locale.FRENCH</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Locale.ENGLISH</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个函数的目的是为了获取正确的地区，在函数体中做了很多的判断，每一个需要接手的人都要重新过一遍逻辑，但是由于大量的if，读一遍代码的速度会变慢，时间自然就会变长，那么使用表达式的效果是怎么样的呢？</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getDefaultLocale2</span><span class="params">(deliveryArea: <span class="type">String</span>)</span></span> = <span class="keyword">when</span> (deliveryArea.toLowerCase()) &#123;</span><br><span class="line">    <span class="string">"germany"</span>, <span class="string">"austria"</span> -&gt; Locale.GERMAN</span><br><span class="line">    <span class="string">"usa"</span>, <span class="string">"great britain"</span> -&gt; Locale.ENGLISH</span><br><span class="line">    <span class="string">"france"</span> -&gt; Locale.FRENCH</span><br><span class="line">    <span class="keyword">else</span> -&gt; Locale.ENGLISH</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>没错，只要6行，就能达到和上面13行代码一样的效果，并且可读性上面我觉得还提升了。因为人的大脑是习惯有关联的东西，when表达式其实就是把并列的条件一个个列出来，对于读代码的人来说是很好理解的。</p><p>因此，考虑多使用 <code>when</code> 而不是<code>if</code></p><h2 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h2><p>在Kotlin里面，没有提供static关键字让我们定义静态的变量，方法，类，但是我们可以通过别的方式来实现</p><h4 id="1-通过Object关键字"><a href="#1-通过Object关键字" class="headerlink" title="1.通过Object关键字"></a>1.通过Object关键字</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> MyUtil &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">changeAnswer</span><span class="params">(string: <span class="type">String</span>)</span></span> : <span class="built_in">Int</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">MyUtil</span><span class="selector-class">.changeAnswer</span>(<span class="string">"test"</span>)</span><br></pre></td></tr></table></figure><h4 id="2-通过扩展函数"><a href="#2-通过扩展函数" class="headerlink" title="2.通过扩展函数"></a>2.通过扩展函数</h4><p>这个在昨天的 <a href="https://www.bluelzy.com/articles/learn_kotlin_day6.html">Kotlin学习之旅(D6)-Kotlin Idioms part 1</a> 已经讲过了，所以这里就不再重复了。</p><h2 id="使用命名参数替代setter"><a href="#使用命名参数替代setter" class="headerlink" title="使用命名参数替代setter"></a>使用命名参数替代setter</h2><p>在Java里面，我们通过setXXX这样的命名方法来区分每个参数</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val<span class="built_in"> config </span>= SearchConfig()</span><br><span class="line">       .setRoot(<span class="string">"~/folder"</span>)</span><br><span class="line">       .setTerm(<span class="string">"kotlin"</span>)</span><br><span class="line">       .setRecursive(<span class="literal">true</span>)</span><br><span class="line">       .setFollowSymlinks(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>在Kotlin里面，我们通过直接给参数命名~</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">val <span class="attr">config2</span> = SearchConfig2(</span><br><span class="line">       <span class="attr">root</span> = <span class="string">"~/folder"</span>,</span><br><span class="line">       <span class="attr">term</span> = <span class="string">"kotlin"</span>,</span><br><span class="line">       <span class="attr">recursive</span> = <span class="literal">true</span>,</span><br><span class="line">       <span class="attr">followSymlinks</span> = <span class="literal">true</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p> 简洁又明了：<code>参数名 = &quot;参数值&quot;</code></p><h2 id="使用apply"><a href="#使用apply" class="headerlink" title="使用apply()"></a>使用apply()</h2><p>这个用法和上面的差不多</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">val dataSource = BasicDataSource()</span><br><span class="line">dataSource<span class="selector-class">.driverClassName</span> = <span class="string">"com.mysql.jdbc.Driver"</span></span><br><span class="line">dataSource<span class="selector-class">.url</span> = <span class="string">"jdbc:mysql://domain:3309/db"</span></span><br><span class="line">dataSource<span class="selector-class">.username</span> = <span class="string">"username"</span></span><br><span class="line">dataSource<span class="selector-class">.password</span> = <span class="string">"password"</span></span><br><span class="line">dataSource<span class="selector-class">.maxTotal</span> = <span class="number">40</span></span><br><span class="line">dataSource<span class="selector-class">.maxIdle</span> = <span class="number">40</span></span><br><span class="line">dataSource<span class="selector-class">.minIdle</span> = <span class="number">4</span></span><br></pre></td></tr></table></figure><p>常规操作是这样的，那么Kotlin有什么骚操作呢？</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">val <span class="attr">dataSource</span> = BasicDataSource().apply &#123;</span><br><span class="line">    <span class="attr">driverClassName</span> = <span class="string">"com.mysql.jdbc.Driver"</span></span><br><span class="line">    <span class="attr">url</span> = <span class="string">"jdbc:mysql://domain:3309/db"</span></span><br><span class="line">    <span class="attr">username</span> = <span class="string">"username"</span></span><br><span class="line">    <span class="attr">password</span> = <span class="string">"password"</span></span><br><span class="line">    <span class="attr">maxTotal</span> = <span class="number">40</span></span><br><span class="line">    <span class="attr">maxIdle</span> = <span class="number">40</span></span><br><span class="line">    <span class="attr">minIdle</span> = <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同样的道理，通过<code>apply()</code> 后面也是 <code>参数名 = &quot;参数值&quot;</code> 就搞定了</p><h2 id="处理可空对象"><a href="#处理可空对象" class="headerlink" title="处理可空对象"></a>处理可空对象</h2><p>大家都知道，Kotlin默认是空安全的，但是也支持可空对象，那么如果对象是可为空的，在使用的时候我们就需要判断是否为空</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">order</span> == <span class="keyword">null</span> || <span class="keyword">order</span>.customer == <span class="keyword">null</span> || <span class="keyword">order</span>.customer.address == <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"Invalid Order"</span>)</span><br><span class="line">&#125;</span><br><span class="line">val city = <span class="keyword">order</span>.customer.address.city</span><br></pre></td></tr></table></figure><p>这是很常见的一种写法，但是如果大量使用，特别是在解析JSON的时候，就会让人觉得做了大量重复的工作，在Kotlin中,我们鼓励用这种写法：</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val city = <span class="keyword">order</span>?.customer?.address?.city ?: <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"Invalid Order"</span>)</span><br></pre></td></tr></table></figure><p>通过 <code>?</code> 来判断是否为空，如果为空会直接抛出异常，避免写大量的<code>if</code> 和 <code>xxx == null</code></p><h2 id="使用as替代is"><a href="#使用as替代is" class="headerlink" title="使用as替代is"></a>使用as替代is</h2><p>同样的，我们在kotlin里面常用的判断还有 <code>is</code> </p><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (<span class="class"><span class="keyword">service</span> !<span class="title">is</span> CustomerService) </span>&#123;</span><br><span class="line">    throw IllegalArgumentException(<span class="string">"No CustomerService"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">service</span>.<span class="title">getCustomer</span>()</span></span><br></pre></td></tr></table></figure><p>在这里我们可以通过<code>as</code> 来替换</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service <span class="keyword">as</span>? CustomerService ?: <span class="keyword">throw</span> IllegalArgumentException(<span class="string">"No CustomerService"</span>)</span><br><span class="line">service.getCustomer()</span><br></pre></td></tr></table></figure><p>反正出发点就是减少if语句的使用，提高代码的可读性，顺便还能减少代码量</p><h2 id="快速创建JSON"><a href="#快速创建JSON" class="headerlink" title="快速创建JSON"></a>快速创建JSON</h2><p>这个功能也是非常有用的，毕竟写单元测试的时候需要模拟测试数据~</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">val<span class="built_in"> customer </span>= mapOf(</span><br><span class="line">        <span class="string">"name"</span> <span class="keyword">to</span> <span class="string">"Clair Grube"</span>,</span><br><span class="line">        <span class="string">"age"</span> <span class="keyword">to</span> 30,</span><br><span class="line">        <span class="string">"languages"</span> <span class="keyword">to</span> listOf(<span class="string">"german"</span>, <span class="string">"english"</span>),</span><br><span class="line">        <span class="string">"address"</span> <span class="keyword">to</span> mapOf(</span><br><span class="line">                <span class="string">"city"</span> <span class="keyword">to</span> <span class="string">"Leipzig"</span>,</span><br><span class="line">                <span class="string">"street"</span> <span class="keyword">to</span> <span class="string">"Karl-Liebknecht-Straße 1"</span>,</span><br><span class="line">                <span class="string">"zipCode"</span> <span class="keyword">to</span> <span class="string">"04107"</span></span><br><span class="line">        )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>通过 <code>参数名</code>  to <code>参数值</code>  这样的形式来创建JSON，不仅仅是String，Int等常用的数据类型，包括map，list都可以创建，是不是很方便呢？</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在Day 6 和 Day 7 里面我们总结了一些Kotlin的习惯用法，多加练习，掌握这些用法可以提高我们的开发效率，并且促使我们写出好的代码。</p><p>接下里就要进入到Java to Kotlin 的学习里面啦，其实经过了前面Kotlin的语法，用法的学习，对于Kotlin这门语言的常用知识点都了解得差不多了，加油💪</p><p>Day  7 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第七天&lt;/p&gt;
&lt;p&gt;今天的主题是：Kotlin中的习惯用法-第二部分&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D6)-Kotlin Idioms part 1</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day6.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day6.html</id>
    <published>2018-10-12T14:41:09.000Z</published>
    <updated>2018-10-15T00:30:18.833Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第六天</p><p>今天的主题是：Kotlin中的习惯用法-第一部分</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day5.html">Kotlin学习之旅(D5)-高级语法</a></p><h2 id="习惯用法"><a href="#习惯用法" class="headerlink" title="习惯用法"></a>习惯用法</h2><ul><li><p>创建DTOs</p></li><li><p>函数的默认参数</p></li><li><p>过滤list</p></li><li><p>String字符串模板</p></li><li><p>类型判断</p></li><li><p>遍历Map</p></li><li><p>扩展函数</p></li><li><p>创建单例</p><p>—————————————————— Part 1</p></li><li><p>使用表达式</p></li><li><p>静态方法</p></li><li><p>使用命名参数替代setter</p></li><li><p>使用apply()</p></li><li><p>处理可空对象</p></li><li><p>使用as替代is</p></li><li><p>快速创建JSON</p></li></ul><h2 id="创建DTOs"><a href="#创建DTOs" class="headerlink" title="创建DTOs"></a>创建DTOs</h2><p>在Android中，我们经常需要创建Bean，也就是包括了setter,getter,toString等常见代码的一种类，一般用于接收后台返回的JSON格式的数据，在Kotlin里面，我们可以用很简单的语法完成Bean类的编写：</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> class <span class="type">Customer</span>(<span class="title">val</span> <span class="title">name</span>: <span class="type">String</span>, <span class="title">val</span> <span class="title">email</span>: <span class="type">String</span>)</span></span><br></pre></td></tr></table></figure><p>我们定义了一个Customer类，构造方法传入两个参数name, email，这个类包括以下方法：</p><ul><li>所有属性的 getters （对于 <em>var</em> 定义的还有 setters）</li><li><code>equals()</code></li><li><code>hashCode()</code></li><li><code>toString()</code></li><li><code>copy()</code></li></ul><p>在Kotlin中，这种类也叫做数据类，data class，一个关键字即可完成之前在Java里面需要写的大量模板代码，是不是很方便呢？</p><h2 id="函数的默认参数"><a href="#函数的默认参数" class="headerlink" title="函数的默认参数"></a>函数的默认参数</h2><p>这个之前在讲函数的时候也提到过，可以减少重载方法的数量</p><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun foo(a: <span class="type">Int</span> = <span class="number">0</span>, b: <span class="type">String</span> = <span class="string">""</span>)<span class="meta">&#123;...&#125;</span></span><br></pre></td></tr></table></figure><p>这里定义了一个foo函数，传入a，b两个参数，其中a的默认值为0，b的默认值为空字符串</p><p>那么在调用foo的时候，我们可以直接写</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">foo</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>不传a，b的话，就使用默认值进行运算。</p><h2 id="过滤list"><a href="#过滤list" class="headerlink" title="过滤list"></a>过滤list</h2><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val positives = list.<span class="keyword">filter</span> &#123; <span class="keyword">x</span> -&gt; <span class="keyword">x</span> &gt; <span class="number">0</span> &#125;</span><br></pre></td></tr></table></figure><p>或者可以更短:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val positives = <span class="built_in">list</span>.filter &#123; <span class="keyword">it</span> &gt; <span class="number">0</span> &#125;</span><br></pre></td></tr></table></figure><h2 id="String字符串模板"><a href="#String字符串模板" class="headerlink" title="String字符串模板"></a>String字符串模板</h2><p>这个之前也提到过，就是在字符串里面，加入其它的字符串变量，在Java中，需要通过format函数来进行赋值，在kotlin中也是变得更加简洁：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">println</span><span class="params">(<span class="string">"Name $name"</span>)</span></span></span><br></pre></td></tr></table></figure><p>$ 加上 变量名 就可以实现在String中插入变量的功能</p><h2 id="类型判断"><a href="#类型判断" class="headerlink" title="类型判断"></a>类型判断</h2><p>这个特性是经常会用到的，例如在解析JSONObject，或者是需要把JSON转成需要的数据类型时，以前的写法</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">if</span><span class="params">(json.getXXX != null)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (json<span class="selector-class">.getXXX</span> instanceOf Foo)&#123;</span><br><span class="line">        ....</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (json<span class="selector-class">.getXXX</span> instanceOf Bar)&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在Kotlin中，通过when + is 来实现</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">when</span> (x) &#123;</span><br><span class="line">    <span class="keyword">is</span> Foo <span class="comment">//-&gt; ……</span></span><br><span class="line">    <span class="keyword">is</span> Bar <span class="comment">//-&gt; ……</span></span><br><span class="line">    <span class="keyword">else</span>   <span class="comment">//-&gt; ……</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>是不是一目了然，妈妈再也不用担心我看代码看到心烦意乱了？</p><h2 id="遍历map-pair类型的list"><a href="#遍历map-pair类型的list" class="headerlink" title="遍历map/pair类型的list"></a>遍历map/pair类型的list</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ((k, v) <span class="keyword">in</span> map) &#123;</span><br><span class="line">    println(<span class="string">"<span class="variable">$k</span> -&gt; <span class="variable">$v</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果是在Java里面，我们需要通过key来找value，然后再输出，代码量又是蹭蹭的往上串</p><h2 id="扩展函数"><a href="#扩展函数" class="headerlink" title="扩展函数"></a>扩展函数</h2><p>emmm，这个之前在函数那一篇文章里面已经讲得比较清楚了，忘了的童鞋可以重温一下：<a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><p>直接上代码：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> String.<span class="title">spaceToCamelCase</span><span class="params">()</span></span> &#123; …… &#125;</span><br><span class="line"></span><br><span class="line"><span class="string">"Convert this to camelcase"</span>.spaceToCamelCase()</span><br></pre></td></tr></table></figure><p>String里面是没有spaceToCamelCase这个方法的，但是我们又不想通过继承让所有子类都加上这个方法，那么可以通过扩展函数来实现。</p><h2 id="创建单例"><a href="#创建单例" class="headerlink" title="创建单例"></a>创建单例</h2><p>单例模式我们经常都会用到，在Java里面的写法也是多种多样，但是所有形式的代码量都没有Kotlin里面来的简洁：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">object<span class="built_in"> Resource </span>&#123;</span><br><span class="line">    val name = <span class="string">"Name"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>没错，就是通过object关键字定义单例。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这些习惯用法都是前人通过大量实践总结出来的，可以提高我们的开发效率，所以我们也应该多学习这些用法，努力让自己写出来的代码简洁易懂。</p><p>Day 6 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第六天&lt;/p&gt;
&lt;p&gt;今天的主题是：Kotlin中的习惯用法-第一部分&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D5)-高级语法</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day5.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day5.html</id>
    <published>2018-10-11T12:32:20.000Z</published>
    <updated>2018-10-13T14:42:24.868Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅第五天</p><p>今天的主题是：高级语法</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day4.html">Kotlin学习之旅(D4)-函数与Lambda表达式</a></p><h2 id="高级语法"><a href="#高级语法" class="headerlink" title="高级语法"></a>高级语法</h2><h3 id="空安全"><a href="#空安全" class="headerlink" title="空安全"></a>空安全</h3><p>写过Java代码的人都知道，空指针异常是时刻都要注意的，特别是在Android里面，一个NullPointerException就会让App Crash，因此在Kotlin里面，为了消除来自代码空引用的危险，默认引用是不能为空的。关于空指针异常，这里还有个趣闻：<a href="http://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions" target="_blank" rel="noopener">《十亿美元的错误》</a></p><p>在Kotlin里面，如果允许某个变量为null，我们可以通过 “ ? ” 来表示：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b: <span class="built_in">String</span>? = <span class="string">"abc"</span></span><br><span class="line">b = <span class="keyword">null</span> <span class="comment">// ok</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a: <span class="built_in">String</span> = <span class="string">"abc"</span></span><br><span class="line">a = <span class="keyword">null</span> <span class="comment">// 编译错误</span></span><br></pre></td></tr></table></figure><p>如果变量是可以为空的，那么每次都需要显示检查是否为null：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val l = <span class="keyword">if</span>(<span class="selector-tag">b</span> != null) <span class="selector-tag">b</span><span class="selector-class">.length</span> - <span class="number">1</span></span><br></pre></td></tr></table></figure><p>或者，通过安全调用操作符 -&gt; “ ?. “</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> a = <span class="string">"Kotlin"</span></span><br><span class="line">    <span class="keyword">val</span> b: String? = <span class="literal">null</span></span><br><span class="line">    println(b?.length)    <span class="comment">// 如果b为null，则返回null</span></span><br><span class="line">    println(a?.length)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="操作符"><a href="#操作符" class="headerlink" title="!!操作符"></a>!!操作符</h3><p>这个操作符在kotlin里面经常都能看到，他的作用就是：非空断言操作符。例如： a!! ，如果a为null，那么就会抛出异常，如果不为null，则返回a的值</p><p>因此，如果你不希望NPE没有被捕获而导致appcrash，也不希望字符串为null但是没有处理，那么你就需要使用！！操作符，在变量为null的时候会抛出异常，我们就能在控制台看到了。</p><h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>在Kotlin中，我们使用throw - Exception 来抛出异常：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">Exception</span>(<span class="string">"this is an exception"</span>)</span><br></pre></td></tr></table></figure><p>使用try来捕获异常：</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125; <span class="keyword">catch</span> (e: Exception)&#123;</span><br><span class="line">    </span><br><span class="line">&#125; finally &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个语法结构和Java里面是很类似的</p><h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><h4 id="类引用"><a href="#类引用" class="headerlink" title="类引用"></a>类引用</h4><p>在反射中我们用的比较多的就是<strong><code>类引用</code></strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val c = MyClass::<span class="class"><span class="keyword">class</span></span></span><br></pre></td></tr></table></figure><p>该引用是 <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html" target="_blank" rel="noopener">KClass</a> 类型的值。</p><p>请注意，Kotlin 类引用与 Java 类引用不同。要获得 Java 类引用， 请在 <code>KClass</code> 实例上使用 <code>.java</code> 属性。</p><h4 id="函数引用"><a href="#函数引用" class="headerlink" title="函数引用"></a>函数引用</h4><p>通常我们会直接调用函数，通过 xxx() 来调用，但是我们也可以把函数传给另外一个函数当参数，使用的也是 <code>::</code>操作符</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">isOdd</span><span class="params">(x: <span class="type">Int</span>)</span></span> = x % <span class="number">2</span> != <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> numbers = listOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    println(numbers.filter(::isOdd))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个例子里面，我们首先定义了一个函数isOdd() 判断参数x是否为奇数，在main函数里，我们把这个方法作为参数传到了filter()方法里，这里其实是把函数当成 <code>函数类型的值</code> ，这个和Lambda表达式有点类似，都是把函数作为参数。</p><h4 id="属性引用"><a href="#属性引用" class="headerlink" title="属性引用"></a>属性引用</h4><p>同样，我们也是使用<code>::</code>来引用属性</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> x = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    println(::x.<span class="keyword">get</span>())</span><br><span class="line">    println(::x.name) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这里，表达式 <code>::x</code> 的意思是：</p><p>求值为 <code>KProperty&lt;Int&gt;</code> 类型的属性对象，它允许我们使用 <code>get()</code> 读取它的值，或者使用 <code>name</code>属性来获取属性名。更多信息请参见<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property/index.html" target="_blank" rel="noopener">关于 <code>KProperty</code> 类的文档</a>。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>除了上面说的这几个语法，其实官方文档还有别的，例如：注解，类型别名，类型安全的构造器等等，我觉得这些语法用的都比较少，在看到或者需要用到的时候再去了解也可以，所以这里就没讲。</p><p>其实Kotlin的语法和Java还是很相像的，只是有一些技巧或者特性，需要在实践中掌握，从而提高开发效率。因此明天开始我们就会进入：Kotlin Idioms 环节，介绍一些好用的开发技巧~</p><p>Day 5 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅第五天&lt;/p&gt;
&lt;p&gt;今天的主题是：高级语法&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D4)-函数与Lambda表达式</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day4.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day4.html</id>
    <published>2018-10-10T12:24:32.000Z</published>
    <updated>2018-10-13T14:42:19.662Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅-第四天</p><p>今天的主题是：函数与Lambda表达式</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_d2.html">Kotlin学习之旅(D2)-基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learn_kotlin_day3.html">Kotlin学习之旅(D3)-类与继承</a></p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>Kotlin里面的函数其实在之前的学习中已经见过了，通过 <strong>fun</strong> 关键字来标识</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">double</span><span class="params">(x: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><p>除了一般的使用 x: Int 这种方式定义参数，我们也可以使用默认参数的方式，这种方式可以有效减少重载方法的数量</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">read</span><span class="params">(b: <span class="type">Array</span>&lt;<span class="type">Byte</span>&gt;, off: <span class="type">Int</span> = <span class="number">0</span>, len: <span class="type">Int</span> = b.size)</span></span> &#123;...&#125;</span><br></pre></td></tr></table></figure><ol><li>off是默认值为0的Int类型参数</li><li>len是默认值为b.size的Int类型参数</li></ol><h3 id="命名参数"><a href="#命名参数" class="headerlink" title="命名参数"></a>命名参数</h3><p>在Java里面，我们调用具有多个参数的方法，是无法直接看到每个参数的意思的，例如：</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="literal">void</span> reformat(<span class="built_in">String</span> str, <span class="built_in">Boolean</span> normalizeCase, <span class="built_in">Boolean</span> upperCaseFirstLetter, <span class="built_in">Boolean</span>, divideByCamelHumps, Char wordSeparator)&#123;</span><br><span class="line">    <span class="params">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line">reformat(str, <span class="literal">true</span>, ture, ture, <span class="string">'_'</span>)</span><br></pre></td></tr></table></figure><p>在Kotlin里面，我们可以在调用的时候给参数加个名字，就像：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">reformat</span><span class="params">(str: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">             normalizeCase: <span class="type">Boolean</span> = <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">             upperCaseFirstLetter: <span class="type">Boolean</span> = <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">             divideByCamelHumps: <span class="type">Boolean</span> = <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">             wordSeparator: <span class="type">Char</span> = <span class="string">' '</span>)</span></span> &#123;</span><br><span class="line">……</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line">reformat(str,</span><br><span class="line">    normalizeCase = <span class="literal">true</span>,</span><br><span class="line">    upperCaseFirstLetter = <span class="literal">true</span>,</span><br><span class="line">    divideByCamelHumps = <span class="literal">false</span>,</span><br><span class="line">    wordSeparator = <span class="string">'_'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>这样代码的可读性更高，在多个参数的时候能清晰看到每个参数的作用</p><h3 id="返回Unit的函数"><a href="#返回Unit的函数" class="headerlink" title="返回Unit的函数"></a>返回Unit的函数</h3><p>前面写的几个方法都有返回值，那么如果要像Java里面一样返回void，在kotlin要怎么写呢？</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printHello</span><span class="params">(name: <span class="type">String</span>?)</span></span>: <span class="built_in">Unit</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (name != <span class="literal">null</span>)</span><br><span class="line">        println(<span class="string">"Hello <span class="subst">$&#123;name&#125;</span>"</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        println(<span class="string">"Hi there!"</span>)</span><br><span class="line">    <span class="comment">// `return Unit` 或者 `return` 是可选的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过 <strong>Unit</strong> 关键字表示返回 Unit类型，他的作用类似于Java里面的void，在Kotlin里面，Unit返回类型是可以省略的。</p><h3 id="中缀表示法"><a href="#中缀表示法" class="headerlink" title="中缀表示法"></a>中缀表示法</h3><p>标有 <em>infix</em> 关键字的函数也可以使用中缀表示法（忽略该调用的点与圆括号）调用。中缀函数必须满足以下要求：</p><ul><li>它们必须是成员函数或<a href="https://www.kotlincn.net/docs/reference/extensions.html" target="_blank" rel="noopener">扩展函数</a>；</li><li>它们必须只有一个参数；</li><li>其参数不得<a href="https://www.kotlincn.net/docs/reference/functions.html#%E5%8F%AF%E5%8F%98%E6%95%B0%E9%87%8F%E7%9A%84%E5%8F%82%E6%95%B0varargs" target="_blank" rel="noopener">接受可变数量的参数</a>且不能有<a href="https://www.kotlincn.net/docs/reference/functions.html#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0" target="_blank" rel="noopener">默认值</a>。</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">infix</span> <span class="function"><span class="keyword">fun</span> <span class="built_in">Int</span>.<span class="title">shl</span><span class="params">(x: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123; …… &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用中缀表示法调用该函数</span></span><br><span class="line"><span class="number">1</span> shl <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于这样</span></span><br><span class="line"><span class="number">1.</span>shl(<span class="number">2</span>)</span><br></pre></td></tr></table></figure><blockquote><p>中缀函数调用的优先级低于算术操作符、类型转换以及 <code>rangeTo</code> 操作符。 以下表达式是等价的：</p><ul><li><code>1 shl 2 + 3</code> 与 <code>1 shl (2 + 3)</code></li><li><code>0 until n * 2</code> 与 <code>0 until (n * 2)</code></li><li><code>xs union ys as Set&lt;*&gt;</code> 与 <code>xs union (ys as Set&lt;*&gt;)</code></li></ul><p>另一方面，中缀函数调用的优先级高于布尔操作符 <code>&amp;&amp;</code> 与 <code>||</code>、<code>is-</code> 与 <code>in-</code> 检测以及其他一些操作符。这些表达式也是等价的：</p><ul><li><code>a &amp;&amp; b xor c</code> 与 <code>a &amp;&amp; (b xor c)</code></li><li><code>a xor b in c</code> 与 <code>(a xor b) in c</code></li></ul><p>完整的优先级层次结构请参见其<a href="https://www.kotlincn.net/docs/reference/grammar.html#precedence" target="_blank" rel="noopener">语法参考</a>。</p></blockquote><h2 id="Lambda-表达式"><a href="#Lambda-表达式" class="headerlink" title="Lambda 表达式"></a>Lambda 表达式</h2><p>关于Lambda表达式这部分，从Java8就开始支持了，在实际开发中也会经常用到，但对我来说还是太抽象了，一直都不太理解，因此这一块我是参照官方文档来写的。如果有好的学习资料，欢迎大家留言~</p><p>lambda 表达式与匿名函数是“函数字面值”，即未声明的函数， 但立即做为表达式传递。考虑下面的例子：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">max</span>(<span class="keyword">strings, </span>&#123; a, <span class="keyword">b </span>-&gt; a.length &lt; <span class="keyword">b.length </span>&#125;)</span><br></pre></td></tr></table></figure><p>函数 <code>max</code> 是一个高阶函数，它接受一个函数作为第二个参数。 其第二个参数是一个表达式，它本身是一个函数，即函数字面值，它等价于以下命名函数：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun compare(<span class="selector-tag">a</span>: String, <span class="selector-tag">b</span>: String): Boolean = <span class="selector-tag">a</span><span class="selector-class">.length</span> &lt; <span class="selector-tag">b</span>.length</span><br></pre></td></tr></table></figure><p>从上面的例子看来，其实Lambda就是一种函数的表达方式，这个函数还未声明，但是通过Lambda表达式可以直接调用，只要掌握了语法，就能很方便的写出来了。</p><h3 id="Lambda-表达式语法"><a href="#Lambda-表达式语法" class="headerlink" title="Lambda 表达式语法"></a>Lambda 表达式语法</h3><p>Lambda 表达式的完整语法形式如下：</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val <span class="built_in">sum</span> = &#123; <span class="symbol">x:</span> <span class="built_in">Int</span>, <span class="symbol">y:</span> <span class="built_in">Int</span> -&gt; x + y &#125;</span><br></pre></td></tr></table></figure><p>lambda 表达式总是括在花括号中， 完整语法形式的参数声明放在花括号内，并有可选的类型标注， 函数体跟在一个 <code>-&gt;</code> 符号之后。如果推断出的该 lambda 的返回类型不是 <code>Unit</code>，那么该 lambda 主体中的最后一个（或可能是单个）表达式会视为返回值。</p><p>如果我们把所有可选标注都留下，看起来如下：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val <span class="built_in">sum</span>: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> = &#123; x, y -&gt; x + y &#125;</span><br></pre></td></tr></table></figure><p>把上面的官方文档说明翻译一下，就是：</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>lambda表达式总是括在花括号中</span><br><span class="line"><span class="number">2.</span>参数在-&gt;之前</span><br><span class="line"><span class="number">3.</span>函数在-&gt;之后</span><br></pre></td></tr></table></figure><p>因此上面的例子翻译一下，就是：</p><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.&#123; x, y -&gt; x + y &#125; 为lambda表达式</span><br><span class="line"><span class="number">2</span>.(<span class="type">Int</span>, <span class="type">Int</span>) 为参数</span><br><span class="line"><span class="number">3</span>.<span class="type">Int</span> = <span class="meta">&#123;...&#125;</span> 就是一个返回类型为<span class="type">Int</span>的函数</span><br></pre></td></tr></table></figure><h3 id="it：单个参数的隐式名称"><a href="#it：单个参数的隐式名称" class="headerlink" title="it：单个参数的隐式名称"></a><code>it</code>：单个参数的隐式名称</h3><p>一个 lambda 表达式只有一个参数是很常见的。</p><p>如果编译器自己可以识别出签名，也可以不用声明唯一的参数并忽略 <code>-&gt;</code>。 该参数会隐式声明为 <code>it</code>：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ints<span class="selector-class">.filter</span> &#123; it &gt; <span class="number">0</span> &#125; <span class="comment">// 这个字面值是“(it: Int) -&gt; Boolean”类型的</span></span><br></pre></td></tr></table></figure><h3 id="几个Tips"><a href="#几个Tips" class="headerlink" title="几个Tips"></a>几个Tips</h3><ol><li><p>Lambda表达式可以传递给一个高阶函数当做参数</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T, R&gt;</span> Collection<span class="type">&lt;T&gt;</span>.<span class="title">fold</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    initial: <span class="type">R</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    combine: (<span class="type">acc</span>: <span class="type">R</span>, nextElement: <span class="type">T</span>)</span></span> -&gt; R</span><br><span class="line">): R &#123;</span><br><span class="line">    <span class="keyword">var</span> accumulator: R = initial</span><br><span class="line">    <span class="keyword">for</span> (element: T <span class="keyword">in</span> <span class="keyword">this</span>) &#123;</span><br><span class="line">        accumulator = combine(accumulator, element)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> accumulator</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>fold这个函数的第二个参数是 combine(R, T)，同样是一个函数，他的返回值会作为fold的参数，那么flod就是一个<strong>高阶函数</strong>，而combine里面可以使用Lambda表达式~</p></li><li><p>如果函数的最后一个参数是一个函数，并且你传递一个 lambda 表达式作为相应的参数，你可以在圆括号之外指定它</p><p>例如：</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">val <span class="built_in">product</span> = items.fold(<span class="number">1</span>, &#123; acc, e -&gt; acc * e &#125;) </span><br><span class="line">=&gt; </span><br><span class="line">val <span class="built_in">product</span> = items.fold(<span class="number">1</span>) &#123; acc, e -&gt; acc * e &#125;</span><br></pre></td></tr></table></figure></li><li><p>如果一个函数的参数只有一个，并且参数也是一个函数，那么可以省略圆括号</p><p>例如：</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">run (&#123; println(<span class="string">"..."</span>) &#125;)</span><br><span class="line">=&gt;</span><br><span class="line">run &#123; println(<span class="string">"..."</span>) &#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>由于Kotlin里面Lambda表达式的使用还是很多的，所以建议大家多去看看其他的博客，因为我觉得官方文档对于没接触过Lambda的初学者来说还是太难懂了一点。</p><p>Day 4 - Learn Kotlin Trip， Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅-第四天&lt;/p&gt;
&lt;p&gt;今天的主题是：函数与Lambda表达式&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D3)-类与继承</title>
    <link href="https://www.bluelzy.com/articles/learn_kotlin_day3.html"/>
    <id>https://www.bluelzy.com/articles/learn_kotlin_day3.html</id>
    <published>2018-10-09T12:06:13.000Z</published>
    <updated>2018-10-13T14:42:15.427Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅-第三天</p><p>今天的主题是：类与继承</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p><a href="https://www.bluelzy.com/articles/learning_kotlin_da2.html">Kotlin学习之旅(D2)-基本语法</a></p><h2 id="今日目标"><a href="#今日目标" class="headerlink" title="今日目标"></a>今日目标</h2><p>今天空闲的时候 baidu一下，发现简书，掘金上有很多Kotlin学习总结，但是基本上都是把官方文档一字不落地复制粘贴了过来。我不希望自己也是这样子的，因此在Kotlin学习之旅里面：</p><ul><li>我只会把最常用的归纳总结起来，其他的大家可以去官方文档进行查看</li><li>除了官方文档有的知识点，也会加上自己的思考，标注一些不太容易理解，或者容易踩坑的地方</li><li>根据自己经验，或者评论的意见，不断补充和修改</li></ul><p>把这一系列的学习经验写成<strong>简洁易懂又实用</strong>的文章</p><p>话不多说, 今天我们的目标就是搞定下面几个知识点：</p><ul><li>类与对象基本用法</li><li>数据类</li><li>嵌套类</li><li>内部类</li><li>继承与接口</li></ul><p>Tips：</p><p><a href="https://www.kotlincn.net/docs/reference/classes.html" target="_blank" rel="noopener">Kotlin中文参考手册</a></p><p><a href="https://kotlinlang.org/docs/reference/" target="_blank" rel="noopener">Kotlin Docs Reference</a></p><h2 id="类与对象基本用法"><a href="#类与对象基本用法" class="headerlink" title="类与对象基本用法"></a>类与对象基本用法</h2><p>最基本的用法：</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Day3</span></span></span><br></pre></td></tr></table></figure><p>没有类体，只有类名，连大括号都省了</p><p>然后在Day3中加上构造方法</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Day3 <span class="function"><span class="keyword">constructor</span><span class="params">(<span class="keyword">name</span>: <span class="keyword">String</span>)</span> <span class="comment">&#123;...&#125;</span>  <span class="comment">// 关键字constructor</span></span></span><br></pre></td></tr></table></figure><p>但是一般我们看别人写的代码都是没有constructor这个关键字的，为什么呢？</p><p>官方文档给了答案：</p><blockquote><p>如果主构造函数没有任何注解或者可见性修饰符，可以省略这个 <em>constructor</em> 关键字</p></blockquote><p>也就是说，Day3可以写成</p><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class <span class="type">Day3</span>(name: <span class="type">String</span>) <span class="meta">&#123;...&#125;</span></span><br></pre></td></tr></table></figure><p>直接 类名(参数1,参数2){…} 这种格式就可以了</p><p>在kotlin里面，只能有<strong>一个主构造函数</strong>，和多个次构造函数，例如：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Day3</span></span>(name: String)&#123;  <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">constructor</span>(name: String, age: <span class="built_in">Int</span>): <span class="keyword">this</span>(name)&#123;  <span class="comment">// 2</span></span><br><span class="line">        println(<span class="string">"this is second constructor and the age is "</span> + age)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> day3 = Day3(<span class="string">"hello"</span>)  <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>Day3(…) 括号里的就是主构造函数，只是省略了constructor关键字</li><li>{ } 大括号里的 constructor(…) 就是次构造函数，每个次构造函数都要委托给主构造函数</li><li>实例化一个Day3对象</li></ol><p>运行代码的结果：啥都没有~</p><p>因为我们没有在主构造函数里面做任何的操作，那么如果我们要做初始化操作，要怎么写呢？</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Day3</span></span>(name: String)&#123;</span><br><span class="line"></span><br><span class="line">    init &#123;   <span class="comment">// 1</span></span><br><span class="line">        println(<span class="string">"this is main constructor"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span>(name: String, age: <span class="built_in">Int</span>): <span class="keyword">this</span>(name)&#123;</span><br><span class="line">        println(<span class="string">"this is second constructor and the age is "</span> + age)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> day3 = Day3(<span class="string">"hello"</span>)    <span class="comment">// 2</span></span><br><span class="line">    <span class="keyword">var</span> day33 = Day3(<span class="string">"hello"</span>, <span class="number">1</span>)  <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>init就是主构造函数的初始化方法</li><li>使用主构造函数初始化Day3对象</li><li>使用次构造函数初始化Day3对象</li></ol><p>运行代码的结果：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span> <span class="keyword">is</span> main <span class="keyword">constructor</span></span><br><span class="line"><span class="keyword">this</span> <span class="keyword">is</span> main <span class="keyword">constructor</span></span><br><span class="line"><span class="keyword">this</span> <span class="keyword">is</span> second <span class="keyword">constructor</span> and the age <span class="keyword">is</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>这里输出了两次main和一次second，原因就是上面我们讲到的 <strong>每个次构造函数都要委托给主构造函数</strong> ，通过this关键字，在调用次构造函数之前，都会先调用一次主构造函数，因此会有两个main输出~</p><p>通过这个例子，应该就能弄懂 类的定义，主/次构造函数，init的用法，如何实例化对象了</p><h2 id="数据类"><a href="#数据类" class="headerlink" title="数据类"></a>数据类</h2><p>Kotlin中通过 <strong>data</strong> 关键字来表示数据类：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">dataClass</span></span>(<span class="keyword">val</span> name: String, <span class="keyword">val</span> age: <span class="built_in">Int</span>)</span><br></pre></td></tr></table></figure><p>在实际开发中，数据类的使用是很常见的，那么Kotlin里的数据类具有哪些特性呢？</p><p>编译器自动从主构造函数中声明的所有属性导出以下成员：</p><ul><li><code>equals()</code>/<code>hashCode()</code> 对；</li><li><code>toString()</code> 格式是 <code>&quot;User(name=John, age=42)&quot;</code>；</li><li><a href="https://www.kotlincn.net/docs/reference/multi-declarations.html" target="_blank" rel="noopener"><code>componentN()</code> 函数</a> 按声明顺序对应于所有属性；</li><li><code>copy()</code> 函数（见下文）。</li></ul><p>为了确保生成的代码的一致性以及有意义的行为，数据类必须满足以下要求：</p><ul><li>主构造函数需要至少有一个参数；</li><li>主构造函数的所有参数需要标记为 <code>val</code> 或 <code>var</code>；</li><li>数据类不能是抽象、开放、密封或者内部的；</li></ul><p>因此，有两点需要注意：</p><ul><li>我们不能像普通类一样 class test(name: String, age: Int) 参数必须标记 val 或 var</li><li>不能写 data class test()，而是必须至少有一个参数</li></ul><p>这样创建数据类，编译器才不会报错~</p><blockquote><p>请注意，对于那些自动生成的函数，编译器只使用在主构造函数内部定义的属性。如需在生成的实现中排出一个属性，请将其声明在类体中</p></blockquote><p>这句话是什么意思呢？举个例子：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>(<span class="keyword">val</span> name: String) &#123;</span><br><span class="line">    <span class="keyword">var</span> age: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> person1 = Person(<span class="string">"John"</span>)</span><br><span class="line">    <span class="keyword">val</span> person2 = Person(<span class="string">"John"</span>)</span><br><span class="line">    person1.age = <span class="number">10</span></span><br><span class="line">    person2.age = <span class="number">20</span></span><br><span class="line">    println(<span class="string">"person1 == person2: <span class="subst">$&#123;person1 == person2&#125;</span>"</span>)</span><br><span class="line">    println(<span class="string">"person1 with age <span class="subst">$&#123;person1.age&#125;</span>: <span class="subst">$&#123;person1&#125;</span>"</span>)</span><br><span class="line">    println(<span class="string">"person2 with age <span class="subst">$&#123;person2.age&#125;</span>: <span class="subst">$&#123;person2&#125;</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person1</span> == person2: <span class="literal">true</span></span><br><span class="line">person1 <span class="keyword">with</span> age <span class="number">10</span>: Person(<span class="attr">name=John)</span></span><br><span class="line">person2 <span class="keyword">with</span> age <span class="number">20</span>: Person(<span class="attr">name=John)</span></span><br></pre></td></tr></table></figure><p>虽然age不一样，但是 == 结果是 true</p><p>说明只有在主构造函数内部定义的属性才具有toString()、 equals()、 hashCode() 、copy()这几个方法，由于属性age定义在类体中，因此是没有的。</p><p>最后，标准库提供了Pair和Triple这两个标准数据类</p><p>我们来看一下Pair的源码：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="type">out A, out B</span>&gt;</span>(</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">val</span> first: A,</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">val</span> second: B</span><br><span class="line">                                    ) : Serializable &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns string representation of the [Pair] including its [first] and [second] values.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String = <span class="string">"(<span class="variable">$first</span>, <span class="variable">$second</span>)"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>会发现其中他就是key-value格式的数据类，重写了toString()方法，其他的默认属性都是一样的~</p><p>在代码中运行一下：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> pair = Pair(<span class="string">"1"</span>,<span class="string">"2"</span>)</span><br><span class="line">    println(pair)</span><br><span class="line">    println(pair.toString())</span><br><span class="line">    println(pair.toList())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure><p>Triple也是类似的，这里就不看了。数据类知识点大概就是这么多~</p><h2 id="嵌套类与内部类"><a href="#嵌套类与内部类" class="headerlink" title="嵌套类与内部类"></a>嵌套类与内部类</h2><p>嵌套在类里面的类，就是嵌套类，这句话说起来比较拗口，直接看代码：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123;   <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> bar: <span class="built_in">Int</span> = <span class="number">1</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Nested</span> </span>&#123;      <span class="comment">// 2</span></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">foo</span><span class="params">()</span></span> = <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> demo = Outer.Nested().foo() <span class="comment">// == 2</span></span><br></pre></td></tr></table></figure><ol><li>外部类</li><li>内部类</li></ol><p>通过Outer.Nested().foo()调用内部类的方法</p><p>但是这个时候 Nested 类是不能访问Outer类的成员变量的，直接访问的话会报错~</p><p>如果需要，要加上<strong>inner</strong>关键字，让Nested成为内部类</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> bar: <span class="built_in">Int</span> = <span class="number">1</span></span><br><span class="line">    inner <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">foo</span><span class="params">()</span></span> = bar</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> demo = Outer().Inner().foo() <span class="comment">// == 1</span></span><br></pre></td></tr></table></figure><h2 id="继承与接口"><a href="#继承与接口" class="headerlink" title="继承与接口"></a>继承与接口</h2><p>这部分在实际应用中也是非常重要的，经常都会用到，毕竟抽象封装多态这三大特性，除了类与对象以外基本上就是通过继承和接口实现了</p><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>我们都知道，在Java里面是只能实现单继承的，也就是一个子类只能有一个父类，但是通过接口的方式，其实也就相当于实现了多继承，在Kotlin里面也是一样的，我们先说继承</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">open <span class="keyword">class</span> Father(<span class="keyword">name</span>: <span class="keyword">String</span>)     <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">class</span> Son(<span class="keyword">name</span>: <span class="keyword">String</span>) : Father(<span class="keyword">name</span>)  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><ol><li>open class Father就是父类，主构造函数里面需要传入String类型的参数name</li><li>Son继承自Father，需要用父类的主构造函数参数进行初始化</li></ol><h3 id="覆盖方法"><a href="#覆盖方法" class="headerlink" title="覆盖方法"></a>覆盖方法</h3><p>继承自然免不了要覆盖父类的方法，Kotlin里面通过关键字<strong>override</strong> 来标识</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line">    <span class="keyword">open</span> <span class="function"><span class="keyword">fun</span> <span class="title">v</span><span class="params">()</span></span> &#123; ... &#125;   <span class="comment">// 1</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">nv</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span></span>() : Base() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">v</span><span class="params">()</span></span> &#123; ... &#125;  <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>被覆盖的方法需要用open标识</li><li>覆盖的方法需要用override标识</li></ol><p>那么如果不想让子类继续覆盖要怎么做呢，只要加上final关键字就可以了</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">AnotherDerived</span></span>() : Base() &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">v</span><span class="params">()</span></span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="调用父类实现"><a href="#调用父类实现" class="headerlink" title="调用父类实现"></a>调用父类实现</h3><p>在子类中可以通过super关键字来调用父类的属性和方法</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">open</span> <span class="function"><span class="keyword">fun</span> <span class="title">f</span><span class="params">()</span></span> &#123; println(<span class="string">"Foo.f()"</span>) &#125;</span><br><span class="line">    <span class="keyword">open</span> <span class="keyword">val</span> x: <span class="built_in">Int</span> <span class="keyword">get</span>() = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> : <span class="type">Foo</span></span>() &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">f</span><span class="params">()</span></span> &#123; </span><br><span class="line">        <span class="keyword">super</span>.f()</span><br><span class="line">        println(<span class="string">"Bar.f()"</span>) </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> x: <span class="built_in">Int</span> <span class="keyword">get</span>() = <span class="keyword">super</span>.x + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>在Kotlin中，我们使用interface关键字来定义接口</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MyInterface</span> </span>&#123;    <span class="comment">// 1</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">bar</span><span class="params">()</span></span>    <span class="comment">// 2</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">foo</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="comment">// 可选的方法体</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>interface 表示接口</li><li>fun xxx() 定义方法名，不需要实现</li></ol><p>接口中的继承</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Named</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> name: String</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> : <span class="type">Named &#123;</span></span></span><br><span class="line">    <span class="keyword">val</span> firstName: String   <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">val</span> lastName: String</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> name: String <span class="keyword">get</span>() = <span class="string">"<span class="variable">$firstName</span> <span class="variable">$lastName</span>"</span>  <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>(</span><br><span class="line">    <span class="comment">// 不必实现“name”</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> firstName: String,</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> lastName: String,</span><br><span class="line">    <span class="keyword">val</span> position: Position</span><br><span class="line">) : Person</span><br></pre></td></tr></table></figure><p>可以看到，Person 继承 Named ，并且重写了 name 属性的get()方法，因此在Employee类实现Person接口的时候，只要实现 firstName, lastName 两个属性就可以了，而不用实现 name 属性</p><p>一般来说，我们都会使用到继承+接口两种方式，格式是这样的:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Day3</span></span>(name: String) : DayFather(), MyInterface&#123;  <span class="comment">// 1，2</span></span><br><span class="line"></span><br><span class="line">    init &#123;</span><br><span class="line">        println(<span class="string">"this is main constructor"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span>(name: String, age: <span class="built_in">Int</span>): <span class="keyword">this</span>(name)&#123;</span><br><span class="line">        println(<span class="string">"this is second constructor and the age is "</span> + age)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">test1</span><span class="params">()</span></span> &#123;   <span class="comment">// 3</span></span><br><span class="line">        TODO(<span class="string">"not implemented"</span>) </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">test2</span><span class="params">()</span></span> &#123;</span><br><span class="line">        TODO(<span class="string">"not implemented"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">DayFather</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>通过 :Father() 来继承父类</li><li>通过 ,Interface 来实现接口</li><li>实现接口中定义的方法</li></ol><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>类与对象基本用法</li><li>数据类</li><li>嵌套类</li><li>内部类</li><li>继承与接口</li></ul><p>这几个知识点我们今天就学习完了，明天我们会继续学习 <strong>函数</strong> 和 <strong>Lambda表达式</strong></p><p> Day 3 - Learning Kotlin Trip，Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅-第三天&lt;/p&gt;
&lt;p&gt;今天的主题是：类与继承&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D2)-基本语法</title>
    <link href="https://www.bluelzy.com/articles/learning_kotlin_d2.html"/>
    <id>https://www.bluelzy.com/articles/learning_kotlin_d2.html</id>
    <published>2018-10-08T11:47:13.000Z</published>
    <updated>2018-10-11T12:34:37.998Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Kotlin学习之旅的<strong>第二天</strong></p><p>今天让我们完成 <strong>基础语法</strong> 的学习</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>昨天，我们学习了一部分的基础语法，文章链接：<a href="https://www.bluelzy.com/articles/learning_kotlin_day1.html">Kotlin学习之旅(D1)-学习计划&amp;基本语法</a></p><p>最后还剩下三个基础语法没讲：</p><ul><li>for循环和while循环</li><li>when表达式</li><li>遍历集合</li></ul><p>今天让我们一个个解决掉~</p><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h3 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h3><p>在Java，C，Python等各种编程语言中，都会有循环控制，其中for循环又是最为常见的，在Kotlin中，for循环的语法为：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="built_in">item</span> <span class="keyword">in</span> collection)&#123;</span><br><span class="line">    print(<span class="built_in">item</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过 <strong>in</strong> 关键字来进行循环，当然，也可以指定范围：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="selector-tag">i</span> <span class="keyword">in</span> <span class="number">1</span>..<span class="number">3</span>)&#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过 <strong>“..”</strong> 表示范围，那么如果是只取奇数，或者偶数呢？间隔3个数取值呢？这时候就要用到 step 关键字了</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> 1<span class="built_in">..</span>6 <span class="keyword">step</span> 2)&#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><p>因为我们取值范围是1-6，每隔1个取值（step 2）</p><p>好了，那么如果我们希望从大到小取值呢，kotlin里面提供了一个<strong>downTo</strong>关键字</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">6</span> <span class="keyword">downTo</span> <span class="number">0</span> <span class="keyword">step</span> <span class="number">2</span>) <span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    println(i)</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure><p>这个函数的输出结果就是：</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure><p>因为我们取值范围是6-0，每隔1个取值（step 2）</p><p> 除了最基本的int型，我们还可以取数组的值：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line"><span class="keyword">val</span> array = arrayOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> array.indices) &#123;</span><br><span class="line">        println(array[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其他的集合类型我们会在后面的 <strong>遍历集合</strong> 里面再讲</p><h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><p>while循环的语法比较简单：</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="comment">(x &gt; 0)</span> &#123;</span><br><span class="line">    x--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    val y = retrieveData<span class="comment">()</span></span><br><span class="line">&#125; <span class="keyword">while</span> <span class="comment">(y != null)</span> <span class="comment">// y is visible here!</span></span><br></pre></td></tr></table></figure><p>通常是 while(“条件语句”) { … } 或者是 do { … } while(“条件语句”)</p><h2 id="when表达式"><a href="#when表达式" class="headerlink" title="when表达式"></a>when表达式</h2><p>上面讲的 for 和 while 在 Java里面都有，所以看一遍基本上就差不多了，但是when表达式，在Java里面是没有的，比较相像的是switch语句，其实when也是条件判断，或者说是控制流的一种。</p><p>基本用法：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">when</span> (x) &#123;</span><br><span class="line">    <span class="selector-tag">1</span> <span class="selector-tag">-</span>&gt; <span class="selector-tag">print</span>(<span class="string">"x == 1"</span>)</span><br><span class="line">    <span class="selector-tag">2</span> <span class="selector-tag">-</span>&gt; <span class="selector-tag">print</span>(<span class="string">"x == 2"</span>)</span><br><span class="line">    <span class="selector-tag">else</span> <span class="selector-tag">-</span>&gt; &#123; <span class="comment">// Note the block</span></span><br><span class="line">        <span class="selector-tag">print</span>(<span class="string">"x is neither 1 nor 2"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是when表达式有个很厉害的地方，他可以接收表达式，或者是普通的语句，什么意思呢？看个例子就明白了：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">when (x) &#123;</span><br><span class="line">    <span class="keyword">in</span> 1<span class="built_in">..</span>10 -&gt; <span class="builtin-name">print</span>(<span class="string">"x is in the range"</span>)</span><br><span class="line">    <span class="keyword">in</span> validNumbers -&gt; <span class="builtin-name">print</span>(<span class="string">"x is valid"</span>)</span><br><span class="line">    !<span class="keyword">in</span> 10<span class="built_in">..</span>20 -&gt; <span class="builtin-name">print</span>(<span class="string">"x is outside the range"</span>)</span><br><span class="line">    <span class="keyword">else</span> -&gt; <span class="builtin-name">print</span>(<span class="string">"none of the above"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果是switch语句，那么case的条件里面只能是string类型，但是在when里面则灵活许多，可以是1-10范围内的数字，可以使用”!”表示“非”，甚至可以在里面调用方法：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">when</span> &#123;</span><br><span class="line">    x.isOdd<span class="function"><span class="params">()</span> -&gt;</span> <span class="built_in">print</span>(<span class="string">"x is odd"</span>)</span><br><span class="line">    x.isEven<span class="function"><span class="params">()</span> -&gt;</span> <span class="built_in">print</span>(<span class="string">"x is even"</span>)</span><br><span class="line">    <span class="keyword">else</span><span class="function"> -&gt;</span> <span class="built_in">print</span>(<span class="string">"x is funny"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>虽然这种条件判断我们也可以通过if…else 来实现，但是阅读起来，还是when表达式比较好理解。</p><h2 id="遍历集合"><a href="#遍历集合" class="headerlink" title="遍历集合"></a>遍历集合</h2><p>一边遍历集合都会在for循环里面使用，例如：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> items = listOf(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"kiwifruit"</span>)</span><br><span class="line">    <span class="keyword">for</span> (item <span class="keyword">in</span> items) &#123;</span><br><span class="line">        println(item)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">apple</span></span><br><span class="line"><span class="keyword">banana</span></span><br><span class="line"><span class="keyword">kiwifruit</span></span><br></pre></td></tr></table></figure><p>同样的，在while循环中也可以遍历集合：`</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> items = setOf(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"kiwifruit"</span>)</span><br><span class="line">    <span class="keyword">when</span> &#123;</span><br><span class="line">        <span class="string">"orange"</span> <span class="keyword">in</span> items -&gt; println(<span class="string">"juicy"</span>)</span><br><span class="line">        <span class="string">"apple"</span> <span class="keyword">in</span> items -&gt; println(<span class="string">"apple is fine too"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里虽然不太明显，但是其实通过  “orange” in items 判断 “orange”是否在items中的时候，就需要遍历整个集合，所以说 <strong>“in”</strong> 关键字的作用就是遍历</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>好了，基础知识到这里就全部讲完了，这两天学到的基本语法在日常开发中我们经常会用到，貌似Kotlin的特性我们一个都还没说，例如：空安全，lambda表达式，如何自动生成getter和setter的类等等，这些我们会在接下来为期3天的<strong>高级语法之旅</strong>中进行学习。</p><p>这两天的基础语法其实就是让大家对kotlin这门语言有一点印象，想要真正要写出优雅，可读，高效的代码，我们还需要进行其他的理论学习，再加上不断不断的实践。</p><p>  Day 2 - Learning Kotlin Trip，Completed.</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Kotlin学习之旅的&lt;strong&gt;第二天&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;今天让我们完成 &lt;strong&gt;基础语法&lt;/strong&gt; 的学习&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Kotlin学习之旅(D1)-学习计划&amp;基本语法</title>
    <link href="https://www.bluelzy.com/articles/learning_kotlin_day1.html"/>
    <id>https://www.bluelzy.com/articles/learning_kotlin_day1.html</id>
    <published>2018-10-07T06:57:14.000Z</published>
    <updated>2018-10-21T01:44:44.115Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>2017年的Google I/O 开发者大会 </p><p>Kotlin正式成为了Android的官方支持语言</p><p>2018年的国庆小长假最后一天</p><p>BlueLzy正式开始Kotlin学习之旅</p></blockquote> <a id="more"></a><h2 id="学习计划"><a href="#学习计划" class="headerlink" title="学习计划"></a>学习计划</h2><h3 id="学什么？"><a href="#学什么？" class="headerlink" title="学什么？"></a>学什么？</h3><p>今天是Kotlin学习之旅的第一天，这次Kotlin之旅的行程计划是21天</p><h4 id="目的："><a href="#目的：" class="headerlink" title="目的："></a>目的：</h4><p>每天只要花30分钟-1个小时，坚持14天，也就是两个星期，掌握Kotlin开发Android项目所需知识</p><h4 id="包括："><a href="#包括：" class="headerlink" title="包括："></a>包括：</h4><ul><li><p>基础语法（2D）</p></li><li><p>高级语法（3D）</p></li><li><p>Kotlin Idioms（2D）</p></li><li><p>From Java to Kotlin（1D）</p></li><li><p>Kotlin Android Extensions（1D）</p></li><li><p>Unit Test with Kotlin（1D）</p></li><li><p>使用Kotlin完成一个Android小项目（3D）</p></li><li><p>总结（1D）</p></li></ul><h4 id="不包括："><a href="#不包括：" class="headerlink" title="不包括："></a><strong>不包括：</strong></h4><ul><li>Kotlin对比Java的好处，为什么要学习Kotlin</li><li>怎么安装Android Studio / IDEA</li><li>怎么加入Kotlin依赖</li><li>…</li></ul><blockquote><p> 需要的前置技能：任意一种编程语言基础，基本数据类型，操作符等基础知识已掌握即可</p></blockquote><h3 id="怎么学？"><a href="#怎么学？" class="headerlink" title="怎么学？"></a>怎么学？</h3><p>1.根据20/80法则，我们不需要掌握Kotlin所有的知识点，只需要掌握20%最常用就足以应付80%的场景了</p><p>2.学习金字塔法则，被动学习和主动学习的知识留存率是差很多的：</p><p><img src="http://www.wailian.work/images/2018/10/07/3391dd8c4e9aac9e.jpg" alt="3391dd8c4e9aac9e.jpg"></p><blockquote><p>尽量做创造性（输出）的事情，例如写总结，做笔记，敲代码，甚至内部分享，写成教程等</p></blockquote><p>3.Learning By Doing法则，整个Kotlin学习之旅主要分为两个部分</p><ul><li><p>理论部分：主要是参考kotlinlang.org，并配上Sample Code</p></li><li><p>实践部分：使用Kotlin编写一个Todo项目，选择这个项目的原因是：无网络请求，方便编写Unit Test，项目结构较为简单，7天即可完成</p></li></ul><blockquote><p>编程最重要就是动手敲，最终要的是能运行的程序，因此建议大家都跟着动手敲一遍</p></blockquote><h2 id="基本语法-Part-Ⅰ"><a href="#基本语法-Part-Ⅰ" class="headerlink" title="基本语法(Part Ⅰ)"></a>基本语法(Part Ⅰ)</h2><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>在Java里面，定义 <strong>常量</strong> 的写法是加上final关键字</p><p>而在Kotlin里面，定义常量的关键字是：<strong>val</strong></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> a: <span class="built_in">Int</span> = <span class="number">0</span> <span class="comment">// 相当于java里面的 private static final int a = 0;</span></span><br><span class="line"><span class="keyword">val</span> b = <span class="number">2</span>  <span class="comment">// 省略Int类型，在kotlin中也是允许的，Kotlin可以自动推断变量的类型</span></span><br></pre></td></tr></table></figure><p>那么要定义 <strong>变量</strong> 要怎么写呢？</p><p>通过关键字：<strong>var</strong>  </p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c = <span class="number">0</span> <span class="comment">// 省略Int类型</span></span><br><span class="line">c += <span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p>Tips：在kotlin中，我们可以省略每行代码最后的分号 ‘ ; ‘</p></blockquote><p><strong>延迟初始化 - Late-Initialized：</strong></p><p>由于在Kotlin里面变量是non-null的，但是有些时候我们需要在执行完某个操作后再赋值，那么就需要用到延迟初始化，通过 <strong>lateinit</strong> 关键字来实现</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: String = ...</span><br><span class="line">    <span class="keyword">var</span> street: String = ...</span><br><span class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> city = ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过isInitialized来检查变量是否已经被初始化</span></span><br><span class="line"><span class="keyword">if</span> (address::city.isInitialized) &#123;</span><br><span class="line">    println(address.city)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p>通过 <strong>fun</strong> 关键字来定义函数，例如：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">nothing</span><span class="params">()</span></span>&#123;</span><br><span class="line">    println(<span class="string">"i am an empty function"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>有参函数：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里我们传入a，b两个Int参数，返回值也是Int类型</p><p>a: Int - 参数名: 参数类型</p><p>fun(): Int - 函数: 函数返回值类型</p><p>更简洁的写法：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = a + b</span><br></pre></td></tr></table></figure><p>通过 <strong>‘’=’’</strong>  来表示 return 语句，注意：返回值只有一条表达式的时候才适用</p><p>参数有默认值的函数：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span> = <span class="number">1</span>, b: <span class="type">Int</span> = <span class="number">1</span>)</span></span> &#123;...&#125;</span><br></pre></td></tr></table></figure><p>此时a，b的默认值都是1</p><h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 这是一个多行注释</span></span><br><span class="line"><span class="comment">   这是一个多行注释 */</span></span><br></pre></td></tr></table></figure><h4 id="String字符串模板"><a href="#String字符串模板" class="headerlink" title="String字符串模板"></a>String字符串模板</h4><p>使用 <strong>$var_name</strong> 来表示变量的值</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">val</span> s1 = <span class="string">"a is <span class="variable">$a</span>"</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">2</span></span><br><span class="line"><span class="keyword">val</span> s2 = <span class="string">"<span class="subst">$&#123;s1.replace("is","was")&#125;</span>, but now is <span class="variable">$a</span>"</span></span><br><span class="line"></span><br><span class="line">println(s2)</span><br></pre></td></tr></table></figure><p>这段代码的输出结果为：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a was <span class="number">1</span>, <span class="keyword">but</span> now <span class="keyword">is</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><p>s1 的初始值为： a is 1，然后通过.replace()函数，把 is 替换为 was ,此时 s1变成了 a was 1</p><h4 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h4><p>条件语句的判断通常是 <strong>if</strong> 语句</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">maxOf</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更简洁的写法，记得上面我们说过的 <strong>“=”</strong> 来替换 <strong>return</strong> 吗：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">maxOf</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = <span class="keyword">if</span>(a &gt; b) a <span class="keyword">else</span> b</span><br></pre></td></tr></table></figure><p>这里其实使用了if 不加括号只执行一行的特性，常规写法应该是这样的：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">maxOf</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = <span class="keyword">if</span> (a &gt; b)&#123;</span><br><span class="line">    a</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是这样实在是太难看了，所以就省略了大括号，把返回结果直接写在一行代码里</p><h4 id="可空类型和null检查"><a href="#可空类型和null检查" class="headerlink" title="可空类型和null检查"></a>可空类型和null检查</h4><p>Kotlin具有空安全（null safety）特性，但是有时候我们就是想要返回null，该怎么办呢？</p><p>当str不存在整数时返回null：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">parseInt</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span>? &#123;</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>官方文档给出的Sample：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">parseInt</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span>? &#123;</span><br><span class="line">    <span class="keyword">return</span> str.toIntOrNull()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printProduct</span><span class="params">(arg1: <span class="type">String</span>, arg2: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = parseInt(arg1)</span><br><span class="line">    <span class="keyword">val</span> y = parseInt(arg2)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">if</span> (x == <span class="literal">null</span>) &#123;</span><br><span class="line">        println(<span class="string">"Wrong number format in arg1: '<span class="variable">$arg1</span>'"</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (y == <span class="literal">null</span>) &#123;</span><br><span class="line">        println(<span class="string">"Wrong number format in arg2: '<span class="variable">$arg2</span>'"</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// x and y are automatically cast to non-nullable after null check</span></span><br><span class="line">    println(x * y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    printProduct(<span class="string">"6"</span>, <span class="string">"7"</span>)</span><br><span class="line">    printProduct(<span class="string">"a"</span>, <span class="string">"7"</span>)</span><br><span class="line">    printProduct(<span class="string">"99"</span>, <span class="string">"b"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果为:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">42</span></span><br><span class="line">Wrong <span class="built_in">number</span> <span class="built_in">format</span> <span class="keyword">in</span> arg1: <span class="string">'a'</span></span><br><span class="line">Wrong <span class="built_in">number</span> <span class="built_in">format</span> <span class="keyword">in</span> arg2: <span class="string">'b'</span></span><br></pre></td></tr></table></figure><p>分析一下：</p><p>printProduct(“6”, “7”)：x，y都能转成Int类型，因此x,y都不是null，println(x * y) = 6 x 7 = 42</p><p> printProduct(“a”, “7”)：x为”a”不能转成Int，因此x为null，执行</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">println</span><span class="params">(<span class="string">"Wrong number format in arg1: '$arg1'"</span>)</span></span></span><br></pre></td></tr></table></figure><p> printProduct(“99”, “b”) ：同上</p><p>说明在fun或者var 加上 <strong>“?”</strong> 就表示该类型可以为null，后面就需要进行是否为null的判断</p><h4 id="类型检查与强制类型转换"><a href="#类型检查与强制类型转换" class="headerlink" title="类型检查与强制类型转换"></a>类型检查与强制类型转换</h4><p>Kotlin中，<strong>“is”</strong> 是类型检查的关键字</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getStringLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span>: <span class="built_in">Int</span>? &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj <span class="keyword">is</span> String) &#123;</span><br><span class="line">        <span class="comment">// `obj` is automatically cast to `String` in this branch</span></span><br><span class="line">        <span class="keyword">return</span> obj.length</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// `obj` is still of type `Any` outside of the type-checked branch</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这里，执行 obj.length 的时候，obj 会强制类型转换为 String </p><p>又或者可以这样写</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getStringLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span>: <span class="built_in">Int</span>? &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj !<span class="keyword">is</span> String) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// `obj` is automatically cast to `String` in this branch</span></span><br><span class="line">    <span class="keyword">return</span> obj.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这两段代码的意思都是一样的，通过 <strong>is</strong> 或者 <strong>!is</strong> 进行类型检查</p><p>使用 <strong>“as?”</strong>  进行“安全的”类型转换</p><p>例如： null 不能转换为String，因为String 是不可为null的，那么这个时候我们可以用这种方式：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val x: <span class="built_in">String</span>? = y <span class="keyword">as</span>? <span class="built_in">String</span></span><br></pre></td></tr></table></figure><p>当y为null的时候，结果会返回null，而不会抛出异常</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>今天是Kotlin学习之旅的第一天，主要学习了Kotlin的基础语法，包括：</p><ul><li>变量</li><li>函数</li><li>String字符串模板</li><li>条件语句</li><li>可空类型和null检查</li><li>类型检查与强制类型转换</li></ul><p>明天会学习剩下的基础语法，包括：</p><ul><li>for循环和while循环</li><li>when表达式</li><li>遍历集合</li></ul><p>面向对象编程打算在高级语法里面学习，因为这一块的知识点比较多，需要花的时间精力也会多一些。</p><p>好了，那么Day 1 的学习到此就结束啦。</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;2017年的Google I/O 开发者大会 &lt;/p&gt;
&lt;p&gt;Kotlin正式成为了Android的官方支持语言&lt;/p&gt;
&lt;p&gt;2018年的国庆小长假最后一天&lt;/p&gt;
&lt;p&gt;BlueLzy正式开始Kotlin学习之旅&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Kotlin学习之旅" scheme="https://www.bluelzy.com/categories/Kotlin%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%97%85/"/>
    
    
      <category term="Kotlin" scheme="https://www.bluelzy.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>RecyclerView基本用法</title>
    <link href="https://www.bluelzy.com/articles/recyclerview_introduction.html"/>
    <id>https://www.bluelzy.com/articles/recyclerview_introduction.html</id>
    <published>2018-09-10T15:17:16.000Z</published>
    <updated>2018-10-05T14:11:00.904Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Learning By Doing</p><p>一个Demo掌握RecyclerView基本用法</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于RecyclerView已经出来很久了，关于RecyclerView的文章网上也有很多，所以这篇文章只是作为一个基本用法的总结 + 常见功能的参考链接，可以理解为一篇查阅/总结的文章。</p><p>首先总结一下最基本的用法。</p><h2 id="RecyclerView使用"><a href="#RecyclerView使用" class="headerlink" title="RecyclerView使用"></a>RecyclerView使用</h2><p>使用RecyclerView的步骤</p><ul><li>添加RecyclerView依赖库（gradle build file）</li><li>定义Model类</li><li>在XML添加RecyclerView</li><li>创建XML布局文件，用于展示item</li><li>创建RecyclerView.Adapter和ViewHolder</li><li>绑定adapter和数据到RecyclerView</li></ul><h3 id="添加RecyclerView依赖库"><a href="#添加RecyclerView依赖库" class="headerlink" title="添加RecyclerView依赖库"></a>添加RecyclerView依赖库</h3><p>在build.gradle中加入依赖：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">implementation</span><span class="string">'com.android.support:recyclerview-v7:27.0.2'</span></span><br></pre></td></tr></table></figure><h3 id="定义Model类"><a href="#定义Model类" class="headerlink" title="定义Model类"></a>定义Model类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * author : BlueLzy</span></span><br><span class="line"><span class="comment"> * e-mail : bluehobert@gmail.com</span></span><br><span class="line"><span class="comment"> * date   : 2018/09/10 22:11</span></span><br><span class="line"><span class="comment"> * desc   :</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Contact</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String mName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mOnline;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Contact</span><span class="params">(String name, <span class="keyword">boolean</span> online)</span> </span>&#123;</span><br><span class="line">        mName = name;</span><br><span class="line">        mOnline = online;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isOnline</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mOnline;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> lastContactId = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;Contact&gt; <span class="title">createContactsList</span><span class="params">(<span class="keyword">int</span> numContacts)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Contact&gt; contacts = <span class="keyword">new</span> ArrayList&lt;Contact&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numContacts; i++) &#123;</span><br><span class="line">            contacts.add(<span class="keyword">new</span> Contact(<span class="string">"Person "</span> + ++lastContactId, i &lt;= numContacts / <span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> contacts;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在activity添加RecyclerView"><a href="#在activity添加RecyclerView" class="headerlink" title="在activity添加RecyclerView"></a>在activity添加RecyclerView</h3><p>我们新建一个layout文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/rvContacts"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建XML布局文件，用于展示item"><a href="#创建XML布局文件，用于展示item" class="headerlink" title="创建XML布局文件，用于展示item"></a>创建XML布局文件，用于展示item</h3><p>再创建一个layout文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingTop</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingBottom</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/contact_name"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/message_button"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingLeft</span>=<span class="string">"16dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingRight</span>=<span class="string">"16dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">"10sp"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建adapter和viewholder"><a href="#创建adapter和viewholder" class="headerlink" title="创建adapter和viewholder"></a>创建adapter和viewholder</h3><p>创建ContactsAdapter类：</p><p>onCreateViewHolder:一般用于初始化布局文件和viewholder</p><p>onBindViewHolder：一般用于初始化item布局中的控件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * author : BlueLzy</span></span><br><span class="line"><span class="comment"> * e-mail : bluehobert@gmail.com</span></span><br><span class="line"><span class="comment"> * date   : 2018/09/10 22:16</span></span><br><span class="line"><span class="comment"> * desc   :</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContactsAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">ContactsAdapter</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Contact&gt; contacts;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ContactsAdapter</span><span class="params">(List&lt;Contact&gt; contacts)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.contacts = contacts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Context context = parent.getContext();</span><br><span class="line">        LayoutInflater inflater = LayoutInflater.from(context);</span><br><span class="line"></span><br><span class="line">        View contactView = inflater.inflate(R.layout.item_recyclerview, parent, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">        ViewHolder viewHolder = <span class="keyword">new</span> ViewHolder(contactView);</span><br><span class="line">        <span class="keyword">return</span> viewHolder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        Contact contact = contacts.get(position);</span><br><span class="line"></span><br><span class="line">        TextView textView = holder.name;</span><br><span class="line">        textView.setText(contact.getName());</span><br><span class="line">        Button button = holder.message;</span><br><span class="line">        button.setText(contact.isOnline() ? <span class="string">"Message"</span> : <span class="string">"Offline"</span>);</span><br><span class="line">        button.setEnabled(contact.isOnline());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="在activity绑定adapter和data"><a href="#在activity绑定adapter和data" class="headerlink" title="在activity绑定adapter和data"></a>在activity绑定adapter和data</h3><p>在activity的onCreate()中加入以下代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">RecyclerView rvContacts = findViewById(R.id.rvContacts);</span><br><span class="line"></span><br><span class="line">       contacts = Contact.createContactsList(<span class="number">20</span>);</span><br><span class="line">       ContactsAdapter adapter = <span class="keyword">new</span> ContactsAdapter(contacts);</span><br><span class="line">       rvContacts.setLayoutManager(<span class="keyword">new</span> LinearLayoutManager(<span class="keyword">this</span>));</span><br><span class="line">       rvContacts.setAdapter(adapter);</span><br><span class="line"></span><br><span class="line">       SnapHelper snapHelper = <span class="keyword">new</span> LinearSnapHelper();</span><br><span class="line">       snapHelper.attachToRecyclerView(rvContacts);</span><br></pre></td></tr></table></figure><h3 id="compile-amp-run-project"><a href="#compile-amp-run-project" class="headerlink" title="compile &amp; run project"></a>compile &amp; run project</h3><p>运行程序，看一下我们的成果：</p><p><img src="http://www.wailian.work/images/2018/09/10/Sep-10-201823-30-03.gif" alt="Sep-10-201823-30-03.gif"></p><p>可以看到，根据Contact.createContactsList(20)方法，创建了20个item，并且成功的按照item的布局展示出来，这就是RecylerView最基本的用法了。over~</p><p>步骤其实特别简单：</p><p><strong>添加依赖，XML加入RecyclerView，编写item布局，编写Adapter和ViewHolder，创建RecyclerView，绑定Adapter</strong></p><p>最后别忘了 <strong>运行程序</strong> </p><p>over~</p><h3 id="第三方库"><a href="#第三方库" class="headerlink" title="第三方库"></a>第三方库</h3><p>由于RecyclerView还有许多有用的特性，我们可以利用它来做很多有趣的事情，所以我也收集了一些资料，供大家参考。</p><ul><li><p>让item在滚动后居中显示的库： <a href="https://github.com/rubensousa/RecyclerViewSnap/" target="_blank" rel="noopener">Snap to Center Effect</a> </p><p><img src="https://i.imgur.com/D5crJK4.gif" alt=""></p></li></ul><ul><li><p>给Recyclerview加上各种动画：<a href="https://github.com/wasabeef/recyclerview-animators" target="_blank" rel="noopener"><strong>recyclerview-animators</strong></a></p><p><img src="https://camo.githubusercontent.com/8eb31d3d3bc9f6e272b1210be36a34219a77dbf4/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f313833333930312d363161303864393561623765346632392e6769663f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970" alt=""></p></li><li><p>万能adapter：<a href="https://github.com/CymChad/BaseRecyclerViewAdapterHelper" target="_blank" rel="noopener"><strong>BaseRecyclerViewAdapterHelper</strong></a></p></li><li><p>tablayout：<a href="https://github.com/nshmura/RecyclerTabLayout" target="_blank" rel="noopener"><strong>RecyclerTabLayout</strong></a></p></li></ul><h3 id="文章-博客"><a href="#文章-博客" class="headerlink" title="文章/博客"></a>文章/博客</h3><h4 id="中文："><a href="#中文：" class="headerlink" title="中文："></a>中文：</h4><ul><li><a href="https://blog.csdn.net/lmj623565791/article/details/45059587" target="_blank" rel="noopener">Android RecyclerView 使用完全解析 体验艺术般的控件</a></li><li><a href="https://www.kymjs.com/code/2016/07/10/01/" target="_blank" rel="noopener">深入浅出 RecyclerView</a></li></ul><h4 id="英文："><a href="#英文：" class="headerlink" title="英文："></a>英文：</h4><ul><li><a href="https://developer.android.com/guide/topics/ui/layout/recyclerview" target="_blank" rel="noopener">Android Developer - Create a List with RecyclerView</a></li><li><a href="https://google-developer-training.gitbooks.io/android-developer-fundamentals-course-concepts/content/en/Unit%202/44_c_recyclerview.html" target="_blank" rel="noopener">RecyclerView:Android-Developer-Traning </a></li></ul><p>基本上常见的用法和原理的解析都在这里面了，有特定需求的可以上Github找一下第三方库，看一下里面的源码，了解原理之后，其实自己也能实现各种炫酷的效果~</p><h2 id="20181010更新"><a href="#20181010更新" class="headerlink" title="20181010更新"></a>20181010更新</h2><p>评论里有朋友问怎么添加分割线，其实Android官方已经提供了默认实现。只需要一行代码即可：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">recyclerView.addItemDecoration(<span class="keyword">new</span> DividerItemDecoration(context,DividerItemDecoration.VERTICAL));</span><br></pre></td></tr></table></figure><p>效果如图：</p><p><img src="http://www.wailian.work/images/2018/10/05/Snip20181005_2.png" alt="Snip20181005_2.png"></p><p>如果对默认的效果不满意，也可以使用其他的实现方式：</p><p>自定义Drawable文件</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">recyclerView</span><span class="selector-class">.addItemDecoration</span>(<span class="selector-tag">new</span> <span class="selector-tag">RecycleViewDivider</span>(</span><br><span class="line">    <span class="selector-tag">context</span>, <span class="selector-tag">DividerItemDecoration</span><span class="selector-class">.VERTICAL</span>, <span class="selector-tag">R</span><span class="selector-class">.drawable</span><span class="selector-class">.divider_mileage</span>));</span><br></pre></td></tr></table></figure><p>OR</p><p>自定义分割线高度和颜色</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">recyclerView.addItemDecoration(<span class="keyword">new</span> RecycleViewDivider(</span><br><span class="line">    context, DividerItemDecoration.VERTICAL, <span class="number">10</span>, getResources().getColor(R.color.divide_gray_color)));</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Learning By Doing&lt;/p&gt;
&lt;p&gt;一个Demo掌握RecyclerView基本用法&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android" scheme="https://www.bluelzy.com/categories/Android/"/>
    
    
      <category term="Android" scheme="https://www.bluelzy.com/tags/Android/"/>
    
      <category term="RecyclerView" scheme="https://www.bluelzy.com/tags/RecyclerView/"/>
    
  </entry>
  
  <entry>
    <title>Android DataBinding基本用法</title>
    <link href="https://www.bluelzy.com/articles/android_databinding_introduction.html"/>
    <id>https://www.bluelzy.com/articles/android_databinding_introduction.html</id>
    <published>2018-09-09T11:42:22.000Z</published>
    <updated>2018-09-09T13:26:38.017Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Learning By Doing</p><p>一个Demo掌握DataBinding的基本用法</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>DataBinding 是Google推出的一个支持库，它的作用是：通过layout文件绑定app逻辑和UI的更新，尽可能地减少编码工作。</p><p>说定义似乎有些隐晦，还是通过learning by doing的方式来学习吧。</p><p>这篇文章包括以下几方面的内容：</p><ul><li>通过layout来绑定app逻辑</li><li>layout里包含include标签的用法</li><li>点击事件的处理</li><li>使用Observablues动态更新UI</li><li>使用ObervablueFields动态更新UI</li></ul><p>我会按照上面列的顺序，一步步在Demo里面实现对应的功能</p><p>所有的源码都包含在这篇文章里，需要Demo的可以评论留言</p><blockquote><p>由于是Learning By Doing，所以不会有理论的讲解，关于为什么是layout便签，为什么支持这样调用等问题，请去<a href="https://developer.android.com/topic/libraries/data-binding/" target="_blank" rel="noopener">Android Developer</a> 看官方文档，或者去Stack Overflow 提问</p></blockquote><h2 id="通过layout来绑定app逻辑"><a href="#通过layout来绑定app逻辑" class="headerlink" title="通过layout来绑定app逻辑"></a>通过layout来绑定app逻辑</h2><p>注意：</p><blockquote><p> 首先打开Andriod Studio，并创建一个新的项目，然后再正式开始我们的DataBinding之旅。</p></blockquote><h3 id="加入Databinding"><a href="#加入Databinding" class="headerlink" title="加入Databinding"></a>加入Databinding</h3><p>在app/gradle文件中加入：</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Databinding&#123;</span><br><span class="line"><span class="attr">Eanbled</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>就可以使用DataBinding了，前提是你的Android Studio是2.1.3以上的版本（目前最新版已经是3.1.4了~）</p><h3 id="编写Bean"><a href="#编写Bean" class="headerlink" title="编写Bean"></a>编写Bean</h3><p>这里我们用User类来演示</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name == <span class="keyword">null</span> ? <span class="string">""</span> : name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email == <span class="keyword">null</span> ? <span class="string">""</span> : email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Android Stuido: command/ctrl + n 快捷键 可以快速创建构造方法，gettet/setter方法等</p></blockquote><h3 id="编写layout文件"><a href="#编写layout文件" class="headerlink" title="编写layout文件"></a>编写layout文件</h3><p>打开<em>activity_main.xml</em> 文件，把根目录改成layout，并且加入data 和 variable 标签</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:bind</span>=<span class="string">"http://schemas.android.com/tools"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"user"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"com.blue.androidlearningcode.databinding.User"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">     <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/name"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@&#123;user.name&#125;"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/email"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@&#123;user.email&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>layout data variables的官方定义：</p><blockquote><p>The Data Binding Library automatically generates the classes required to bind the views in the layout with your data objects. The library provides features such as imports, variables, and includes that you can use in your layouts.</p></blockquote></li><li><p>data：用于定义在DataBinding里面需要用到的数据对象（data objects）</p></li><li>variable：比data更小的层级，通常是class，我们这里就是刚刚写的User类</li><li>textview: 通过@{user.xxx}来绑定user里面的属性</li></ul><h3 id="在代码中绑定xml里面的控件"><a href="#在代码中绑定xml里面的控件" class="headerlink" title="在代码中绑定xml里面的控件"></a>在代码中绑定xml里面的控件</h3><p>回到MainActivity.class文件中，现在我们需要做的就是把刚刚写的layout文件，和生成的DataBinding绑定起来。</p><p>首先，让我们愉快的 <strong>clean &amp; rebuild project</strong>吧</p><p>为什么呢？ 因为DataBinding需要在Build的过程中生成绑定类</p><blockquote><p> ps：实际开发中，如果项目过大，可能Restart Android Studio比较快。。</p></blockquote><p>OK，如果一切顺利的话，就开始写MainActivity的代码吧，在onCreate方法中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ActivityMainBinding binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.activity_main);</span><br><span class="line">      user = <span class="keyword">new</span> User();</span><br><span class="line">      user.setName(<span class="string">"BlueLzy"</span>);</span><br><span class="line">      user.setEmail(<span class="string">"bluehobert@gmail.com"</span>);</span><br><span class="line"></span><br><span class="line">      binding.setUser(user);</span><br></pre></td></tr></table></figure><ul><li>ActivityMainBinding：这货就是Build完生成出来的东西</li><li>binding.setUser()：绑定对应的bean</li></ul><p>好了，run一下，应该就能看到在两个TextView中分别出现了name和email的value了</p><h2 id="layout里包含include标签的用法"><a href="#layout里包含include标签的用法" class="headerlink" title="layout里包含include标签的用法"></a>layout里包含include标签的用法</h2><p>上面的用法其实就是DataBinding最基本的用法，通过xml和class的绑定，减少我们在class里面编写的代码量。</p><p>但是理想很丰满，现实很骨感，项目中总是会有许多意想不到的需求，例如：我要在layout里面使用include标签，咋整？</p><p>如果直接把include标签加入到父布局，然后运行程序，你会发现是不行的，我们有些小细节要处理。</p><p>So，let‘s do it.</p><h3 id="新建content-data-binding-xml"><a href="#新建content-data-binding-xml" class="headerlink" title="新建content_data_binding.xml"></a>新建content_data_binding.xml</h3><p>在layout文件夹下新建一个布局文件，用于存放我们需要用到的view</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">layout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"user"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"com.blue.androidlearningcode.databinding.User"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/name"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@&#123;user.name&#125;"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/email"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@&#123;user.email&#125;"</span> /&gt;</span></span><br><span class="line">            </span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以看到，其实我们就是把activity_main.xml的两个TextView搬到了这个新的layout中。</p><h3 id="修改activity-main-xml"><a href="#修改activity-main-xml" class="headerlink" title="修改activity_main.xml"></a>修改activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:bind</span>=<span class="string">"http://schemas.android.com/tools"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"user"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"com.blue.androidlearningcode.databinding.User"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">"@layout/content_data_binding"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">bind:user</span>=<span class="string">"@&#123;user&#125;"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其实使用include标签要注意的地方就是：</p><ol><li>父布局的include标签需要加上：  bind:user=”@{user}” ，通过这行代码来关联bean和layout</li><li>子布局也需要加上layout,data,variable等标签</li></ol><p>OK，再次运行程序，我们会发现效果和上面的一样，显示出来了name和email的值。</p><h2 id="点击事件的处理"><a href="#点击事件的处理" class="headerlink" title="点击事件的处理"></a>点击事件的处理</h2><p>上面的Demo只是静态的，还无法对view的onClick，onLongClick 或者其他方法进行响应，那么接下来我们首先处理的就是onClick事件</p><h3 id="修改MainActivity"><a href="#修改MainActivity" class="headerlink" title="修改MainActivity"></a>修改MainActivity</h3><p>创建MyClickHandlers内部类</p><p>在FAB点击的时候弹出Toast</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClickHandlers</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFabClicked</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line">         Toast.makeText(getApplicationContext(), <span class="string">"FAB clicked!"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="修改activity-main-xml-1"><a href="#修改activity-main-xml-1" class="headerlink" title="修改activity_main.xml"></a>修改activity_main.xml</h3><p>我们在这里使用FAB(FloatingActionButton)来演示：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:bind</span>=<span class="string">"http://schemas.android.com/tools"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"user"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"com.blue.androidlearningcode.databinding.User"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"handlers"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"com.blue.androidlearningcode.DataBindingTestActivity.MyClickHandlers"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">"@layout/content_data_binding"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">bind:user</span>=<span class="string">"@&#123;user&#125;"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">"bottom|end"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:srcCompat</span>=<span class="string">"@android:drawable/ic_dialog_info"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:onClick</span>=<span class="string">"@&#123;handlers::onFabClicked&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="绑定MyClickHandlers"><a href="#绑定MyClickHandlers" class="headerlink" title="绑定MyClickHandlers"></a>绑定MyClickHandlers</h3><p>又来到了<strong>clean &amp; rebuild</strong> 时刻，在onCreate()里面进行绑定</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyClickHandlers handlers = <span class="keyword">new</span> MyClickHandlers();</span><br><span class="line">binding.content.setHandlers(handlers);  <span class="comment">// binding content layout click event</span></span><br></pre></td></tr></table></figure><ul><li><p>为什么上面的User是binding.setUser()，而这里是binding.content.setHandlers()呢：</p><p>这个问题很有趣，细心的童鞋应该是可以发现的，原因在xml的代码里</p></li></ul><p>OK，let‘s run it！！!</p><p><img src="http://www.wailian.work/images/2018/09/09/Sep-09-201820-50-31.gif" alt="Sep-09-201820-50-31.gif"></p><p>我们虽然没有在代码里面重写onClickListener和onClick方法，但是通过DataBinding的方式还是成功实现了view的onClick()，至于上面的name和email的更新，就是下面要讲的了。</p><h2 id="使用Observablues动态更新UI"><a href="#使用Observablues动态更新UI" class="headerlink" title="使用Observablues动态更新UI"></a>使用Observablues动态更新UI</h2><p>推动人类进步的，其实是懒惰。为了能够少写两行代码，人类总是可以发明出各种新技术。例如：Observablues</p><p>Question：有没有办法在数据变化的时候让UI自动刷新呢？</p><p>答案当然是有的，let me show you：</p><h3 id="修改User类"><a href="#修改User类" class="headerlink" title="修改User类"></a>修改User类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">BaseObservable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bindable</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name == <span class="keyword">null</span> ? <span class="string">""</span> : name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        notifyPropertyChanged(BR.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bindable</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email == <span class="keyword">null</span> ? <span class="string">""</span> : email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">        notifyPropertyChanged(BR.email);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>User继承BaseObservable</li><li>每个getter()加上注解@Bindable</li><li>每个setter()加上notifyPropertyChanged(BR.xxx); - BR在rebuild后自动生成</li></ul><h3 id="修改MainActivity-1"><a href="#修改MainActivity-1" class="headerlink" title="修改MainActivity"></a>修改MainActivity</h3><p>我们只需要改一个地方：onFabClicked()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFabClicked</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line">    Toast.makeText(getApplicationContext(), <span class="string">"FAB clicked!"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    user.setName(<span class="string">"BlueLzyzzz"</span>);</span><br><span class="line">    user.setEmail(<span class="string">"blueblueblue@163.com"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们并没有给textview设置text，而是给user的name和email重新赋值，看一下在FAB点击的时候UI会不会跟随data进行动态刷新。</p><p>run the project 。。。。。and 回头看上面的动图，哈哈哈~</p><h2 id="使用ObervablueFields动态更新UI"><a href="#使用ObervablueFields动态更新UI" class="headerlink" title="使用ObervablueFields动态更新UI"></a>使用ObervablueFields动态更新UI</h2><p>其实上面已经把DataBinding的基本用法讲的差不多了，通过实践的方式一步步学习DataBinding，我觉得还是比较快速和容易上手的。</p><p>至于ObervablueFields，它其实也是为了能够减少代码量，当一个Bean没有那么多属性的时候，我们不需要写这么多的get和set方法，使用ObervablueFields只需要通过两行代码即可实现相同效果。</p><p>下面是Demo：</p><h3 id="修改User类-1"><a href="#修改User类-1" class="headerlink" title="修改User类"></a>修改User类</h3><p>加上age属性：</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用ObservableField</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ObservableField&lt;<span class="keyword">String</span>&gt; age = <span class="keyword">new</span> <span class="type">ObservableField</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ObservableField&lt;<span class="keyword">String</span>&gt; getAge() &#123;</span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改content-data-binding-xml"><a href="#修改content-data-binding-xml" class="headerlink" title="修改content_data_binding.xml"></a>修改content_data_binding.xml</h3><p>多加一个TextView</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/age"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"@&#123;user.age&#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="修改MainActivity-2"><a href="#修改MainActivity-2" class="headerlink" title="修改MainActivity"></a>修改MainActivity</h3><p>修改onFabClicked()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFabClicked</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line">    Toast.makeText(getApplicationContext(), <span class="string">"FAB clicked!"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    user.setName(<span class="string">"BlueLzyzzz"</span>);</span><br><span class="line">    user.setEmail(<span class="string">"blueblueblue@163.com"</span>);</span><br><span class="line">    User.age.set(<span class="string">"20"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其实就是多加了一行，User.age.set(“20”); 因为age是静态变量，所以可以直接引用。</p><p>效果嘛。。还是回头看动图吧~~~</p><p>在实际项目中，通常一个API返回的Bean都会有十几个属性，多的可能有几十个，我们不可能一个个去写getter和setter还有@Bindable，这时候可以通过ObervablueFields来减少工作量，也可以通过插件来自动生成需要的代码。</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Learning By Doing&lt;/p&gt;
&lt;p&gt;一个Demo掌握DataBinding的基本用法&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android" scheme="https://www.bluelzy.com/categories/Android/"/>
    
    
      <category term="Android" scheme="https://www.bluelzy.com/tags/Android/"/>
    
      <category term="DataBinding" scheme="https://www.bluelzy.com/tags/DataBinding/"/>
    
  </entry>
  
  <entry>
    <title>近况还有书籍推荐</title>
    <link href="https://www.bluelzy.com/articles/recommand_book_and_movie0821.html"/>
    <id>https://www.bluelzy.com/articles/recommand_book_and_movie0821.html</id>
    <published>2018-08-21T00:22:43.000Z</published>
    <updated>2018-08-24T19:24:20.983Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>转眼就到了8月下旬，这个月还没写过博客呢</p><p>由于最近忙于求职&amp;入职，只能写点 <del>修仙</del> 休闲的文章了</p><p>今天给大家推荐一下辞职之后，暑假期间看过的书籍</p></blockquote> <a id="more"></a><h2 id="近况"><a href="#近况" class="headerlink" title="近况"></a>近况</h2><p>我在5月底的时候从上一家公司离职了，原计划是和高考的同学们一起，开开心心过个暑假，再开开心心一起去<del>上学</del> (工作- -)，所以呢，从6月份开始，就计划着去旅游，空闲时间看看书，看看电影，也不觉得时间过得很快。没想到去完旅游回来，一看银行账户的余额已经所剩无几了，吓得我赶紧开始投简历找工作，重新加入到搬砖的大军当中。</p><p>大家看到我的最近一篇博客是7月23号的，为什么半个月都没更新呢？因为在这个求职的过程中，我的心态还是比较轻松的，去面试的第一家公司就成功拿到了offer，后来去其他公司面试的时候都比较有底气，也不担心找不到工作，就是抱着找到合适的公司再入职的心态，结果一直到了8月初才找到心仪的公司。</p><p>趁还没有入正题之前，稍微提一下Android面试的常见问题和需要的知识储备吧，我面的是高级Android工程师，所以基本上没有公司直接问我Activity生命周期，启动方式这种简单的理论性问题了，而是结合具体的场景，例如：页面有3级，点击推送后直接打开第三级的页面，我需要从第三级直接回到第一级，需要怎么做？根据我面试了好几家公司的情况来说，问的知识点基本上都包括在这几个方面：</p><ul><li>Java基础 - 集合用法，实现原理，理解面向对象特性</li></ul><p>推荐书籍：《Java核心技术卷一》，《Effective Java》</p><ul><li>Android技术 - Activity/Fragment，网络请求框架，Databinding，RxJava，Unit Test，屏幕适配，性能优化，RecyclerView，Kotlin</li></ul><p>推荐资料：《Android开发艺术探索》，《Android源码设计模式解析与实战》，《Kotlin in Action》，Android Developer(学习新技术好去处)</p><ul><li>其他：数据结构与算法 - 数组，链表，队列，设计模式 - 单例，观察者，工厂</li></ul><p>推荐资料：《算法（第四版）》，《图解算法》，《Head First 设计模式》</p><p><strong>PS: 有条件的可以看英文版，毕竟翻译过来意思没有原版的直接清晰。</strong></p><p>唠唠叨叨了这么多，也算是对近期求职过程的一个记录吧。好了，终于可以开始进入正题了，每本书会加上我个人的看法（不喜欢的评论&amp;点赞就好了，哈哈哈）</p><h2 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h2><h3 id="六月："><a href="#六月：" class="headerlink" title="六月："></a>六月：</h3><h4 id="推荐书籍："><a href="#推荐书籍：" class="headerlink" title="推荐书籍："></a>推荐书籍：</h4><ul><li><p><a href="https://book.douban.com/subject/25959184/" target="_blank" rel="noopener">疯狂Java讲义</a> </p><p><img src="https://img3.doubanio.com/view/subject/l/public/s27404471.jpg" alt=""></p><p>学习Java的人应该都听过这本书吧，甚至很多人的第一本入门书籍就是它了，作为找工作复习Java基础用，代码案例巨多，可以和Head First Java配合一起看，至于《Java核心技术》，个人觉得对于零基础的小白来说还是太难了，很多概念不好理解，需要通过代码运行看结果才容易掌握。</p><p>推荐指数：5星</p></li><li><p><a href="https://book.douban.com/subject/26744163/" target="_blank" rel="noopener">Android开发进阶-从小工到专家</a></p><p><img src="https://img3.doubanio.com/view/subject/l/public/s28508155.jpg" alt=""></p><p>面向Android中级开发者的进阶书籍，可惜里面的知识点讲解都比较碎片化，不是很系统，而且错别字很多，看了几章就看不下去了，作为一个Android开发，不推荐大家看这本书，进阶的话推荐《Android开发艺术探索》</p><p>推荐指数：2星</p></li></ul><ul><li><p><a href="https://book.douban.com/subject/26337663/" target="_blank" rel="noopener">无言的宇宙</a> </p><p><img src="https://img3.doubanio.com/view/subject/l/public/s28045752.jpg" alt=""></p><p>隐藏在24个数学公式背后的故事 - 从副标题可以看出来，这本书其实就是一本关于数学公式的科普书籍，学渣表示很多都看不太懂，只能当成小说来看了。针对<strong>豆瓣评分8.9</strong>来说，我的建议是：大家如果数学基础比较好的话，可以尝试跟着作者的思路，去体会隐藏在数学公式背后的美妙之处，对于数学基础不太好的人，例如我，就只能看懂一部分，剩下的，阿弥陀佛。</p><p>推荐指数：3星</p></li><li><p><a href="https://book.douban.com/subject/10773358/" target="_blank" rel="noopener">意志力</a>  </p><p><img src="https://img3.doubanio.com/view/subject/l/public/s10352055.jpg" alt="">        </p><p>这本书我是和《自控力》来比较的，感觉比较偏向于理论，没有《自控力》的实操性强，也就是偏向于道，而缺少了术，因为全书的每个章节都会提出大量的案例，对<strong>意志力</strong>这个主题进行讲解，所以如果对人的大脑运行机制有兴趣的童鞋，可以找来看一看，如果只是想着如何提高意志力的方法，那么还是推荐《自控力》这本书， 里面有很多的指引和具体的实施方法。</p><p>推荐指数：3星</p></li><li><p><a href="https://book.douban.com/subject/26983052/" target="_blank" rel="noopener">力哥说理财-互联网金融</a> </p><p><img src="https://img3.doubanio.com/view/subject/l/public/s29365505.jpg" alt=""></p><p>emmm…怎么说呢，这本书专注于<strong>互联网金融</strong>的入门理论，也就是介绍相关的基础知识，关于：余额宝，P2P，众筹等新兴的互联网金融产业都有详细的介绍，小白可以把这本书作为入门书籍。</p><p>推荐指数：4星</p></li><li><p><a href="https://book.douban.com/subject/6973970/" target="_blank" rel="noopener">人间失格</a></p><p><img src="https://img3.doubanio.com/view/subject/l/public/s7003165.jpg" alt="">  </p><p>6月看的唯一一本小说，而且还是给我留下了深刻印象的小说。</p><p>介绍一下作者：</p><p>太宰治（1909-1948），日本文学的重要人物，“私小说”领域的天才作家。</p><p>太宰治出身于东北地主家庭，从小体弱敏感；中学开始迷上文学，崇拜泉镜花和芥川龙之介；高中时立志于文学创作，开始发表随笔等。</p><p>1935年凭借《逆行》获得第一届芥川奖候补作品；1945年《女学生》获第四届北村透谷文学奖。</p><p>太宰治后期创作的《人间失格》、《斜阳》、《维庸之妻》、《Goodbye》等被认为是其最优秀的作品。</p><p>太宰治一生多次求死，在自我放逐和沉沦中结束了自己的生命。</p><p>直至1948年自杀，在他短暂的一生中，他向世人展示了无与伦比的文学才华，留下众多不朽佳作。其多数作品采用“私小说”的自我告白形式，充满了纯粹而敏锐的感受性，吸引着一代又一代的年轻人。</p><p>《人间失格》这本书，我个人感觉就像太宰治的生平一样，性格敏感而又具有浓厚的自我意识，在清醒的自我和混沌的世俗中生存，最终选择了自杀这个结局。看完以后仿佛我成了书中的主角，深深地体会到主角的痛苦与无奈。这也是小说的成功之处，能让读者产生代入感。</p><p>推荐指数：4星</p></li><li><p><a href="https://book.douban.com/subject/25749845/" target="_blank" rel="noopener">把时间当作朋友</a>  </p><p><img src="https://img3.doubanio.com/view/subject/l/public/s27898952.jpg" alt=""></p></li></ul><p>李笑来老师，大家应该都很熟悉了，近年来他身上最耀眼的标签是“中国最大的比特币玩家”，哈哈哈。在这里只评论书，不评论人，这本书写得是真的好，作者本身的经历得出来的经验，足以让我们这些后辈从中吸取教训并得以成长。</p><p>推荐指数：<strong>5星</strong></p><h4 id="看过但不推荐的书籍："><a href="#看过但不推荐的书籍：" class="headerlink" title="看过但不推荐的书籍："></a>看过但不推荐的书籍：</h4><ul><li><p><a href="https://book.douban.com/subject/27131739/" target="_blank" rel="noopener">共富精神</a></p><p>这本书是2017年出版的，针对最近比较火的<strong>共享经济</strong>进行分析，作者通过社会学，经济学，心理学等各个学科的综合，针对“共富型社会”以及“共享经济”作出说明，为什么这会是未来社会的潮流。然后指引我们要朝着“共赢”，“共富”的目标去努力，对我个人而言，这本书比较像是政府报告。。也可能是我的意识形态还达不到作者的高度吧。anyway。</p><p>推荐指数：1星</p></li><li><p><a href="https://book.douban.com/subject/26377999/" target="_blank" rel="noopener">一本书读懂投资理财学</a> </p><p>京东99块10本买回来的书，里面大部分观点在基金三部曲里面都已经看过了，所以，快速翻了一遍。over</p><p>推荐指数：1星  </p></li><li><p><a href="https://book.douban.com/subject/26830620/" target="_blank" rel="noopener">语言的力量</a>        </p><p>这本书我就不放图片了，有兴趣的可以去豆瓣读书看简介，烂书，个人不推荐！</p></li></ul><h3 id="七月："><a href="#七月：" class="headerlink" title="七月："></a>七月：</h3><h4 id="推荐书籍：-1"><a href="#推荐书籍：-1" class="headerlink" title="推荐书籍："></a>推荐书籍：</h4><ul><li><p><a href="https://book.douban.com/subject/6538430/" target="_blank" rel="noopener">人类群星闪耀时</a></p><p><img src="https://img3.doubanio.com/view/subject/l/public/s6816611.jpg" alt=""></p><p>这本书让我记住了作者的名字：<a href="https://book.douban.com/author/4514004/" target="_blank" rel="noopener">斯蒂芬·茨威格</a> ，并且饶有兴趣地百度了一下作者的简介，主要是因为这本书对每个小故事里面的人物描写刻画实在是太真实了，看完以后我仿佛已经认识了故事中的主人公，知道他的长相，脾性以及做事的风格。具有这种侧写能力的人，除了《龙族》里面的诺诺，暂时也只有你了，斯蒂芬。</p><p>推荐指数：5星</p></li><li><p><a href="https://book.douban.com/subject/3098548/" target="_blank" rel="noopener">寻找时间的人</a>   </p><p><img src="https://img1.doubanio.com/view/subject/l/public/s3254528.jpg" alt=""></p><p>说实话，这本书其实我并没有太看懂，后面有时间再读一遍吧。</p><p>推荐指数：3星</p></li><li><p><a href="https://book.douban.com/subject/26954760/" target="_blank" rel="noopener">月亮与六便士</a>   </p><p><img src="https://img1.doubanio.com/view/subject/l/public/s29634528.jpg" alt=""></p><p>The Moon and Sixpence，你是选择月亮呢，还是选择六便士呢？正如现在很多年轻人面临的玫瑰和面包的选择一样，在这里我想引用简介里的一段话：</p><blockquote><p>“满地都是六便士，他却抬头看见了月亮。”</p><p>银行家查尔斯，人到中年，事业有成，为了追求内心隐秘的绘画梦想，突然抛妻别子，弃家出走。他深知：人的每一种身份都是一种自我绑架，唯有失去是通向自由之途。</p><p>在异国他乡，他贫病交加，对梦想却愈发坚定执着。他说：我必须画画，就像溺水的人必须挣扎。</p><p>在经历种种离奇遭遇后，他来到南太平洋的一座孤岛，同当地一位姑娘结婚生子，成功创作出一系列惊世杰作。就在此时，他被绝症和双目失明击倒，临死之前，他做出了让所有人震惊的决定……</p><p>人世漫长得转瞬即逝，有人见尘埃，有人见星辰。查尔斯就是那个终其一生在追逐星辰的人。</p></blockquote><p>希望你也能成为，终其一生在追逐星辰的人。</p><p>推荐指数：<strong>5星</strong> </p></li><li><p><a href="https://book.douban.com/subject/1037602/" target="_blank" rel="noopener">别闹了，费曼先生</a></p><p>理工科的学生，或者是程序员们，推荐你们都去看一看</p><p><strong>推荐指数：满分💯 </strong> </p></li></ul><h4 id="不推荐书籍："><a href="#不推荐书籍：" class="headerlink" title="不推荐书籍："></a>不推荐书籍：</h4><ul><li><a href="https://book.douban.com/subject/30155590/" target="_blank" rel="noopener">Python编程导论</a>  </li><li><a href="https://book.douban.com/subject/27096034/" target="_blank" rel="noopener">历史不忍细看</a>   </li></ul><p>这两本书都是比较空洞的，没有细节和实质性内容，所以还没有看完就丢到一边了。</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>转眼就到8月底了，这个月的第一篇文章，接下来应该就能恢复正常的更新节奏了，打算写点Android的常用技术，想到哪里就写到哪里吧，哈哈~</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;转眼就到了8月下旬，这个月还没写过博客呢&lt;/p&gt;
&lt;p&gt;由于最近忙于求职&amp;amp;入职，只能写点 &lt;del&gt;修仙&lt;/del&gt; 休闲的文章了&lt;/p&gt;
&lt;p&gt;今天给大家推荐一下辞职之后，暑假期间看过的书籍&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="日常说" scheme="https://www.bluelzy.com/categories/%E6%97%A5%E5%B8%B8%E8%AF%B4/"/>
    
    
      <category term="日常" scheme="https://www.bluelzy.com/tags/%E6%97%A5%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>Mac安装Scrapy及踩坑经验</title>
    <link href="https://www.bluelzy.com/articles/install_scrapy_for_mac.html"/>
    <id>https://www.bluelzy.com/articles/install_scrapy_for_mac.html</id>
    <published>2018-07-22T16:34:09.000Z</published>
    <updated>2018-07-22T16:36:47.894Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>Mac下安装Scrapy</p><p>折腾了一下午的踩坑坑坑经验</p></blockquote> <a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul><li>系统 - macOS 10.13.6 </li><li>Python - 2.7 和 3.6 共存</li></ul><p>Mac出厂自带python2.7版本，后面我又自己安装了Python3.X，于是电脑里就有两个版本共存的情况，今天打算装个Scrapy玩玩，不了解Scrapy的童鞋可以看官方文档：<a href="https://doc.scrapy.org/en/latest/intro/overview.html" target="_blank" rel="noopener">Scrapy官网文档</a></p><p>结果没想到一装就是3小时，中间遇到了无数的坑，最终通过曲线救国的方式才把Scrapy装上了，于是趁热打铁，赶紧把踩坑经验写下来，方便以后自己查阅，也方便遇到类似问题的朋友们参考。</p><p>主要遇到的问题有以下几个：</p><ul><li>pip install scrapy 安装速度过慢</li><li>OSError: [Errno 1] Operation not permitted: ‘/tmp/pip-HG6JNq-uninstall/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/six-1.4.1-py2.7.egg-info</li><li>scrapy: command not found</li></ul><p>这几个问题在后面会有解决方法，首先我们按照正常的安装流程走一遍。</p><h2 id="第一步：安装pip"><a href="#第一步：安装pip" class="headerlink" title="第一步：安装pip"></a>第一步：安装pip</h2><p>这里默认大家都已经安装了Homebrew，如果还没了解的，可以百度或者看看我的另一篇博客：<a href="https://blog.csdn.net/blue_zy/article/details/69568240" target="_blank" rel="noopener">Mac安装python3以及问题总结</a></p><p>终端输入：<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">python</span> <span class="built_in">get</span>-pip.<span class="keyword">py</span></span><br></pre></td></tr></table></figure></p><p>即可完成pip安装</p><h2 id="第二步：安装Scrapy"><a href="#第二步：安装Scrapy" class="headerlink" title="第二步：安装Scrapy"></a>第二步：安装Scrapy</h2><p>终端输入：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip <span class="keyword">install</span> Scrapy</span><br></pre></td></tr></table></figure><p>如果一切顺利的话（当然这个概率比较小。。），你会看到安装成功的语句，输入 <strong>scrapy -v</strong> 就能看到scrapy的版本号了，目前最新的是1.5.1。</p><p><img src="https://img-blog.csdn.net/20180722172433956?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JsdWVfenk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p><p>那么如果没有成功安装，而是报错了怎么办呢。。根据我google到的情况，报错的情况真的是千奇百怪，所以这里我也只能列举自己遇到的，至于其他的只能向搜索引擎求助了。</p><h2 id="第三步：踩坑经验"><a href="#第三步：踩坑经验" class="headerlink" title="第三步：踩坑经验"></a>第三步：踩坑经验</h2><h4 id="1-pip-install-scrapy-的下载速度过慢"><a href="#1-pip-install-scrapy-的下载速度过慢" class="headerlink" title="1.pip install scrapy 的下载速度过慢"></a>1.pip install scrapy 的下载速度过慢</h4><p>解决方式：更换下载源，可以使用国内的豆瓣<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -<span class="selector-tag">i</span>  https:<span class="comment">//pypi.douban.com/simple scrapy</span></span><br></pre></td></tr></table></figure></p><h4 id="2-安装过程报错"><a href="#2-安装过程报错" class="headerlink" title="2.安装过程报错"></a>2.安装过程报错</h4><p>（1）</p><blockquote><p>OSError: [Errno 1] Operation not permitted: ‘/tmp/pip-HG6JNq-uninstall/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/six-1.4.1-py2.7.egg-info</p></blockquote><p>解决方法：忽略已经安装的six包<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip <span class="keyword">install </span><span class="keyword">scrapy </span>--ignore-<span class="keyword">installed </span>six</span><br></pre></td></tr></table></figure></p><p>参考来源：<a href="https://github.com/pypa/pip/issues/3165" target="_blank" rel="noopener">Six issue when installing package</a></p><p>（2）</p><blockquote><p>[Errno 13] Permission denied</p></blockquote><p>解决方法：通过 users 文件夹安装<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --<span class="keyword">user</span> <span class="title">google-assistant-sdk</span>[samples]</span><br></pre></td></tr></table></figure></p><p>参考来源：<a href="https://github.com/googlesamples/assistant-sdk-python/issues/236" target="_blank" rel="noopener">Permission denied How i solve this problem</a></p><h4 id="3-安装成功但是报command-not-found错误"><a href="#3-安装成功但是报command-not-found错误" class="headerlink" title="3. 安装成功但是报command not found错误"></a>3. 安装成功但是报command not found错误</h4><p>我主要是在这一步卡了很久，网上查到的资料是说，报错原因是环境变量没有配置好，但是我加入环境变量后也还是不行，所以在这里我先附上参考链接，对我没用可能对其他人有用呢。</p><ul><li><a href="https://stackoverflow.com/questions/17607944/scrapy-not-installed-correctly-on-mac" target="_blank" rel="noopener">Scrapy not installed correctly on mac?</a></li><li><a href="http://www.mamicode.com/info-detail-2181308.html" target="_blank" rel="noopener">bash: scrapy: command not found</a></li></ul><p>哪怕我把scrapy的路径加入到环境变量中，还是有这个错误。于是我先把scrapy卸载掉，然后再用python3来安装，没想到就完美解决这个问题了。。</p><p>只需一行<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 <span class="keyword">install</span> scrapy</span><br></pre></td></tr></table></figure></p><p>安装完的效果就是文章开头的截图，输入scrapy -v 能看到版本信息，也能通过scrapy来创建爬虫项目了。</p><p>一点猜测：由于mac自带python2.7，在安装的过程中scrapy成功装上了，但是环境变量不对，导致找不到scrapy正确的执行路径。Stack Overflow上也有类似的问题，但是暂时还没有人解答。</p><ul><li><a href="https://stackoverflow.com/questions/44469585/python-bash-scrapy-command-not-found-on-mac-os" target="_blank" rel="noopener">Python: -bash: scrapy: command not found on Mac OS</a><br>这个哥们遇到的问题和我一模一样，成功安装，可以导入，环境变量也加了，就是死活找不到scrapy。</li></ul><p>关于Scrapy安装经验暂时就这么多，如果有大神能够解除疑惑，欢迎多多交流。</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;Mac下安装Scrapy&lt;/p&gt;
&lt;p&gt;折腾了一下午的踩坑坑坑经验&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="技术向" scheme="https://www.bluelzy.com/categories/%E6%8A%80%E6%9C%AF%E5%90%91/"/>
    
    
      <category term="Python" scheme="https://www.bluelzy.com/tags/Python/"/>
    
      <category term="Scrapy" scheme="https://www.bluelzy.com/tags/Scrapy/"/>
    
  </entry>
  
</feed>
